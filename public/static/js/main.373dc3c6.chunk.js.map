{"version":3,"sources":["diary144.png","component/customReducer.jsx","component/fire.jsx","component/reduxstore.jsx","component/redux.jsx","component/dbaccess.js","account/summary.jsx","account/firebaseUI.jsx","account/authRedux.jsx","component/customDialogueComponent.jsx","component/customDialogue.jsx","theme/theme.js","account/logout.jsx","account/accountComponent.jsx","account/account.jsx","security/securityComponent.jsx","security/cards.jsx","security/security.jsx","component/server.jsx","journalComponent/journalDisplay.jsx","component/spinner.jsx","journalComponent/journalFormComponent.jsx","component/formHOC.jsx","journalComponent/journalForm.jsx","journalStrings/firestoreRedux.jsx","journalComponent/updateJournal.jsx","journalComponent/editableComponent.jsx","journalComponent/editableContainer.jsx","journalComponent/createJournalComponent.jsx","journalComponent/createJournal.jsx","component/passwordInput.jsx","security/pinFormComponent.jsx","security/pinForm.jsx","component/enctype.js","security/loginHOC.jsx","security/pinLogin.jsx","journalComponent/journalComponent.jsx","journalComponent/journalContainer.jsx","component/terms.jsx","component/privacy.jsx","component/popper.jsx","journalStrings/tinyComponent.jsx","journalStrings/tinymceEditor.jsx","journalStrings/writer.jsx","journalStrings/readBtn.jsx","journalStrings/newEntry.jsx","journalStrings/onlineList.jsx","journalStrings/onlineReader.jsx","journalStrings/deleteDialogue.jsx","journalStrings/moreMenu.jsx","journalStrings/readFinal.jsx","component/backdrop.jsx","journalStrings/read.jsx","journalStrings/decrypter.jsx","security/keyFormComponent.jsx","security/keyForm.jsx","security/pinSignup.jsx","security/pinChange.jsx","security/pinDiscard.jsx","component/formInput.jsx","account/loginFormComponent.jsx","account/loginForm.jsx","account/loginComponent.jsx","account/login.jsx","component/formCheck.jsx","account/emailFormComponent.jsx","account/emailForm.jsx","account/passwordFormComponent.jsx","account/passwordForm.jsx","component/snackBar.jsx","account/signupComponent.jsx","account/signup.jsx","navs/drawer.jsx","theme/themeRedux.js","theme/themeTypeComponent.jsx","theme/themeType.jsx","navs/navBody.jsx","navs/mainNav.jsx","component/protected.jsx","theme/colorSelectorComponent.jsx","theme/colorSelector.jsx","theme/themeColorComponent.jsx","theme/themeColor.jsx","App.js","serviceWorker.js","index.js"],"names":["module","exports","initialState","msg","securityKey","storageKey","loading","current","validated","status","finish","email","steps","title","content","customReducer","state","action","type","console","log","data","pin","firebase","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","enablePersistence","then","catch","err","errorCode","code","errorMessage","message","alert","functions","window","__INITIAL_STATE__","rootReducer","combineReducers","firebaseReducer","firestore","firestoreReducer","custom","store","createStore","compose","applyMiddleware","thunk","withExtraArgument","getFirebase","getFirestore","reduxFirestore","isLogged","checkKey","setMsg","db","Dexie","version","stores","connect","journals","ordered","props","useState","setPin","useEffect","count","val","color","icon","className","Grid","container","justify","alignContent","direction","item","xs","sm","md","IconButton","id","style","fontSize","Divider","Typography","length","uiConfig","callbacks","signInSuccess","signInOptions","auth","GoogleAuthProvider","PROVIDER_ID","FacebookAuthProvider","EmailAuthProvider","EMAIL_PASSWORD_SIGN_IN_METHOD","FirebaseUi","firebaseAuth","emailChecked","CustomDialogueComponent","description","open","handleClose","confirm","children","Dialog","onClose","aria-labelledby","aria-describedby","DialogTitle","DialogContent","DialogContentText","DialogActions","Button","onClick","autoFocus","CustomDialogue","React","setOpen","render","useStyles","makeStyles","theme","flex","display","flexWrap","flexGrow","vertCenter","horCenter","justifyContent","root","alignItems","paper","flexDirection","padding","spacing","margin","textAlign","backgroundColor","card","palette","primary","main","contrastText","cardAuth","maxWidth","fab","position","right","bottom","readFab","cardWidth","height","cardActions","alignSelf","error","success","mainIcon","button","background","secondary","menuButton","marginRight","list","width","fullList","listRoot","overflow","listSection","listUl","listInline","listItem","cursor","dispatch","logoutAsync","getState","clear","signOut","history","useHistory","classes","uid","push","handleClickOpen","AccountComponent","profile","displayName","firstName","lastName","variant","component","cards","name","path","SecurityComponent","isSetCards","notSetCards","Paper","Cards","Link","to","pins","isSet","filter","notSet","map","index","key","Fetcher","method","a","realFetcher","response","value","refreshToken","refreshResponse","token","add","comfy","fetch2","fetch","headers","Headers","credentials","res","json","toArray","complex","submit","Authorization","body","JSON","stringify","ves","clone","text","JournalDisplay","setActiveJournal","journal","journalName","journalDescription","createdAt","journalId","date","moment","format","time","Card","CardHeader","subheader","CardContent","CardActions","ButtonGroup","aria-label","endIcon","onEditClick","Spinner","role","JournalFormComponent","register","errors","btnText","onFormClose","Box","marginBottom","p","TextField","label","placeholder","inputRef","required","pattern","maxLength","helperText","defaultValue","startIcon","FormHOC","WrappedComponent","useForm","mode","handleSubmit","watch","setValue","getValues","onSubmit","e","target","reset","onFormSubmit","UpdateJournal","onJournalUpdate","formData","updateData","updateJournal","this","Component","journalData","userId","collection","doc","update","$","trigger","EditableComponent","editFormOpen","closeForm","openForm","onTrashClick","onJournalDelete","journalid","EditableContainer","setState","Error","refreshJournal","CreateJournalComponent","isOpen","onFormOpen","CreateJournal","uuid","Date","toISOString","entries","newJournal","set","PasswordInput","registerObject","visible","setVisible","size","InputProps","endAdornment","InputAdornment","onMouseDown","event","preventDefault","Visibility","VisibilityOff","PinFormComponent","minLength","encrypt","unencryptedEntry","customId","encryptHash","customEntry","hash","SHA256","toString","AES","encrypted","entry","decrypt","encryptedEntry","decryptHash","bytes","CryptoJS","enc","Utf8","decrypted","unEncryptedHash","encryptedHash","encryptPin","unEncryptedPin","mapStateToProps","mapDispatchToProps","setKey","LoginHOC","HOC","access","hashedPin","where","equals","Main","myJournals","JournalContainer","journalList","Privacy","SimplePopper","anchorEl","setAnchorEl","Boolean","undefined","currentTarget","Popper","zIndex","TinymceEditor","subject","checked","changeView","onEntryChange","init","mobileInit","fullWidth","FormControlLabel","control","Switch","inputProps","onChange","handleClick","Info","initialValue","onEditorChange","aria-controls","setChecked","mobile","menubar","plugins","menu","favs","items","toolbar","autosave_restore_when_empty","journalIdStatus","withRouter","ownProps","newEntry","sanitizeHtml","myValues","ReadBtn","Fab","read","match","params","addEntry","entryData","entryId","merge","goBack","savedJournal","pathname","from","location","textDecoration","ListItem","ListItemAvatar","Avatar","charAt","ListItemText","Fragment","List","ListSubheader","Badge","badgeContent","entriesList","firestoreConnect","entriesListener","subcollections","orderBy","storeAs","DeleteDialogue","MoreMenu","handleMenu","edit","aria-haspopup","MoreOutlined","anchorOrigin","vertical","horizontal","keepMounted","transformOrigin","MenuItem","ReadFinal","minHeight","m","dangerouslySetInnerHTML","__html","backdrop","drawer","MainBackdrop","Backdrop","CircularProgress","ReadOnline","onUpdate","appData","updateEntry","onDelete","deleteEntry","prevState","split","delete","entryListener","decryptEntry","KeyFormComponent","validate","PinSignup","pinSignup","keyData","next","discard","FormInput","htmlFor","ref","LoginFormComponent","LoginComponent","handleFormSubmit","src","logo","alt","loginAsync","loginData","password","signInWithEmailAndPassword","user","FormCheck","EmailFormComponent","disabled","PasswordFormComponent","prev","SnackBar","Snackbar","autoHideDuration","reason","SignupComponent","validateMail","signupAsync","signupData","createUserWithEmailAndPassword","checkEmailAsync","emailData","httpsCallable","checkEmail","MyDrawer","anchor","toggleDrawer","clsx","onKeyDown","initials","ListItemIcon","applyTheme","ThemeTypeComponent","toggleTheme","darkMode","newTheme","NavBody","AppBar","Toolbar","toolBar","edge","MenuOutlined","textTransform","nameArray","letter1","letter2","journalListener","popMenu","SwipeableDrawer","onOpen","Protected","rest","useSelector","isLoaded","isEmpty","ColorSelectorComponent","toggler","toggleState","saveColor","onChangeComplete","lg","ColorSelector","save","initialColor","setColor","hex","ThemeColor","savePrimaryColor","saveSecondaryColor","togglePrimarySelector","toggleSecondarySelector","applyChanges","primaryToggleState","secondaryToggleState","withTheme","primaryColor","secondaryColor","library","faFolderOpen","faEdit","faTrashAlt","faLockOpen","faBookOpen","faUserEdit","faPenAlt","faSave","faPlus","faTimes","faStickyNote","faArrowLeft","faEllipsisV","faCog","faHome","faKey","faUserCog","faUserLock","faUserShield","faUser","faBars","faUserCircle","faBook","faCheck","faPaintBrush","faAngleUp","faAngleDown","faUndo","faSun","faMoon","createMuiTheme","MuiFab","MuiButton","MuiButtonGroup","MuiTextField","ThemeProvider","CssBaseline","Account","Terms","Login","Signup","exact","isLocalhost","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onSuccess","rrfProps","userProfile","useFirestoreForProfile","createFirestoreInstance","AuthIsLoaded","ReactDOM","document","getElementById","URL","href","origin","addEventListener","contentType","get","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.373dc3c6.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/diary144.b9be3d1a.png\";","const initialState = {\r\n  msg: \"\",\r\n  securityKey: false,\r\n  storageKey: false,\r\n  loading: false,\r\n  current: 0,\r\n  validated: false,\r\n  status: false,\r\n  finish: false,\r\n  email: \"\",\r\n  steps: [\r\n    { title: \"Email\", content: \"Confirm Email\" },\r\n    { title: \"Password\", content: \"Type in your Password\" },\r\n  ],\r\n};\r\n\r\nconst customReducer = (state = initialState, action) => {\r\n  //console.log(state);\r\n  let msg, loading, current, email;\r\n  switch (action.type) {\r\n    case \"CHECK_EMAIL\":\r\n      console.log(action);\r\n      email = action.email;\r\n      loading = false;\r\n      msg = action.msg;\r\n      return {\r\n        ...state,\r\n        email,\r\n        loading,\r\n        msg,\r\n      };\r\n    case \"LOADING\":\r\n      loading = action.loading;\r\n      return {\r\n        ...state,\r\n        loading,\r\n      };\r\n    case \"FINISH_LOADING\":\r\n      msg = action.msg;\r\n      loading = action.loading;\r\n      return {\r\n        ...state,\r\n        msg,\r\n        loading,\r\n      };\r\n    case \"SET_KEY\":\r\n      let securityKey;\r\n      if (!!action.data.pin) {\r\n        securityKey = true;\r\n      } else {\r\n        securityKey = false;\r\n      }\r\n      return { ...state, securityKey };\r\n    case \"NEXT\":\r\n      current = state.current + 1;\r\n      return { ...state, current };\r\n    case \"PREV\":\r\n      current = state.current - 1;\r\n      return { ...state, current };\r\n    case \"CHECK_KEY\":\r\n      const storageKey = action.data.storageKey;\r\n      return { ...state, storageKey };\r\n    case \"SET_MSG\":\r\n      msg = action.data.msg;\r\n      return { ...state, msg };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default customReducer;\r\n","// Firebase App (the core Firebase SDK) is always required and must be listed first\r\nimport * as firebase from \"firebase/app\";\r\n// If you enabled Analytics in your project, add the Firebase SDK for Analytics\r\nimport \"firebase/analytics\";\r\n\r\n// Add the Firebase products that you want to use\r\nimport \"firebase/auth\";\r\nimport \"firebase/firestore\";\r\nimport \"firebase/functions\";\r\n\r\n/*var firebaseConfig = {\r\n  apiKey: \"AIzaSyBrU1Qww3cQ2AjOmhh3KE4QjHBhDqXlVcc\",\r\n  authDomain: \"comfy-278412.firebaseapp.com\",\r\n  databaseURL: \"https://comfy-278412.firebaseio.com\",\r\n  projectId: \"comfy-278412\",\r\n  storageBucket: \"comfy-278412.appspot.com\",\r\n  messagingSenderId: \"1052451709336\",\r\n  appId: \"1:1052451709336:web:aa0946bf2b75598ef48bed\",\r\n  measurementId: \"G-K30Z63CKT6\",\r\n};*/\r\nconst firebaseConfig = {\r\n  apiKey: process.env.REACT_APP_APIKEY,\r\n  authDomain: process.env.REACT_APP_AUTHDOMAIN,\r\n  databaseURL: process.env.REACT_APP_DATABASEURL,\r\n  projectId: process.env.REACT_APP_PROJECTID,\r\n  storageBucket: process.env.REACT_APP_STORAGEBUCKET,\r\n  messagingSenderId: process.env.REACT_APP_MESSAGINGSENDERID,\r\n  appId: process.env.REACT_APP_APPID,\r\n  measurementId: process.env.REACT_APP_MEASUREMENTID,\r\n};\r\n\r\nfirebase.initializeApp(firebaseConfig);\r\nfirebase.analytics();\r\n//firebase.firestore();\r\n\r\nfirebase\r\n  .firestore()\r\n  .enablePersistence()\r\n  .then(() => {\r\n    console.log(\"offline data enabled\");\r\n  })\r\n  .catch(function (err) {\r\n    console.log({ errorCode: err.code, errorMessage: err.message });\r\n    if (err.code === \"failed-precondition\") {\r\n      // Multiple tabs open, persistence can only be enabled\r\n      // in one tab at a a time.\r\n      // ...\r\n      alert(\r\n        \"To store data for offline availability... please open one tab at a time\"\r\n      );\r\n    } else if (err.code === \"unimplemented\") {\r\n      // The current browser does not support all of the\r\n      // features required to enable persistence\r\n      // ...\r\n      console.log(\"your browser does not support offline data caching\");\r\n    }\r\n  });\r\n\r\nconst firestore = firebase.firestore();\r\nconst functions = firebase.functions();\r\n/*functions.useFunctionsEmulator(\r\n  \"http://localhost:5000/comfy-pen/us-central1/checkEmail\"\r\n);*/\r\n\r\nexport { functions, firestore };\r\n\r\n// Subsequent queries will use persistence, if it was enabled successfully\r\n\r\n//firebase.auth().setPersistence(firebase.auth.Auth.Persistence.NONE);\r\nexport default firebase;\r\n","import { createStore, combineReducers, compose, applyMiddleware } from \"redux\";\r\nimport { firebaseReducer, getFirebase } from \"react-redux-firebase\";\r\nimport {\r\n  firestoreReducer,\r\n  getFirestore,\r\n  reduxFirestore,\r\n} from \"redux-firestore\";\r\nimport thunk from \"redux-thunk\";\r\nimport customReducer from \"./customReducer\";\r\nimport firebase from \"./fire\";\r\n\r\nconst initialState = window && window.__INITIAL_STATE__;\r\n\r\nconst rootReducer = combineReducers({\r\n  firebase: firebaseReducer,\r\n  firestore: firestoreReducer,\r\n  custom: customReducer,\r\n});\r\n\r\nconst store = createStore(\r\n  rootReducer,\r\n  initialState,\r\n  compose(\r\n    applyMiddleware(thunk.withExtraArgument({ getFirebase, getFirestore })),\r\n    reduxFirestore(firebase)\r\n  )\r\n);\r\n\r\nexport default store;\r\n","function journalList(data) {\r\n  return { type: \"JOURNAL_LIST\", data };\r\n}\r\n\r\nfunction setEntriesList(data) {\r\n  return { type: \"ENTRIES_LIST\", data };\r\n}\r\n\r\nfunction setActiveEntry(data) {\r\n  return {\r\n    type: \"ACTIVE_ENTRY\",\r\n    activeEntry: data,\r\n  };\r\n}\r\n\r\nfunction setActiveJournal(data) {\r\n  return { type: \"ACTIVE_JOURNAL\", data };\r\n}\r\n\r\nfunction setKey(data) {\r\n  return { type: \"SET_KEY\", data };\r\n}\r\n\r\nfunction isLogged(data) {\r\n  return { type: \"LOGGED_IN\", data };\r\n}\r\n\r\nfunction checkKey(data) {\r\n  return { type: \"CHECK_KEY\", data };\r\n}\r\n\r\nfunction setMsg(data) {\r\n  return { type: \"SET_MSG\", data };\r\n}\r\n\r\nexport {\r\n  journalList,\r\n  setActiveJournal,\r\n  setEntriesList,\r\n  setKey,\r\n  isLogged,\r\n  checkKey,\r\n  setActiveEntry,\r\n  setMsg,\r\n};\r\n","import Dexie from \"dexie\";\r\nconst db = new Dexie(\"comfypen\");\r\ndb.version(1).stores({\r\n  pin: \"pin\",\r\n});\r\nexport default db;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { IconButton, Typography, Grid, Divider } from \"@material-ui/core\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport db from \"../component/dbaccess\";\r\n\r\nconst mapStateToProps = (state) => {\r\n  //console.log(state);\r\n  const { journals } = state.firestore.ordered;\r\n  return { journals };\r\n};\r\n\r\nfunction Summary(props) {\r\n  const [pin, setPin] = useState(false);\r\n\r\n  useEffect(() => {\r\n    db.pin.count().then((val) => {\r\n      if (val === 0) {\r\n        setPin(false);\r\n      } else {\r\n        setPin(true);\r\n      }\r\n    });\r\n  }, [setPin]);\r\n\r\n  const color = pin ? \"green\" : \"red\";\r\n  const icon = pin ? \"check\" : \"times\";\r\n  //console.log(props);\r\n  const { journals } = props;\r\n\r\n  return (\r\n    <>\r\n      <div className=\"container\">\r\n        <Grid container justify=\"center\" alignContent=\"center\">\r\n          <Grid\r\n            direction=\"column\"\r\n            item\r\n            xs={12}\r\n            sm={10}\r\n            md={8}\r\n            justify=\"center\"\r\n            alignContent=\"center\"\r\n            container\r\n          >\r\n            <IconButton id=\"journals\">\r\n              <span style={{ fontSize: \"2rem\" }}>\r\n                <FontAwesomeIcon icon=\"book\" />\r\n              </span>\r\n            </IconButton>\r\n            <Divider />\r\n            <Typography>\r\n              Account Type: <span>regular</span>\r\n            </Typography>\r\n            <Typography>\r\n              secured with pin:{\" \"}\r\n              <span style={{ color: color }}>\r\n                <FontAwesomeIcon icon={icon} />\r\n              </span>\r\n            </Typography>\r\n\r\n            <Typography>\r\n              Total Journals: <span>{journals?.length}</span>\r\n            </Typography>\r\n          </Grid>\r\n        </Grid>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default connect(mapStateToProps)(Summary);\r\n","import React from \"react\";\r\nimport firebase from \"../component/fire\";\r\nimport { StyledFirebaseAuth } from \"react-firebaseui\";\r\n\r\nconst uiConfig = {\r\n  //signInFlow: \"popup\",\r\n  //signInSuccessUrl: \"/account\",\r\n  callbacks: {\r\n    signInSuccess: () => {\r\n      return false;\r\n    },\r\n  },\r\n  signInOptions: [\r\n    firebase.auth.GoogleAuthProvider.PROVIDER_ID,\r\n    firebase.auth.FacebookAuthProvider.PROVIDER_ID,\r\n    firebase.auth.EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD,\r\n  ],\r\n};\r\n\r\nexport default function FirebaseUi(props) {\r\n  return (\r\n    <>\r\n      <StyledFirebaseAuth uiConfig={uiConfig} firebaseAuth={firebase.auth()} />\r\n    </>\r\n  );\r\n}\r\n","import $ from \"jquery\";\r\nimport { functions } from \"../component/fire\";\r\nimport { setMsg } from \"../component/redux\";\r\nimport db from \"../component/dbaccess\";\r\n\r\nfunction loginAsync(loginData) {\r\n  return (dispatch, getState, { getFirebase }) => {\r\n    dispatch(loading(true));\r\n    dispatch(setMsg({ msg: \"\" }));\r\n    const firebase = getFirebase();\r\n    const { email, password } = loginData;\r\n    firebase\r\n      .auth()\r\n      .signInWithEmailAndPassword(email, password)\r\n      .then(({ user }) => {\r\n        //setState({ status: false });\r\n        //console.log(user);\r\n        dispatch(finish(\"login successful!\"));\r\n        $(\"#snackBarTrigger\").trigger(\"click\");\r\n      })\r\n      .catch(function (error) {\r\n        // Handle Errors here.\r\n\r\n        var errorCode = error.code;\r\n        var errorMessage = error.message;\r\n        console.log({ errorCode, errorMessage });\r\n        let err;\r\n        if (\r\n          error.code === \"auth/user-not-found\" ||\r\n          error.code === \"auth/wrong-password\"\r\n        ) {\r\n          err = \"Invalid username or password!\";\r\n        } else {\r\n          err = \"Network error!\";\r\n        }\r\n        dispatch(finish(err));\r\n        $(\"#snackBarTrigger\").trigger(\"click\");\r\n\r\n        // ...\r\n      });\r\n  };\r\n}\r\n\r\nfunction logoutAsync() {\r\n  return (dispatch, getState, { getFirebase }) => {\r\n    const firebase = getFirebase();\r\n    db.pin.clear();\r\n    firebase.auth().signOut();\r\n  };\r\n}\r\n\r\nfunction signupAsync(signupData) {\r\n  return async (dispatch, getState, { getFirebase, getFirestore }) => {\r\n    dispatch(loading(true));\r\n    dispatch(setMsg({ msg: \"\" }));\r\n    const firebase = getFirebase();\r\n    const firestore = getFirestore();\r\n    let msg;\r\n    try {\r\n      const user = await firebase\r\n        .auth()\r\n        .createUserWithEmailAndPassword(signupData.email, signupData.password)\r\n        .then(({ user }) => {\r\n          //console.log(user);\r\n          msg = \"Account successfully created. Proceed...!\";\r\n          dispatch(setMsg({ msg }));\r\n          $(\"#snackBarTrigger\").trigger(\"click\");\r\n          return user;\r\n        });\r\n      //console.log(user);\r\n\r\n      await firestore.collection(\"users\").doc(user.uid).set(\r\n        {\r\n          id: user.uid,\r\n          firstName: signupData.firstName,\r\n          lastName: signupData.lastName,\r\n        },\r\n        { merge: true }\r\n      );\r\n\r\n      const db = firestore\r\n        .collection(\"users\")\r\n        .doc(user.uid)\r\n        .collection(\"journals\");\r\n\r\n      await db.doc(\"Notes\").set({\r\n        journalId: \"Notes\",\r\n        journalName: \"Notes...\",\r\n        journalDescription: \"Say goodbye to lost notes!\",\r\n      });\r\n      await db.doc(\"Diary\").set({\r\n        journalId: \"Diary\",\r\n        journalName: \"Diary...\",\r\n        journalDescription:\r\n          \"Your companion everywhere with utmost convenience!\",\r\n      });\r\n      console.log(\"journals created!\");\r\n      msg = \"account created!\";\r\n      dispatch(finish(msg));\r\n    } catch (error) {\r\n      // Handle Errors here.\r\n      var errorCode = error.code;\r\n      var errorMessage = error.message;\r\n      console.log({ errorCode, errorMessage });\r\n\r\n      const msg = \"Network error! Please try again!\";\r\n      dispatch(finish(msg));\r\n      $(\"#snackBarTrigger\").trigger(\"click\");\r\n    }\r\n  };\r\n}\r\n\r\nfunction checkEmailAsync(emailData) {\r\n  return (dispatch, getState) => {\r\n    dispatch(loading(true));\r\n    dispatch(setMsg({ msg: \"\" }));\r\n\r\n    const email = emailData.email;\r\n\r\n    const checkEmail = functions.httpsCallable(\"checkEmail\");\r\n    checkEmail(emailData)\r\n      .then((res) => {\r\n        let msg;\r\n        if (res.data.value === true) {\r\n          msg = \"This email is already registered\";\r\n        }\r\n        //console.log(res);\r\n        dispatch(emailChecked(msg, email));\r\n        $(\"#snackBarTrigger\").trigger(\"click\");\r\n      })\r\n      .catch((err) => {\r\n        let msg;\r\n        if (err.code === \"not-found\") {\r\n          msg = err.message ? err.message : \"Email available\";\r\n          dispatch(next());\r\n        } else {\r\n          msg = \"Please ensure you have an internet connection!\";\r\n        }\r\n\r\n        dispatch(emailChecked(msg, email));\r\n        $(\"#snackBarTrigger\").trigger(\"click\");\r\n        console.log({ err });\r\n      });\r\n  };\r\n}\r\n\r\nfunction finish(msg) {\r\n  return { type: \"FINISH_LOADING\", loading: false, msg };\r\n}\r\n\r\nfunction loading(status) {\r\n  return { type: \"LOADING\", loading: status };\r\n}\r\n\r\nfunction next() {\r\n  return { type: \"NEXT\" };\r\n}\r\n\r\nfunction prev() {\r\n  return { type: \"PREV\" };\r\n}\r\n\r\nfunction emailChecked(msg, email) {\r\n  return { type: \"CHECK_EMAIL\", msg, email };\r\n}\r\n\r\nexport { loginAsync, logoutAsync, signupAsync, checkEmailAsync, next, prev };\r\n","import React from \"react\";\r\nimport {\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogContentText,\r\n  DialogTitle,\r\n  Button,\r\n} from \"@material-ui/core\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nfunction CustomDialogueComponent(props) {\r\n  //console.log(props);\r\n  const { description, open, handleClose, confirm } = props;\r\n\r\n  return (\r\n    <div>\r\n      {props.children}\r\n\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleClose}\r\n        aria-labelledby=\"alert-dialog-title\"\r\n        aria-describedby=\"alert-dialog-description\"\r\n      >\r\n        <DialogTitle id=\"alert-dialog-title\">Comfirm action!</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText id=\"alert-dialog-description\">\r\n            {description}\r\n          </DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"primary\" autoFocus>\r\n            cancel {\"    \"}\r\n            <FontAwesomeIcon icon=\"times\" />\r\n          </Button>\r\n          <Button onClick={confirm} color=\"secondary\">\r\n            confirm {\"    \"}\r\n            <FontAwesomeIcon icon=\"check\" />\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nCustomDialogueComponent.propTypes = {\r\n  open: PropTypes.bool.isRequired,\r\n  confirm: PropTypes.func.isRequired,\r\n  handleClose: PropTypes.func.isRequired,\r\n  description: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default CustomDialogueComponent;\r\n","import React from \"react\";\r\nimport CustomDialogueComponent from \"./customDialogueComponent\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nexport default function CustomDialogue(props) {\r\n  const [open, setOpen] = React.useState(false);\r\n  const { description } = props;\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const confirm = () => {\r\n    handleClose();\r\n    props.confirm();\r\n  };\r\n  //console.log(props);\r\n  return (\r\n    <>\r\n      <CustomDialogueComponent\r\n        open={open}\r\n        confirm={confirm}\r\n        handleClose={handleClose}\r\n        description={description}\r\n      >\r\n        {props.render(handleClickOpen)}\r\n      </CustomDialogueComponent>\r\n    </>\r\n  );\r\n}\r\n\r\nCustomDialogue.propTypes = {\r\n  confirm: PropTypes.func.isRequired,\r\n  title: PropTypes.string.isRequired,\r\n  description: PropTypes.string.isRequired,\r\n};\r\n","import { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles((theme) => {\r\n  // console.log(theme);\r\n  return {\r\n    flex: {\r\n      display: \"flex\",\r\n      //flexDirection: \"column\",\r\n      flexWrap: \"wrap\",\r\n      flexGrow: 1,\r\n    },\r\n    vertCenter: {\r\n      alignContent: \"center\",\r\n    },\r\n    horCenter: {\r\n      justifyContent: \"center\",\r\n    },\r\n    root: {\r\n      justifyContent: \"center\",\r\n      alignContent: \"center\",\r\n      alignItems: \"center\",\r\n    },\r\n    paper: (props) => {\r\n      //console.log(props);\r\n      return {\r\n        flexDirection: \"column\",\r\n        padding: theme.spacing(2),\r\n        margin: theme.spacing(2),\r\n        textAlign: \"center\",\r\n        backgroundColor: props.color,\r\n        //background: `linear-gradient(45deg, ${theme.palette.primary.main} 40%, ${props.color} 60%)`,\r\n      };\r\n    },\r\n\r\n    card: {\r\n      padding: theme.spacing(1),\r\n      margin: theme.spacing(2),\r\n      backgroundColor: theme.palette.primary.main,\r\n      color: theme.palette.primary.contrastText,\r\n    },\r\n    cardAuth: {\r\n      maxWidth: 500,\r\n    },\r\n    fab: {\r\n      position: \"fixed\",\r\n      right: \" 5%\",\r\n      bottom: \"8%\",\r\n    },\r\n    readFab: {\r\n      fontSize: \"1.5rem\",\r\n    },\r\n    cardWidth: {\r\n      maxWidth: 250,\r\n      height: 300,\r\n    },\r\n    cardActions: {\r\n      alignSelf: \"flex-end\",\r\n    },\r\n    margin: {\r\n      margin: theme.spacing(1),\r\n    },\r\n    error: {\r\n      backgroundColor: theme.palette.error.main,\r\n    },\r\n    success: {\r\n      backgroundColor: theme.palette.success.main,\r\n    },\r\n    mainIcon: {\r\n      fontSize: \"10rem\",\r\n      color: theme.palette.primary.main,\r\n    },\r\n    button: (props) => ({\r\n      background: `linear-gradient(45deg, ${props.color} 30%, ${theme.palette.secondary.main} 90% )`,\r\n    }),\r\n    menuButton: { marginRight: theme.spacing(2) },\r\n    title: { flexGrow: 1 },\r\n    list: {\r\n      width: 250,\r\n    },\r\n    fullList: {\r\n      width: \"auto\",\r\n    },\r\n    //list\r\n    listRoot: {\r\n      width: \"100%\",\r\n      maxWidth: \"100vw\",\r\n      backgroundColor: theme.palette.background.paper,\r\n      position: \"relative\",\r\n      overflow: \"auto\",\r\n    },\r\n    listSection: {\r\n      backgroundColor: \"inherit\",\r\n    },\r\n    listUl: {\r\n      backgroundColor: \"inherit\",\r\n      padding: 0,\r\n    },\r\n    listInline: {\r\n      display: \"inline\",\r\n    },\r\n    listItem: {\r\n      cursor: \"pointer\",\r\n    },\r\n  };\r\n});\r\n\r\n/*const theme = createMuiTheme({\r\n  palette: {\r\n    primary: {\r\n      main: \"#17a2b8\",\r\n    },\r\n    secondary: {\r\n      main: \"#ffc107\",\r\n    },\r\n  },\r\n  props: {\r\n    MuiButton: {\r\n      variant: \"contained\",\r\n      color: \"secondary\",\r\n    },\r\n  },\r\n});*/\r\n\r\nexport { useStyles };\r\n","import React, { useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport { logoutAsync } from \"./authRedux\";\r\nimport CustomDialogue from \"../component/customDialogue\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Button } from \"@material-ui/core\";\r\nimport { useStyles } from \"../theme/theme\";\r\n\r\nconst mapStateToProps = (state) => state;\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  logoutAsync: () => dispatch(logoutAsync()),\r\n});\r\n\r\nfunction Logout(props) {\r\n  const history = useHistory();\r\n  const classes = useStyles();\r\n\r\n  useEffect(() => {\r\n    const { uid } = props.firebase.auth;\r\n    if (!uid) history.push(\"/account\");\r\n  }, [props.firebase.auth, history]);\r\n\r\n  const onLogout = () => {\r\n    props.logoutAsync();\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <CustomDialogue\r\n        title=\"Sign-out\"\r\n        description=\" Are you sure you want to logout? Please note that this action\r\n              cannot be undone. Your secret pin will also be deleted! Continue!\r\n            \"\r\n        confirm={onLogout}\r\n        render={(handleClickOpen) => (\r\n          <Button className={classes.margin} onClick={handleClickOpen}>\r\n            sign out\r\n          </Button>\r\n        )}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nLogout.propTypes = {\r\n  logoutAsync: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Logout);\r\n","import React from \"react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport Summary from \"./summary\";\r\nimport FirebaseUI from \"./firebaseUI\";\r\nimport Logout from \"./logout\";\r\nimport { Typography } from \"@material-ui/core\";\r\n\r\nexport default function AccountComponent(props) {\r\n  const { classes, firebase } = props;\r\n  const { auth, profile } = firebase;\r\n  const { uid, email, displayName } = auth;\r\n  const { firstName, lastName } = profile;\r\n\r\n  return (\r\n    <>\r\n      <div className=\"container-fluid \">\r\n        <div className=\"row mx-auto  text-center\">\r\n          <div\r\n            className={`${classes.mainIcon}  col-12 mx-auto my-0  text-center`}\r\n          >\r\n            <FontAwesomeIcon icon=\"user-circle\" />\r\n          </div>\r\n          <div className=\"col-12 mx-auto my-1 text-center\">\r\n            <span>\r\n              {uid ? (\r\n                <>\r\n                  <Typography variant=\"h3\">\r\n                    {displayName || firstName + \"  \" + lastName}\r\n                  </Typography>\r\n                  <Typography variant=\"h5\">{email}</Typography>\r\n\r\n                  <Summary />\r\n                  <Logout />\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <Typography variant=\"body1\" component=\"p\">\r\n                    Please Sign in below to continue\r\n                  </Typography>\r\n\r\n                  <FirebaseUI />\r\n                </>\r\n              )}\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { isLogged } from \"../component/redux\";\r\nimport { connect } from \"react-redux\";\r\nimport AccountComponent from \"./accountComponent\";\r\nimport PropTypes from \"prop-types\";\r\nimport { useStyles } from \"../theme/theme\";\r\n\r\nconst mapStateToProps = (state) => {\r\n  const { firebase } = state;\r\n  //console.log(state);\r\n  return { firebase };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  isLogged: (data) => dispatch(isLogged(data)),\r\n});\r\n\r\nfunction Account(props) {\r\n  const classes = useStyles();\r\n  const body = [\r\n    {\r\n      name: \"logout\",\r\n      description: \"Do a clean up\",\r\n      path: \"/logout\",\r\n    },\r\n  ];\r\n\r\n  /*state = {\r\n    loggedIn: [],\r\n    loggedOut: [],\r\n    \r\n  };*/\r\n\r\n  //console.log(props);\r\n\r\n  const { firebase } = props;\r\n\r\n  return (\r\n    <>\r\n      <AccountComponent classes={classes} firebase={firebase} cards={body} />\r\n    </>\r\n  );\r\n}\r\n\r\nAccount.propTypes = {\r\n  firebase: PropTypes.object,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Account);\r\n","import React from \"react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { Paper, Typography, Grid } from \"@material-ui/core\";\r\n\r\nfunction SecurityComponent(props) {\r\n  const { storageKey, isSetCards, notSetCards, classes } = props;\r\n\r\n  return (\r\n    <>\r\n      <Grid container justify=\"center\" alignContent=\"center\">\r\n        <Grid\r\n          item\r\n          xs={12}\r\n          className={`${classes.mainIcon} ${classes.margin} `}\r\n          justify=\"center\"\r\n          alignContent=\"center\"\r\n          container\r\n        >\r\n          <FontAwesomeIcon icon=\"user-shield\" />\r\n        </Grid>\r\n        <Grid item xs={12} sm={10}>\r\n          <Paper className={`${classes.card} `}>\r\n            {storageKey ? (\r\n              <div className=\"text-center mx-auto\">\r\n                <Typography variant=\"h6\" component=\"h6\">\r\n                  Your journals are safeguarded with a pin!\r\n                </Typography>\r\n\r\n                {isSetCards}\r\n              </div>\r\n            ) : (\r\n              <div className=\"text-center mx-auto\">\r\n                <Typography variant=\"h6\" component=\"h6\">\r\n                  Set a pin to safeguard your journals!\r\n                </Typography>\r\n\r\n                {notSetCards}\r\n              </div>\r\n            )}\r\n          </Paper>\r\n        </Grid>\r\n      </Grid>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default SecurityComponent;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Button, Typography, Grid, Divider } from \"@material-ui/core\";\r\nimport { useStyles } from \"../theme/theme\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nexport default function Cards(props) {\r\n  const classes = useStyles();\r\n\r\n  const { name, description, path } = props.card;\r\n  return (\r\n    <Grid container justify=\"center\" alignContent=\"center\">\r\n      <Grid item xs={12} sm={10} md={8} className={classes.margin}>\r\n        {\" \"}\r\n        <Typography variant=\"h4\">{name}</Typography>\r\n        <Typography variant=\"body1\">{description}</Typography>\r\n        <Button component={Link} to={path} className={classes.margin}>\r\n          {name}\r\n        </Button>\r\n        <Divider />\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n\r\nCards.propTypes = {\r\n  card: PropTypes.object.isRequired,\r\n};\r\n","import React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport db from \"../component/dbaccess\";\r\nimport { checkKey } from \"../component/redux\";\r\nimport SecurityComponent from \"./securityComponent\";\r\nimport Cards from \"./cards\";\r\nimport { useStyles } from \"../theme/theme\";\r\n\r\nconst mapStateToProps = (state) => {\r\n  return state;\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  checkKey: (data) => dispatch(checkKey(data)),\r\n});\r\n\r\nconst pins = [\r\n  {\r\n    name: \"set pin\",\r\n    description: \"Create a pin to safeguard your entries\",\r\n    path: \"/setPin\",\r\n  },\r\n  {\r\n    name: \"change pin\",\r\n    description: \"change your pin\",\r\n    path: \"/changePin\",\r\n  },\r\n  {\r\n    name: \"discard pin\",\r\n    description:\r\n      \"Discard your pin! Please note that your journals will be viewed by anybody\",\r\n    path: \"/discardPin\",\r\n  },\r\n  {\r\n    name: \"Forgot pin\",\r\n    description:\r\n      \"Forgot your pin! Please note that you will have to login again!\",\r\n    path: \"/account\",\r\n  },\r\n];\r\n\r\nfunction Security(props) {\r\n  const classes = useStyles();\r\n\r\n  const { checkKey, custom } = props;\r\n\r\n  useEffect(() => {\r\n    db.pin.count().then((val) => {\r\n      if (val === 0) {\r\n        checkKey({ storageKey: false });\r\n      } else {\r\n        checkKey({ storageKey: true });\r\n      }\r\n    });\r\n  }, [checkKey]);\r\n\r\n  const { storageKey } = custom;\r\n  //console.log(props);\r\n  const isSet = pins.filter((card) => card.name !== \"set pin\");\r\n  const notSet = pins.filter((card) => card.name === \"set pin\");\r\n\r\n  const isSetCards = isSet.map((pin, index) => {\r\n    return <Cards key={index} card={pin} />;\r\n  });\r\n  const notSetCards = notSet.map((pin, index) => {\r\n    return <Cards key={index} card={pin} />;\r\n  });\r\n\r\n  return (\r\n    <>\r\n      <SecurityComponent\r\n        storageKey={storageKey}\r\n        isSetCards={isSetCards}\r\n        notSetCards={notSetCards}\r\n        classes={classes}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Security);\r\n","import db from \"./dbaccess\";\r\n\r\nexport default async function Fetcher(data, method) {\r\n  console.log(data);\r\n  const response = await realFetcher(data, method);\r\n  console.log(response);\r\n  if (response.value === \"expired\") {\r\n    const refreshResponse = await refreshToken();\r\n    console.log(refreshResponse);\r\n\r\n    const fetch2 = await db.token.clear().then(() => {\r\n      return db.token.add(refreshResponse).then(() => {\r\n        if (refreshResponse.comfy !== \"\") {\r\n          return realFetcher(data, method);\r\n        } else {\r\n          return { value: false };\r\n        }\r\n      });\r\n    });\r\n    console.log(fetch2);\r\n    return fetch2;\r\n  } else {\r\n    console.log(response);\r\n    return response;\r\n  }\r\n}\r\n\r\nfunction refreshToken() {\r\n  return fetch(`http://localhost:5000/api/stylus`, {\r\n    method: \"POST\",\r\n    headers: new Headers({\r\n      \"content-type\": \"application/json\",\r\n    }),\r\n    credentials: \"include\",\r\n  }).then((res) => res.json());\r\n}\r\n\r\nfunction realFetcher(data, method) {\r\n  return db.token.toArray().then((val) => {\r\n    console.log(val);\r\n    let complex = {};\r\n    if (\r\n      data.submit === \"login\" ||\r\n      data.submit === \"signup\" ||\r\n      data.submit === \"checkEmail\"\r\n    ) {\r\n      complex = {\r\n        headers: new Headers({\r\n          \"content-type\": \"application/json\",\r\n        }),\r\n        credentials: \"include\",\r\n      };\r\n    } else {\r\n      complex = {\r\n        headers: new Headers({\r\n          \"content-type\": \"application/json\",\r\n          Authorization: \"Bearer \" + val[0].comfy,\r\n        }),\r\n      };\r\n    }\r\n\r\n    return fetch(`http://localhost:5000/api/${data.submit}`, {\r\n      method,\r\n      ...complex,\r\n      body: JSON.stringify(data),\r\n    }).then((res) => {\r\n      const ves = res.clone();\r\n      res.text().then((val) => {\r\n        console.log(val);\r\n      });\r\n      return ves.json();\r\n    });\r\n  });\r\n}\r\n","import React from \"react\";\r\nimport * as moment from \"moment\";\r\nimport { setActiveJournal, isLogged } from \"../component/redux\";\r\nimport { connect } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport {\r\n  Card,\r\n  CardHeader,\r\n  CardContent,\r\n  CardActions,\r\n  Typography,\r\n  Button,\r\n  ButtonGroup,\r\n} from \"@material-ui/core\";\r\nimport { useStyles } from \"../theme/theme\";\r\n\r\nconst mapDispatchToJournalDisplay = (dispatch) => ({\r\n  setActiveJournal: (journal) => dispatch(setActiveJournal(journal)),\r\n  isLogged: (data) => dispatch(isLogged(data)),\r\n});\r\n\r\nfunction JournalDisplayConstruct(props) {\r\n  const classes = useStyles();\r\n  const journal = props.journal;\r\n  const { journalName, journalDescription, createdAt, journalId } = journal;\r\n\r\n  const date = moment(createdAt).format(\"LL\");\r\n  const time = moment(createdAt).format(\"LTS\");\r\n\r\n  return (\r\n    <>\r\n      <Card\r\n        className={`${classes.card} ${classes.cardWidth} ${classes.flex} mx-auto`}\r\n      >\r\n        <CardHeader title={journalName} subheader={journalDescription} />\r\n        <CardContent className={classes.flex}>\r\n          <Typography variant=\"body2\">\r\n            {date || \"\"}, {\"  \"} {time || \"\"}\r\n          </Typography>\r\n          <CardActions className={classes.cardActions}>\r\n            <ButtonGroup aria-label=\"card action buttons\">\r\n              <Button\r\n                endIcon={<FontAwesomeIcon icon=\"folder-open\" />}\r\n                component={Link}\r\n                to={\"/onlineList/\" + journalId}\r\n              >\r\n                {\" \"}\r\n                Open {\"  \"}\r\n              </Button>\r\n              <Button\r\n                onClick={props.onEditClick}\r\n                className=\"btn btn-outline-warning\"\r\n              >\r\n                <FontAwesomeIcon icon=\"edit\" />\r\n              </Button>\r\n            </ButtonGroup>\r\n          </CardActions>\r\n        </CardContent>\r\n      </Card>\r\n    </>\r\n  );\r\n}\r\n\r\nconst JournalDisplay = connect(\r\n  null,\r\n  mapDispatchToJournalDisplay\r\n)(JournalDisplayConstruct);\r\n\r\nexport default JournalDisplay;\r\n","import React from \"react\";\r\n\r\nconst Spinner = props => {\r\n  if (props.status) {\r\n    return (\r\n      <>\r\n        <span role=\"status\" className=\"spinner-border spinner-border-sm\"></span>\r\n      </>\r\n    );\r\n  } else {\r\n    return \"\";\r\n  }\r\n};\r\n\r\nexport default Spinner;\r\n","import React from \"react\";\r\nimport Spinner from \"../component/spinner\";\r\nimport PropTypes from \"prop-types\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport {\r\n  Button,\r\n  ButtonGroup,\r\n  Card,\r\n  CardContent,\r\n  CardActions,\r\n  CardHeader,\r\n  TextField,\r\n  Box,\r\n} from \"@material-ui/core\";\r\nimport { useStyles } from \"../theme/theme\";\r\n\r\nfunction JournalFormComponent(props) {\r\n  const classes = useStyles();\r\n  const {\r\n    register,\r\n    errors,\r\n    status,\r\n    btnText,\r\n    journalName,\r\n    journalDescription,\r\n    onFormClose,\r\n  } = props;\r\n  //console.log(props);\r\n\r\n  return (\r\n    <Card className={`${classes.card} mx-auto`}>\r\n      <CardHeader title={btnText} />\r\n      <CardContent className={``}>\r\n        <>\r\n          <Box\r\n            display=\"flex\"\r\n            flexDirection=\"column\"\r\n            justifyContent=\"center\"\r\n            marginBottom={2}\r\n            p={1}\r\n          >\r\n            <TextField\r\n              label=\"journalName\"\r\n              placeholder=\"journalName\"\r\n              name=\"journalName\"\r\n              type=\"text\"\r\n              inputRef={register({\r\n                required: {\r\n                  value: true,\r\n                  message: \"please provide a journal name\",\r\n                },\r\n                pattern: {\r\n                  value: /^[a-z0-9_., ]+$/i,\r\n                  message: \"only numbers and characters allowed\",\r\n                },\r\n                maxLength: { value: 20, message: \"limited to 20 characters\" },\r\n              })}\r\n              error={!!errors.journalName?.message}\r\n              helperText={errors.journalName?.message}\r\n              defaultValue={journalName}\r\n              variant=\"outlined\"\r\n            />\r\n          </Box>\r\n\r\n          <Box\r\n            display=\"flex\"\r\n            flexDirection=\"column\"\r\n            justifyContent=\"center\"\r\n            p={1}\r\n            marginBottom={2}\r\n          >\r\n            <TextField\r\n              label=\"journalDescription\"\r\n              placeholder=\"journalDescription\"\r\n              name=\"journalDescription\"\r\n              type=\"text\"\r\n              inputRef={register({\r\n                required: {\r\n                  value: true,\r\n                  message: \"please provide a journal description\",\r\n                },\r\n                pattern: {\r\n                  value: /^[a-z0-9_., ]+$/i,\r\n                  message: \"only numbers and characters allowed\",\r\n                },\r\n                maxLength: { value: 50, message: \"limited to 50 characters\" },\r\n              })}\r\n              error={!!errors.journalDescription?.message}\r\n              defaultValue={journalDescription}\r\n              helperText={errors.journalDescription?.message}\r\n              variant=\"outlined\"\r\n            />\r\n          </Box>\r\n        </>\r\n        <CardActions>\r\n          <ButtonGroup aria-label=\"journalform action buttons\">\r\n            <Button\r\n              component=\"button\"\r\n              type=\"submit\"\r\n              startIcon={<Spinner status={status} />}\r\n              endIcon={<FontAwesomeIcon icon=\"save\" />}\r\n            >\r\n              {btnText}\r\n            </Button>\r\n            <Button\r\n              endIcon={<FontAwesomeIcon icon=\"times\" />}\r\n              onClick={onFormClose}\r\n            >\r\n              cancel\r\n            </Button>\r\n          </ButtonGroup>\r\n        </CardActions>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n\r\nJournalFormComponent.propTypes = {\r\n  register: PropTypes.func.isRequired,\r\n  errors: PropTypes.object.isRequired,\r\n  btnText: PropTypes.string.isRequired,\r\n  journalName: PropTypes.string.isRequired,\r\n  journalDescription: PropTypes.string.isRequired,\r\n  onFormClose: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default JournalFormComponent;\r\n","import React from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\n\r\nfunction FormHOC(WrappedComponent) {\r\n  return function HOC(props) {\r\n    //console.log(props);\r\n    const {\r\n      register,\r\n      errors,\r\n      handleSubmit,\r\n      watch,\r\n      setValue,\r\n      getValues,\r\n    } = useForm({\r\n      mode: \"onChange\",\r\n    });\r\n    const onFormSubmit = (data, e) => {\r\n      e.target.reset();\r\n      props.onFormSubmit(data);\r\n    };\r\n\r\n    return (\r\n      <form onSubmit={handleSubmit(onFormSubmit)}>\r\n        <WrappedComponent\r\n          {...props}\r\n          register={register}\r\n          setValue={setValue}\r\n          watch={watch}\r\n          errors={errors}\r\n          getValues={getValues}\r\n        />\r\n      </form>\r\n    );\r\n  };\r\n}\r\n\r\nexport default FormHOC;\r\n","import React from \"react\";\r\nimport JournalFormComponent from \"./journalFormComponent\";\r\nimport PropTypes from \"prop-types\";\r\nimport FormHOC from \"../component/formHOC\";\r\n\r\nfunction JournalForm(props) {\r\n  //console.log(props);\r\n  const {\r\n    register,\r\n    errors,\r\n    onFormClose,\r\n    btnText,\r\n    journalName,\r\n    journalDescription,\r\n  } = props;\r\n  return (\r\n    <>\r\n      <JournalFormComponent\r\n        register={register}\r\n        errors={errors}\r\n        onFormClose={onFormClose}\r\n        btnText={btnText}\r\n        journalName={journalName}\r\n        journalDescription={journalDescription}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nJournalForm.propTypes = {\r\n  onFormSubmit: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default FormHOC(JournalForm);\r\n","import $ from \"jquery\";\r\n\r\nfunction addEntry(entryData) {\r\n  return (dispatch, getState, { getFirestore }) => {\r\n    //dispatch(loading());\r\n    const firestore = getFirestore();\r\n    const userId = getState().firebase.auth.uid;\r\n    const { journalId, entryId } = entryData;\r\n    //console.log({ userId, entryId, journalId, entryData });\r\n\r\n    firestore\r\n      .collection(\"users\")\r\n      .doc(userId)\r\n      .collection(\"journals\")\r\n      .doc(journalId)\r\n      .collection(\"entries\")\r\n      .doc(entryId)\r\n      .set(entryData, { merge: true })\r\n      .then(() => {\r\n        dispatch(finish(\"data saved\"));\r\n        $(\"#snackBarTrigger\").trigger(\"click\");\r\n      })\r\n      .catch((err) => {\r\n        dispatch(finish(\"error saving\"));\r\n        $(\"#snackBarTrigger\").trigger(\"click\");\r\n        console.log(err);\r\n      });\r\n  };\r\n}\r\n\r\nfunction deleteEntry(entryData) {\r\n  return (dispatch, getState, { getFirestore }) => {\r\n    // dispatch(loading());\r\n    const { entryId, journalId } = entryData;\r\n    const userId = getState().firebase.auth.uid;\r\n    //console.log({ userId, entryId, journalId, entryData });\r\n    const firestore = getFirestore();\r\n    firestore\r\n      .collection(\"users\")\r\n      .doc(userId)\r\n      .collection(\"journals\")\r\n      .doc(journalId)\r\n      .collection(\"entries\")\r\n      .doc(entryId)\r\n      .delete()\r\n      .then((val) => {\r\n        //console.log(val);\r\n        dispatch(finish(\"deleted!\"));\r\n        $(\"#snackBarTrigger\").trigger(\"click\");\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        dispatch(finish(\"deletion failed! Please try again later\"));\r\n        $(\"#snackBarTrigger\").trigger(\"click\");\r\n      });\r\n  };\r\n}\r\n\r\nfunction updateEntry(entryData) {\r\n  return (dispatch, getState, { getFirestore }) => {\r\n    //dispatch(loading());\r\n    const { entryId, journalId } = entryData;\r\n    const userId = getState().firebase.auth.uid;\r\n    //console.log({ userId, entryId, journalId });\r\n    const firestore = getFirestore();\r\n    firestore\r\n      .collection(\"users\")\r\n      .doc(userId)\r\n      .collection(\"journals\")\r\n      .doc(journalId)\r\n      .collection(\"entries\")\r\n      .doc(entryId)\r\n      .update(entryData)\r\n      .then((val) => {\r\n        //console.log(val);\r\n        dispatch(finish(\"updated!\"));\r\n        $(\"#snackBarTrigger\").trigger(\"click\");\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        dispatch(finish(\"update failed! Please try again later\"));\r\n        $(\"#snackBarTrigger\").trigger(\"click\");\r\n      });\r\n  };\r\n}\r\n\r\nfunction updateJournal(journalData) {\r\n  return (dispatch, getState, { getFirestore }) => {\r\n    //dispatch(loading());\r\n    const { journalId } = journalData;\r\n    const userId = getState().firebase.auth.uid;\r\n    //console.log({ userId, journalId, journalData });\r\n    const firestore = getFirestore();\r\n    firestore\r\n      .collection(\"users\")\r\n      .doc(userId)\r\n      .collection(\"journals\")\r\n      .doc(journalId)\r\n      .update(journalData)\r\n      .then((val) => {\r\n        //console.log(val);\r\n        dispatch(finish(\"updated!\"));\r\n        $(\"#snackBarTrigger\").trigger(\"click\");\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        dispatch(finish(\"update failed! Please try again later\"));\r\n        $(\"#snackBarTrigger\").trigger(\"click\");\r\n      });\r\n  };\r\n}\r\n\r\nfunction newJournal(journalData) {\r\n  return (dispatch, getState, { getFirestore }) => {\r\n    //dispatch(loading());\r\n    const { journalId } = journalData;\r\n    const userId = getState().firebase.auth.uid;\r\n    //console.log({ userId, journalId, journalData });\r\n    const firestore = getFirestore();\r\n    firestore\r\n      .collection(\"users\")\r\n      .doc(userId)\r\n      .collection(\"journals\")\r\n      .doc(journalId)\r\n      .set(journalData)\r\n      .then((val) => {\r\n        //console.log(val);\r\n        dispatch(finish(\"updated!\"));\r\n        $(\"#snackBarTrigger\").trigger(\"click\");\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        dispatch(finish(\"update failed! Please try again later\"));\r\n        $(\"#snackBarTrigger\").trigger(\"click\");\r\n      });\r\n  };\r\n}\r\n\r\nfunction finish(msg) {\r\n  return { type: \"FINISH_LOADING\", loading: false, msg };\r\n}\r\n\r\nfunction loading() {\r\n  return { type: \"LOADING\", loading: true };\r\n}\r\n\r\nexport {\r\n  addEntry,\r\n  updateEntry,\r\n  deleteEntry,\r\n  loading,\r\n  finish,\r\n  updateJournal,\r\n  newJournal,\r\n};\r\n","import React, { Component } from \"react\";\r\nimport JournalForm from \"./journalForm\";\r\nimport { connect } from \"react-redux\";\r\nimport { setMsg } from \"../component/redux\";\r\nimport { updateJournal } from \"../journalStrings/firestoreRedux\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst mapStateToProps = (state) => {\r\n  return state;\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  setMsg: (msg) => dispatch(setMsg(msg)),\r\n  updateJournal: (data) => dispatch(updateJournal(data)),\r\n});\r\n\r\nclass UpdateJournal extends Component {\r\n  onJournalUpdate = (formData) => {\r\n    const updateData = {\r\n      ...this.props.journal,\r\n      journalName: formData.journalName,\r\n      journalDescription: formData.journalDescription,\r\n    };\r\n    //console.log(formData);\r\n\r\n    this.props.updateJournal(updateData);\r\n    this.props.onFormClose();\r\n    //console.log(updateData);\r\n  };\r\n\r\n  render() {\r\n    const { journalName, journalDescription } = this.props.journal;\r\n    return (\r\n      <JournalForm\r\n        journalName={journalName}\r\n        journalDescription={journalDescription}\r\n        onFormSubmit={this.onJournalUpdate}\r\n        onFormClose={this.props.onFormClose}\r\n        btnText=\"Update\"\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nUpdateJournal.propTypes = {\r\n  updateJournal: PropTypes.func.isRequired,\r\n  onFormClose: PropTypes.func.isRequired,\r\n  journal: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(UpdateJournal);\r\n","import React from \"react\";\r\nimport JournalDisplay from \"./journalDisplay\";\r\nimport UpdateJournal from \"./updateJournal\";\r\n\r\nfunction EditableComponent(props) {\r\n  const { journal, editFormOpen } = props;\r\n  const onEditClick = () => {\r\n    props.openForm();\r\n  };\r\n\r\n  const onFormClose = () => {\r\n    props.closeForm();\r\n  };\r\n\r\n  const onTrashClick = () => {\r\n    props.onJournalDelete(journal.journalid);\r\n  };\r\n\r\n  if (editFormOpen) {\r\n    return (\r\n      <div className=\"mx-auto\">\r\n        <UpdateJournal journal={journal} onFormClose={onFormClose} />\r\n      </div>\r\n    );\r\n  } else {\r\n    return (\r\n      <JournalDisplay\r\n        journal={journal}\r\n        onEditClick={onEditClick}\r\n        onTrashClick={onTrashClick}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default EditableComponent;\r\n","import React, { Component } from \"react\";\r\nimport Fetcher from \"../component/server\";\r\nimport EditableComponent from \"./editableComponent\";\r\nimport $ from \"jquery\";\r\nimport { connect } from \"react-redux\";\r\nimport { setMsg } from \"../component/redux\";\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  setMsg: (msg) => dispatch(setMsg(msg)),\r\n});\r\n\r\nclass EditableContainer extends Component {\r\n  state = {\r\n    editFormOpen: false,\r\n    status: false,\r\n  };\r\n\r\n  onJournalDelete = (id) => {\r\n    this.setState({ status: true });\r\n    Fetcher({ journalid: id, submit: \"DELETEJOURNAL\" }, \"DELETE\")\r\n      .then((val) => {\r\n        if (!val.value) throw new Error(\"false value\");\r\n        this.setState({ status: false });\r\n        this.props.setMsg({ msg: \"deleted\" });\r\n        $(\"#snackBarTrigger\").trigger(\"click\");\r\n        //console.log(val);\r\n        this.props.refreshJournal();\r\n      })\r\n      .catch((err) => {\r\n        this.setState({ status: false });\r\n        this.props.setMsg({ msg: \"deletion failed\" });\r\n        $(\"#snackBarTrigger\").trigger(\"click\");\r\n        this.props.refreshJournal();\r\n        //console.log(err);\r\n      });\r\n  };\r\n\r\n  closeForm = () => {\r\n    this.setState({ editFormOpen: false });\r\n  };\r\n\r\n  openForm = () => {\r\n    this.setState({ editFormOpen: true });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        <EditableComponent\r\n          refreshJournal={this.props.refreshJournal}\r\n          onJournalDelete={this.onJournalDelete}\r\n          closeForm={this.closeForm}\r\n          openForm={this.openForm}\r\n          editFormOpen={this.state.editFormOpen}\r\n          journal={this.props.journal}\r\n        />\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(EditableContainer);\r\n","import React from \"react\";\r\nimport JournalForm from \"./journalForm\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport Spinner from \"../component/spinner\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Button } from \"@material-ui/core\";\r\n\r\nfunction CreateJournalComponent(props) {\r\n  const { isOpen, onFormOpen, onFormClose, onFormSubmit, status } = props;\r\n  return (\r\n    <div className=\"mx-auto\">\r\n      {isOpen === true ? (\r\n        <>\r\n          <JournalForm\r\n            journalName=\"\"\r\n            journalDescription=\"\"\r\n            onFormSubmit={onFormSubmit}\r\n            onFormClose={onFormClose}\r\n            btnText=\"Create\"\r\n          />\r\n        </>\r\n      ) : (\r\n        <>\r\n          <Button\r\n            onClick={onFormOpen}\r\n            endIcon={\r\n              status === true ? (\r\n                <Spinner status={status} />\r\n              ) : (\r\n                <FontAwesomeIcon icon=\"plus\" />\r\n              )\r\n            }\r\n          >\r\n            new Journal{\" \"}\r\n          </Button>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nCreateJournalComponent.propTypes = {\r\n  status: PropTypes.bool.isRequired,\r\n  onFormOpen: PropTypes.func.isRequired,\r\n  onFormClose: PropTypes.func.isRequired,\r\n  onFormSubmit: PropTypes.func.isRequired,\r\n  isOpen: PropTypes.bool.isRequired,\r\n};\r\n\r\nexport default CreateJournalComponent;\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\n//import * as moment from \"moment\";\r\nimport { uuid } from \"uuidv4\";\r\nimport { setMsg } from \"../component/redux\";\r\nimport { newJournal } from \"../journalStrings/firestoreRedux\";\r\nimport CreateJournalComponent from \"./createJournalComponent\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst mapStateToProps = (state) => {\r\n  const { firestore, custom } = state;\r\n  const status = custom.loading;\r\n  const { journals } = firestore.ordered;\r\n  return { status, journals };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  setMsg: (msg) => dispatch(setMsg(msg)),\r\n  newJournal: (data) => dispatch(newJournal(data)),\r\n});\r\n\r\nclass CreateJournal extends Component {\r\n  state = {\r\n    isOpen: false,\r\n  };\r\n\r\n  onFormOpen = () => {\r\n    this.setState({ isOpen: true });\r\n  };\r\n\r\n  onFormClose = () => {\r\n    this.setState({ isOpen: false });\r\n  };\r\n\r\n  onFormSubmit = (formData) => {\r\n    //const date = moment().format(\"LL\");\r\n    //const time = moment().format(\"LTS\");\r\n    const journalData = {\r\n      journalName: formData.journalName,\r\n      journalDescription: formData.journalDescription,\r\n      journalId: uuid(),\r\n      createdAt: new Date().toISOString(),\r\n      entries: 0,\r\n    };\r\n\r\n    this.props.newJournal(journalData);\r\n    this.onFormClose();\r\n  };\r\n\r\n  render() {\r\n    const { isOpen } = this.state;\r\n    const { status } = this.props;\r\n    return (\r\n      <>\r\n        <CreateJournalComponent\r\n          isOpen={isOpen}\r\n          onFormOpen={this.onFormOpen}\r\n          onFormClose={this.onFormClose}\r\n          onFormSubmit={this.onFormSubmit}\r\n          status={status}\r\n        />\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nCreateJournal.propTypes = {\r\n  status: PropTypes.bool.isRequired,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CreateJournal);\r\n","import React, { useState } from \"react\";\r\nimport { TextField, InputAdornment, IconButton, Box } from \"@material-ui/core\";\r\nimport { Visibility, VisibilityOff } from \"@material-ui/icons\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nexport default function PasswordInput(props) {\r\n  const { name, register, errors, registerObject } = props;\r\n  const [visible, setVisible] = useState(false);\r\n\r\n  const showPassword = () => {\r\n    setVisible(!visible);\r\n  };\r\n  const handleMouseDownPassword = (event) => {\r\n    event.preventDefault();\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        p={1}\r\n        marginBottom={2}\r\n      >\r\n        <TextField\r\n          label={name}\r\n          name={name}\r\n          type={visible ? \"text\" : \"password\"}\r\n          variant=\"outlined\"\r\n          size=\"small\"\r\n          inputRef={register({\r\n            ...registerObject,\r\n          })}\r\n          error={!!errors[name]?.message}\r\n          helperText={errors[name]?.message}\r\n          InputProps={{\r\n            endAdornment: (\r\n              <InputAdornment position=\"end\">\r\n                <IconButton\r\n                  aria-label=\"toggle password visibility\"\r\n                  onClick={showPassword}\r\n                  onMouseDown={handleMouseDownPassword}\r\n                >\r\n                  {visible ? <Visibility /> : <VisibilityOff />}\r\n                </IconButton>\r\n              </InputAdornment>\r\n            ),\r\n          }}\r\n        />\r\n      </Box>\r\n    </>\r\n  );\r\n}\r\n\r\nPasswordInput.propTypes = {\r\n  name: PropTypes.string.isRequired,\r\n  register: PropTypes.func.isRequired,\r\n  errors: PropTypes.object.isRequired,\r\n};\r\n","import React from \"react\";\r\nimport {\r\n  Button,\r\n  Typography,\r\n  Card,\r\n  CardContent,\r\n  CardActions,\r\n  Grid,\r\n  Box,\r\n} from \"@material-ui/core\";\r\nimport { useStyles } from \"../theme/theme\";\r\nimport PasswordInput from \"../component/passwordInput\";\r\n\r\nfunction PinFormComponent(props) {\r\n  const { register, errors } = props;\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Grid container justify=\"center\" alignContent=\"center\">\r\n      <Grid item xs={12} justify=\"center\" alignContent=\"center\" container>\r\n        <Card\r\n          className={`${classes.card} ${classes.cardAuth} ${classes.margin}`}\r\n        >\r\n          <CardContent>\r\n            <Box display=\"flex\" p={1}>\r\n              {\" \"}\r\n              <Typography variant=\"h6\"> Enter your pin to continue!</Typography>\r\n            </Box>\r\n            <PasswordInput\r\n              name=\"pin\"\r\n              register={register}\r\n              registerObject={{\r\n                required: {\r\n                  value: true,\r\n                  message: \"please provide a pin\",\r\n                },\r\n                minLength: {\r\n                  value: 4,\r\n                  message: \"your pin must be atleast 4 characters long\",\r\n                },\r\n              }}\r\n              errors={errors}\r\n            />\r\n\r\n            <CardActions>\r\n              <Button component=\"button\" type=\"submit\">\r\n                continue\r\n              </Button>\r\n            </CardActions>\r\n          </CardContent>\r\n        </Card>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n\r\nexport default PinFormComponent;\r\n","import React from \"react\";\r\nimport FormHOC from \"../component/formHOC\";\r\nimport PinFormComponent from \"./pinFormComponent\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nfunction PinForm(props) {\r\n  const { register, errors } = props;\r\n  return (\r\n    <>\r\n      <PinFormComponent register={register} errors={errors} />\r\n    </>\r\n  );\r\n}\r\n\r\nPinForm.propTypes = {\r\n  onFormSubmit: PropTypes.func.isRequired,\r\n  register: PropTypes.func.isRequired,\r\n  errors: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default FormHOC(PinForm);\r\n","//import dotenv from \"dotenv\";\r\nimport AES from \"crypto-js/aes\";\r\nimport CryptoJS from \"crypto-js\";\r\nimport SHA256 from \"crypto-js/sha256\";\r\n\r\n//dotenv.config();\r\n\r\nasync function encrypt(unencryptedEntry, email, customId) {\r\n  const customEntry = await encryptHash(customId, email);\r\n  const primary = email + customId;\r\n  const hash = SHA256(primary).toString();\r\n  const encrypted = await AES.encrypt(unencryptedEntry, hash).toString();\r\n  //console.log({ email, unencryptedEntry, customId, primary, hash, encrypted });\r\n  return { entry: await encrypted, customEntry: await customEntry };\r\n}\r\n\r\nasync function decrypt(encryptedEntry, email, customId) {\r\n  customId = await decryptHash(customId, email);\r\n  const primary = email + customId;\r\n  const hash = SHA256(primary).toString();\r\n  const bytes = AES.decrypt(encryptedEntry, hash);\r\n  const decrypted = await bytes.toString(CryptoJS.enc.Utf8);\r\n  //console.log({ email, customId, primary, hash, encryptedEntry, decrypted });\r\n  return decrypted;\r\n}\r\n\r\nasync function encryptHash(unEncryptedHash, email) {\r\n  const primary = email + email;\r\n  const hash = SHA256(primary).toString();\r\n  const encrypted = await AES.encrypt(unEncryptedHash, hash).toString();\r\n  //console.log({ email, unEncryptedHash, hash, encrypted });\r\n\r\n  return encrypted;\r\n}\r\n\r\nasync function decryptHash(encryptedHash, email) {\r\n  const primary = email + email;\r\n  const hash = SHA256(primary).toString();\r\n  const bytes = AES.decrypt(encryptedHash, hash);\r\n  const decrypted = await bytes.toString(CryptoJS.enc.Utf8);\r\n  // console.log({ email, encryptedHash, hash, decrypted });\r\n\r\n  return decrypted;\r\n}\r\n\r\nasync function encryptPin(unEncryptedPin) {\r\n  const primary = unEncryptedPin + \".\";\r\n  const hash = await SHA256(primary).toString();\r\n  //console.log({ unEncryptedPin, hash });\r\n\r\n  return hash;\r\n}\r\n\r\nexport { encrypt, decrypt, encryptHash, decryptHash, encryptPin };\r\n","import React, { Component } from \"react\";\r\nimport db from \"../component/dbaccess\";\r\nimport { setKey, setMsg } from \"../component/redux\";\r\nimport { connect } from \"react-redux\";\r\nimport $ from \"jquery\";\r\nimport { encryptPin } from \"../component/enctype\";\r\n\r\nconst mapStateToProps = (state) => ({\r\n  securityKey: state.custom.securityKey,\r\n  storageKey: state.custom.storageKey,\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  setKey: (data) => dispatch(setKey(data)),\r\n  setMsg: (msg) => dispatch(setMsg(msg)),\r\n});\r\n\r\nexport default function LoginHOC(WrappedComponent) {\r\n  class HOC extends Component {\r\n    access = async (data) => {\r\n      const hashedPin = await encryptPin(data.pin);\r\n      return db.pin\r\n        .where(\"pin\")\r\n        .equals(hashedPin)\r\n        .count()\r\n        .then((val) => val)\r\n        .catch((err) => {\r\n          this.props.setMsg({ msg: err.message });\r\n          $(\"#snackBarTrigger\").trigger(\"click\");\r\n          console.log(err.message);\r\n        });\r\n    };\r\n\r\n    render() {\r\n      return (\r\n        <WrappedComponent\r\n          access={this.access}\r\n          setKey={this.props.setKey}\r\n          setMsg={this.props.setMsg}\r\n        />\r\n      );\r\n    }\r\n  }\r\n\r\n  return connect(mapStateToProps, mapDispatchToProps)(HOC);\r\n}\r\n","import React from \"react\";\r\nimport PinForm from \"./pinForm\";\r\nimport $ from \"jquery\";\r\nimport LoginHOC from \"./loginHOC\";\r\n\r\nfunction PinLogin({ access, setKey, setMsg }) {\r\n  const onFormSubmit = (data) => {\r\n    access(data)\r\n      .then((value) => {\r\n        if (value === 0) throw new Error(\"Invalin pin\");\r\n        return setKey(data);\r\n      })\r\n      .catch((err) => {\r\n        setMsg({ msg: err.message });\r\n        $(\"#snackBarTrigger\").trigger(\"click\");\r\n        console.log(err.message);\r\n      });\r\n  };\r\n\r\n  return <PinForm onFormSubmit={onFormSubmit} />;\r\n}\r\n\r\nexport default LoginHOC(PinLogin);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport EditableContainer from \"./editableContainer\";\r\nimport CreateJournal from \"./createJournal\";\r\nimport PinLogin from \"../security/pinLogin\";\r\n\r\nconst mapStateToProps = (state) => {\r\n  const { auth } = state.firebase;\r\n  const { ordered } = state.firestore;\r\n  return { ordered, auth };\r\n};\r\n\r\nfunction JournalComponent(props) {\r\n  const { status } = props;\r\n  const journals = props.ordered.journals;\r\n  const myJournals = journals\r\n    ? props.ordered.journals.map((journal, index) => (\r\n        <EditableContainer key={index} journal={journal} />\r\n      ))\r\n    : [];\r\n\r\n  if (props.storageKey) {\r\n    if (!!props.securityKey) {\r\n      return <Main myJournals={myJournals} status={status} />;\r\n    } else {\r\n      return <PinLogin />;\r\n    }\r\n  } else {\r\n    return <Main myJournals={myJournals} status={status} />;\r\n  }\r\n}\r\n\r\nfunction Main(props) {\r\n  const { myJournals } = props;\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"row\">{myJournals}</div>\r\n      <div className=\"row\">\r\n        {\" \"}\r\n        <CreateJournal />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default connect(mapStateToProps)(JournalComponent);\r\n\r\n/* firestoreConnect((props) => [\r\n    {\r\n      collection: \"users\",\r\n      doc: props.firebase.auth?.uid,\r\n      subcollections: [{ collection: \"journals\" }],\r\n      storeAs: \"journals\",\r\n    }, // or `todos/${props.todoId}`\r\n  ]), */\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { journalList, checkKey, isLogged } from \"../component/redux\";\r\nimport db from \"../component/dbaccess\";\r\nimport JournalComponent from \"./journalComponent\";\r\nimport PinLogin from \"../security/pinLogin\";\r\n\r\nconst mapStateToProps = (state) => {\r\n  return state;\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  checkKey: (data) => dispatch(checkKey(data)),\r\n  journalList: (newJournal) => dispatch(journalList(newJournal)),\r\n  isLogged: (data) => dispatch(isLogged(data)),\r\n});\r\n\r\nclass JournalContainer extends Component {\r\n  componentDidMount() {\r\n    db.pin.count().then((value) => {\r\n      if (value === 0) {\r\n        this.props.checkKey({ storageKey: false });\r\n      } else {\r\n        this.props.checkKey({ storageKey: true });\r\n      }\r\n    });\r\n    //check for logedin user\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        {this.props.custom.storageKey ? (\r\n          this.props.custom.securityKey ? (\r\n            <JournalComponent />\r\n          ) : (\r\n            <PinLogin />\r\n          )\r\n        ) : (\r\n          <JournalComponent />\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(JournalContainer);\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction Privacy() {\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"card col-sm-10\">\r\n        <div className=\"card-header\">\r\n          <Link className=\"btn btn-outline-warning\" to=\"/signup\">back</Link>\r\n        </div>\r\n        <div className=\"card-body\">\r\n          <h3>Terms of Use</h3>\r\n          <p>\r\n            By using this app, Comfy Pen, you are agreeing entirely to the terms\r\n            of use stated herein concerning the use and limitations of the app. \r\n          </p>\r\n          <h3>Usage</h3>\r\n          <p>\r\n            This app is free to use to an extent upon which future updates and\r\n            upgrades might see an introduction of premium options that may\r\n            require the user to pay to use those services/features. \r\n            <br />\r\n            For access to the free features, the user must have an account with\r\n            the app to gain access.\r\n          </p>\r\n          <h3>Prohibited Uses</h3>\r\n          <p>\r\n            This app is the property of Finite Creations and as such any\r\n            leasing, copying, sublicensing, transferring or assigning the app or\r\n            any information in the app. prohibited. Use for any illegal\r\n            purposes. <br />\r\n            Altering, modifying, adapting, reverse engineering, decompiling,\r\n            disassembling or any attempt to hack this app. <br />\r\n            Any website is prohibited to imply that it has an association with\r\n            this app. <br />\r\n            Violating a other users legal and privacy rights. <br />\r\n            Using the app to save or transmit any content that could be deemed\r\n            unlawful, threatening, harrassing, racist, abusive, libelous,\r\n            pornographic, vulgar, defarmatory, obscene, indecent, or otherwise\r\n            inappropriate. <br />\r\n            Breaching or attempting to breach, the app's security systems.{\" \"}\r\n            <br />\r\n            Enabling third parties to violate the terms of use. <br />\r\n            All users of this web application must be at least 18 years of age\r\n            or older. <br />\r\n          </p>\r\n          <h3>Service Interruptions and Updates</h3>\r\n          <p>\r\n            Any service interuptions will be communicated to the users via their\r\n            email addresses. In case of any service issues, please contact the\r\n            service provider at comfypen@gmail.com.\r\n          </p>\r\n          <h3>Term, Termination and Survival</h3>\r\n          <p>\r\n            This Agreement shall be effective as of the date the User accepts\r\n            the terms herein or first accesses the Services on this app and\r\n            shall remain in effect for as long as the User uses any of the\r\n            services in the application. \r\n          </p>\r\n          <h3>User Data</h3>\r\n          <p>\r\n            The User should use the app for purposes of which comply to the law\r\n            and failure to which the company will not be liable to the User's\r\n            missuse of their data. The app has the right to revoke or restrict\r\n            the users access to the services offered in the event the User the\r\n            Terms of Use or any applicable law.\r\n          </p>\r\n          <h3>Confidentials Information</h3>\r\n          <p>\r\n            All the information provided by the application including the users\r\n            data is private and confidentials and should be treated as such.\r\n            Indemnification and Limitation of Liability In the event that the\r\n            user violates oany of the Terms of Use or applicable laws, the app\r\n            will not be responsible whatsoever for any loss or damage on the\r\n            side of the user.\r\n          </p>\r\n          <h3>Amendments</h3>\r\n\r\n          <p>\r\n            Any amendments to the Terms of Use will be communicated via email to\r\n            the User.\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Privacy;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction Privacy() {\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"card col-sm-10\">\r\n        <div className=\"card-header\">\r\n          <Link className=\"btn btn-outline-warning\" to=\"/signup\">\r\n            back\r\n          </Link>\r\n        </div>\r\n        <div className=\"card-body\">\r\n          <h3> Privacy Statement</h3>\r\n\r\n          <p>\r\n            This app, Comfy Pen is committed to the privacy and safeguarding of\r\n            private and confidential information to the extent possible, subject\r\n            to the provisions of the law.\r\n          </p>\r\n          <h3>Data Collected </h3>\r\n\r\n          <p>\r\n            This app, Comfy Pen, operates on the basis of signing in a user\r\n            using their email. The email is required for identifying the\r\n            different users who make use of the app and as such one email can be\r\n            used by only one user. The email provided by the user is strictly\r\n            private and will only be used for communicating to the user\r\n            concerning relevant details of their account. The email will not be\r\n            shared to any other party. The user is required to fill a web form\r\n            for registering to the app. Currently, the email received will be\r\n            stored with the application until such a time that their account is\r\n            rendered inactive or the user is in violation of terms of use and\r\n            hence their account gets cancelled. During the use of the app,\r\n            please not that all data from a user is encrypted before storing to\r\n            ensure utmost privacy. The app also collects analytics data through\r\n            google analytics for the purpose tracking the usage of the app. The\r\n            data is collected mainly by third party cookies from google and as\r\n            such can be disabled by disabling third party cookies in your\r\n            browser.\r\n          </p>\r\n          <h3> Change in Privacy Statement.</h3>\r\n\r\n          <p>\r\n            This Privacy Statement is the first and was created on 05/29/2020.\r\n            The statement might change in the future for any reason. Please\r\n            ensure your review the Privacy Statement each time you use the app.\r\n            Any significant changes to the privacy policy will be communicated\r\n            to the users using their email.\r\n          </p>\r\n          <h3>Other Sites </h3>\r\n          <p>\r\n            This app may contain links to other external websites operated by\r\n            third parties and hence are not subject to this privacy statement.\r\n            We provide the links for your convenience, but we do not review,\r\n            control or monitor the privacy practices operated by other websites.\r\n            Please ensure you review the privacy policies of third party\r\n            websites as we are not liable to your any business dealings with\r\n            them.\r\n          </p>\r\n          <h3> Queries</h3>\r\n          <p>\r\n            For any questions or comments about this Privacy Policy, please\r\n            contact us using our official email: comfypen@gmail.com\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Privacy;\r\n","import React, { useState } from \"react\";\r\nimport { Popper, Card, CardContent } from \"@material-ui/core\";\r\n\r\nexport default function SimplePopper(props) {\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  const { render, children } = props;\r\n  const handleClick = (e) => {\r\n    setAnchorEl(anchorEl ? null : e.currentTarget);\r\n  };\r\n  const open = Boolean(anchorEl);\r\n  const id = open ? \"simple-popper\" : undefined;\r\n  return (\r\n    <div>\r\n      {render(handleClick)}\r\n      <Popper\r\n        style={{ width: 500, maxWidth: \"80%\", zIndex: 10 }}\r\n        id={id}\r\n        open={open}\r\n        anchorEl={anchorEl}\r\n      >\r\n        <Card>\r\n          <CardContent>{children}</CardContent>\r\n        </Card>\r\n      </Popper>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Editor } from \"@tinymce/tinymce-react\";\r\nimport Spinner from \"../component/spinner\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport {\r\n  Button,\r\n  TextField,\r\n  Typography,\r\n  Grid,\r\n  Switch,\r\n  FormControlLabel,\r\n} from \"@material-ui/core\";\r\nimport SimplePopper from \"../component/popper\";\r\nimport { Info } from \"@material-ui/icons\";\r\nimport { useStyles } from \"../theme/theme\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nfunction TinymceEditor(props) {\r\n  //console.log(props);\r\n  const classes = useStyles();\r\n  const {\r\n    status,\r\n    subject,\r\n    entry,\r\n    register,\r\n    errors,\r\n    journalId,\r\n    getValues,\r\n    checked,\r\n    changeView,\r\n    onEntryChange,\r\n    init,\r\n    mobileInit,\r\n  } = props;\r\n\r\n  return (\r\n    <>\r\n      <Grid container justify=\"center\" alignContent=\"center\">\r\n        <Grid\r\n          item\r\n          xs={10}\r\n          sm={9}\r\n          md={7}\r\n          justify=\"center\"\r\n          alignContent=\"center\"\r\n          container\r\n        >\r\n          <TextField\r\n            className={classes.margin}\r\n            label=\"subject\"\r\n            inputRef={register({\r\n              required: { value: true, message: \"please provide a subject\" },\r\n            })}\r\n            type=\"text\"\r\n            name=\"subject\"\r\n            placeholder=\"subject\"\r\n            helperText={errors.subject?.message}\r\n            error={!!errors.subject?.message}\r\n            defaultValue={subject}\r\n            fullWidth\r\n          />\r\n        </Grid>\r\n        <Grid\r\n          item\r\n          xs={10}\r\n          sm={9}\r\n          md={7}\r\n          justify=\"center\"\r\n          alignContent=\"center\"\r\n          container\r\n        >\r\n          <FormControlLabel\r\n            control={\r\n              <Switch\r\n                inputProps={{ \"aria-label\": \"mobile mode toggle\" }}\r\n                name=\"mobile\"\r\n                onChange={changeView}\r\n                checked={checked}\r\n              />\r\n            }\r\n            label=\"desktop-mode\"\r\n          />\r\n          <SimplePopper\r\n            render={(handleClick) => (\r\n              <Info color=\"primary\" onClick={handleClick} cursor=\"pointer\" />\r\n            )}\r\n          >\r\n            <Typography>\r\n              This setting only works for mobile devices. If you want more power\r\n              in editing, select the desktop mode. It however comes at the cost\r\n              of not being able to paste into the editor. If you want to be able\r\n              to paste, please use the mobile version by disabling the desktop\r\n              mode.\r\n            </Typography>\r\n          </SimplePopper>\r\n        </Grid>\r\n      </Grid>\r\n\r\n      <Grid container justify=\"center\" alignContent=\"center\">\r\n        <Grid item xs={12} sm={10} md={8}>\r\n          <div className={classes.margin}>\r\n            {checked && (\r\n              <>\r\n                <Editor\r\n                  id={journalId}\r\n                  init={{\r\n                    ...init,\r\n                  }}\r\n                  initialValue={entry}\r\n                  value={getValues(\"entry\")}\r\n                  onEditorChange={onEntryChange}\r\n                />\r\n              </>\r\n            )}\r\n            {!checked && (\r\n              <>\r\n                <Editor\r\n                  id={journalId}\r\n                  init={{\r\n                    ...mobileInit,\r\n                  }}\r\n                  initialValue={entry}\r\n                  value={getValues(\"entry\")}\r\n                  onEditorChange={onEntryChange}\r\n                />\r\n              </>\r\n            )}\r\n            <Typography variant=\"body2\" color=\"error\">\r\n              {errors.entry?.message}\r\n            </Typography>\r\n          </div>\r\n          <Button\r\n            component=\"button\"\r\n            type=\"submit\"\r\n            className={classes.margin}\r\n            aria-controls=\"save-Button\"\r\n            endIcon={<FontAwesomeIcon icon=\"save\" />}\r\n          >\r\n            Save {\"  \"}\r\n            <Spinner status={status} />\r\n          </Button>\r\n        </Grid>\r\n      </Grid>\r\n    </>\r\n  );\r\n}\r\n\r\nTinymceEditor.propTypes = {\r\n  subject: PropTypes.string.isRequired,\r\n  entry: PropTypes.string.isRequired,\r\n  register: PropTypes.func.isRequired,\r\n  errors: PropTypes.object.isRequired,\r\n  journalId: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default TinymceEditor;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useStyles } from \"../theme/theme\";\r\nimport PropTypes from \"prop-types\";\r\nimport TinyComponent from \"./tinyComponent\";\r\nimport Spinner from \"../component/spinner\";\r\nimport FormHOC from \"../component/formHOC\";\r\n\r\nfunction TinymceEditor(props) {\r\n  //console.log(props);\r\n  const classes = useStyles();\r\n  const {\r\n    status,\r\n    subject,\r\n    entry,\r\n    register,\r\n    errors,\r\n    setValue,\r\n    journalId,\r\n    getValues,\r\n  } = props;\r\n  const [checked, setChecked] = useState(false);\r\n\r\n  useEffect(() => {\r\n    //console.log(register);\r\n    register(\"entry\", {\r\n      required: { value: true, message: \"entry field cannot be empty\" },\r\n    });\r\n  }, [register]);\r\n\r\n  useEffect(() => {\r\n    setValue(\"entry\", entry);\r\n  }, [entry, setValue]);\r\n\r\n  const onEntryChange = (content) => {\r\n    //props.onEntryChange(content);\r\n    //console.log(content);\r\n    setValue(\"entry\", content);\r\n  };\r\n\r\n  const changeView = (e) => {\r\n    setChecked(e.target.checked);\r\n  };\r\n\r\n  const plugins = [\r\n    \"advlist autolink lists link image charmap print preview hr\",\r\n    \"pagebreak spellchecker nonbreaking anchor\",\r\n    \"table emoticons template wordcount\",\r\n    \"searchreplace visualblocks visualchars fullscreen\",\r\n    \"insertdatetime media paste code help autosave\",\r\n  ];\r\n  const toolbar =\r\n    \"undo redo | restoredraft insertdatetime | formatselect | bold italic forecolor backcolor | hr pagebreak nonbreaking table | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | emoticons charmap removeformat | searchreplace fullscreen preview print | help\";\r\n  const mobile = {\r\n    menubar: true,\r\n  };\r\n  const init = {\r\n    height: \"500\",\r\n    placeholder: \"type here...\",\r\n    plugins: plugins,\r\n    menu: {\r\n      favs: {\r\n        title: \"myFavorite\",\r\n        items: \"emoticons spellchecker\",\r\n      },\r\n    },\r\n    toolbar: toolbar,\r\n    menubar: \"fav file edit view insert format\",\r\n    mobile: mobile,\r\n    //content_css: \"tinymce/skins/content/writer/content.css\",\r\n    autosave_restore_when_empty: true,\r\n  };\r\n  const mobileInit = {\r\n    ...init,\r\n    mobile: {\r\n      ...mobile,\r\n      theme: \"mobile\",\r\n    },\r\n  };\r\n  const journalIdStatus = !!journalId;\r\n\r\n  return (\r\n    <>\r\n      {journalIdStatus && (\r\n        <TinyComponent\r\n          register={register}\r\n          entry={entry}\r\n          journalId={journalId}\r\n          getValues={getValues}\r\n          status={status}\r\n          subject={subject}\r\n          classes={classes}\r\n          errors={errors}\r\n          checked={checked}\r\n          changeView={changeView}\r\n          onEntryChange={onEntryChange}\r\n          mobileInit={mobileInit}\r\n          init={init}\r\n        />\r\n      )}\r\n      <Spinner status={!journalIdStatus} />\r\n    </>\r\n  );\r\n}\r\n\r\nTinymceEditor.propTypes = {\r\n  subject: PropTypes.string.isRequired,\r\n  entry: PropTypes.string.isRequired,\r\n  register: PropTypes.func.isRequired,\r\n  errors: PropTypes.object.isRequired,\r\n  setValue: PropTypes.func.isRequired,\r\n  journalId: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default FormHOC(TinymceEditor);\r\n","import React from \"react\";\r\nimport sanitizeHtml from \"sanitize-html\";\r\nimport TinymceEditor from \"./tinymceEditor\";\r\nimport { encrypt } from \"../component/enctype\";\r\nimport { connect } from \"react-redux\";\r\nimport { uuid } from \"uuidv4\";\r\nimport PropTypes from \"prop-types\";\r\nimport { compose } from \"recompose\";\r\nimport { withRouter } from \"react-router-dom\";\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n  const { auth } = state.firebase;\r\n  return { auth };\r\n};\r\n\r\nfunction Writer(props) {\r\n  //console.log(props);\r\n  const { entry, subject, auth, newEntry, status, journalId } = props;\r\n  const onFormSubmit = async (content) => {\r\n    //console.log(content);\r\n    let customEntry = uuid();\r\n    const email = auth.email;\r\n    let { entry, subject } = content;\r\n\r\n    entry = sanitizeHtml(entry);\r\n    entry = await encrypt(entry, email, customEntry);\r\n\r\n    const myValues = {\r\n      subject: sanitizeHtml(subject),\r\n      entry: entry,\r\n    };\r\n    newEntry(myValues);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <TinymceEditor\r\n        journalId={journalId}\r\n        status={status}\r\n        entry={entry}\r\n        subject={subject}\r\n        onFormSubmit={onFormSubmit}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nWriter.propTypes = {\r\n  entry: PropTypes.string.isRequired,\r\n  subject: PropTypes.string.isRequired,\r\n  newEntry: PropTypes.func.isRequired,\r\n  auth: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default compose(withRouter, connect(mapStateToProps))(Writer);\r\n","import React from \"react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { Fab } from \"@material-ui/core\";\r\nimport { useStyles } from \"../theme/theme\";\r\n\r\nconst ReadBtn = (props) => {\r\n  const classes = useStyles();\r\n  \r\n  return (\r\n    <Fab\r\n      onClick={props.read}\r\n      className={`${classes.fab} ${classes.readFab}`}\r\n      aria-controls=\"write-button\"\r\n    >\r\n      <FontAwesomeIcon icon=\"book-open\" />\r\n    </Fab>\r\n  );\r\n};\r\n\r\nexport default ReadBtn;\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport sanitizeHtml from \"sanitize-html\";\r\nimport { uuid } from \"uuidv4\";\r\nimport Writer from \"./writer\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { addEntry } from \"./firestoreRedux\";\r\nimport $ from \"jquery\";\r\nimport { setMsg } from \"../component/redux\";\r\nimport PropTypes from \"prop-types\";\r\nimport { compose } from \"recompose\";\r\nimport ReadBtn from \"./readBtn\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n  const userId = state.firebase.auth.uid;\r\n  const { journalId } = ownProps.match.params;\r\n  const { journals } = state.firestore.data;\r\n  const journal = journals ? journals[journalId] : {};\r\n  return { journal, userId, journalId };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  addEntry: (data) => dispatch(addEntry(data)),\r\n  setMsg: (msg) => dispatch(setMsg(msg)),\r\n});\r\n\r\nfunction NewEntry(props) {\r\n  const { journal, journalId, setMsg, userId } = props;\r\n  const history = useHistory();\r\n\r\n  const onNewEntry = (data) => {\r\n    const { entry, customEntry } = data.entry;\r\n    let entryId = uuid();\r\n    const entryData = {\r\n      userId,\r\n      customEntry,\r\n      subject: sanitizeHtml(data.subject),\r\n      entry,\r\n      journalId: journal.journalId,\r\n      entryId,\r\n      createdAt: new Date().toISOString(),\r\n    };\r\n    props.addEntry(entryData);\r\n    setMsg({ msg: \"Saved!\" });\r\n    $(\"#snackBarTrigger\").trigger(\"click\");\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Writer\r\n        journalId={journalId}\r\n        journal={journal}\r\n        subject=\"\"\r\n        entry=\"\"\r\n        newEntry={onNewEntry}\r\n      />\r\n      <ReadBtn read={() => history.goBack()} />\r\n    </>\r\n  );\r\n}\r\n\r\nNewEntry.propTypes = {\r\n  setMsg: PropTypes.func.isRequired,\r\n  addEntry: PropTypes.func.isRequired,\r\n  journal: PropTypes.object.isRequired,\r\n  userId: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default compose(\r\n  withRouter,\r\n  connect(mapStateToProps, mapDispatchToProps)\r\n)(NewEntry);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport * as moment from \"moment\";\r\nimport { compose } from \"recompose\";\r\nimport {\r\n  Badge,\r\n  Divider,\r\n  Avatar,\r\n  Typography,\r\n  List,\r\n  ListItem,\r\n  ListItemText,\r\n  ListItemAvatar,\r\n  ListSubheader,\r\n} from \"@material-ui/core\";\r\nimport { useStyles } from \"../theme/theme\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst mapStateToProps = (state) => {\r\n  return state;\r\n};\r\n\r\nfunction OnlineList(props) {\r\n  const classes = useStyles();\r\n\r\n  const { entries, journal, match } = props;\r\n  const { journalId } = match.params;\r\n\r\n  const savedJournal = entries.map((entry, index) => {\r\n    const { subject, createdAt, entryId } = entry;\r\n\r\n    const date = moment(createdAt).format(\"LL\");\r\n    const time = moment(createdAt).format(\"LTS\");\r\n\r\n    return (\r\n      <Link\r\n        to={{\r\n          pathname: \"/read/\" + journalId + \":\" + entryId,\r\n          state: { from: props.location },\r\n        }}\r\n        key={index}\r\n        style={{ color: \"#000\", textDecoration: \"none\" }}\r\n      >\r\n        <ListItem className={classes.listItem} alignItems=\"flex-start\">\r\n          <ListItemAvatar>\r\n            <Avatar>{subject.charAt(0)}</Avatar>\r\n          </ListItemAvatar>\r\n          <ListItemText\r\n            primary={subject}\r\n            secondary={\r\n              <React.Fragment>\r\n                <Typography\r\n                  component=\"span\"\r\n                  variant=\"caption\"\r\n                  className={classes.listInline}\r\n                  //color=\"textPrimary\"\r\n                >\r\n                  {`${date} - ${time}`}\r\n                </Typography>\r\n              </React.Fragment>\r\n            }\r\n          />\r\n        </ListItem>\r\n        <Divider variant=\"inset\" component=\"li\" />\r\n      </Link>\r\n    );\r\n  });\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <List className={classes.listRoot}>\r\n        <ListSubheader>\r\n          <Badge badgeContent={entries.length || 0} color=\"primary\">\r\n            <Typography variant=\"subtitle1\">\r\n              {journal.journalName ? journal.journalName : \"My Notes\"}\r\n            </Typography>\r\n          </Badge>\r\n        </ListSubheader>\r\n        <Divider component=\"li\" />\r\n        {savedJournal}\r\n      </List>\r\n    </div>\r\n  );\r\n}\r\n\r\nOnlineList.propTypes = {\r\n  journal: PropTypes.object.isRequired,\r\n  entries: PropTypes.array.isRequired,\r\n};\r\n\r\nexport default compose(withRouter, connect(mapStateToProps))(OnlineList);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport OnlineList from \"./onlineList\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { compose } from \"recompose\";\r\nimport { Fab } from \"@material-ui/core\";\r\nimport { useStyles } from \"../theme/theme\";\r\nimport PropTypes from \"prop-types\";\r\nimport { firestoreConnect } from \"react-redux-firebase\";\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n  const journalId = ownProps.match.params.journalId;\r\n  const { auth } = state.firebase;\r\n\r\n  const { journals } = state.firestore.data;\r\n  const journal = journals ? journals[journalId] : {};\r\n  const entriesList = state.firestore.ordered.entries;\r\n  const entries = entriesList ? entriesList : [];\r\n  return { journal, entries, auth, journalId };\r\n};\r\n\r\nfunction OnlineReader(props) {\r\n  //console.log(props);\r\n  const journalId = props.match.params.journalId;\r\n  const history = props.history;\r\n  const { entries, journal } = props;\r\n  const classes = useStyles();\r\n\r\n  const write = () => {\r\n    history.push(\"/write/\" + journalId);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <OnlineList journal={journal} entries={entries} />\r\n      <Fab onClick={write} className={classes.fab} aria-controls=\"write-Link\">\r\n        <FontAwesomeIcon icon=\"pen-alt\" />\r\n      </Fab>\r\n    </>\r\n  );\r\n}\r\n\r\nOnlineReader.propTypes = {\r\n  journal: PropTypes.object.isRequired,\r\n  entries: PropTypes.array.isRequired,\r\n};\r\n\r\nexport default compose(\r\n  withRouter,\r\n  connect(mapStateToProps),\r\n  firestoreConnect((props) => {\r\n    const { journalId, auth } = props;\r\n    const entriesListener = {\r\n      collection: \"users\",\r\n      doc: auth?.uid,\r\n      subcollections: [\r\n        {\r\n          collection: \"journals\",\r\n          doc: journalId,\r\n          subcollections: [\r\n            {\r\n              collection: \"entries\",\r\n              orderBy: [\"createdAt\", \"desc\"],\r\n              //limit: 10,\r\n            },\r\n          ],\r\n          storeAs: \"entries\",\r\n        },\r\n      ],\r\n      storeAs: \"entries\",\r\n    };\r\n\r\n    return journalId ? [entriesListener] : [];\r\n  })\r\n)(OnlineReader);\r\n","import React from \"react\";\r\nimport CustomDialogue from \"../component/customDialogue\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nfunction DeleteDialogue(props) {\r\n  const onTrashClick = () => {\r\n    props.onTrashClick();\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <CustomDialogue\r\n        confirm={onTrashClick}\r\n        title=\"delete\"\r\n        description=\"Are you sure you want to delete this entry? Please note that this\r\n        action cannot be undone!\"\r\n        render={(handleClickOpen) => (\r\n          <span onClick={handleClickOpen}>delete</span>\r\n        )}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nDeleteDialogue.propTypes = {\r\n  onTrashClick: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default DeleteDialogue;\r\n","import React from \"react\";\r\nimport { Menu as MaterialMenu, IconButton, MenuItem } from \"@material-ui/core\";\r\nimport { MoreOutlined } from \"@ant-design/icons\";\r\nimport DeleteDialogue from \"./deleteDialogue\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nexport default function MoreMenu(props) {\r\n  const { anchorEl, handleMenu, handleClose, open, onTrashClick, edit } = props;\r\n  return (\r\n    <>\r\n      <IconButton\r\n        aria-label=\"account of current user\"\r\n        aria-controls=\"menu-appbar\"\r\n        aria-haspopup=\"true\"\r\n        onClick={handleMenu}\r\n        color=\"inherit\"\r\n      >\r\n        {\" \"}\r\n        <MoreOutlined />{\" \"}\r\n      </IconButton>{\" \"}\r\n      <MaterialMenu\r\n        id=\"menu-appbar\"\r\n        anchorEl={anchorEl}\r\n        anchorOrigin={{ vertical: \"top\", horizontal: \"right\" }}\r\n        keepMounted\r\n        transformOrigin={{ vertical: \"top\", horizontal: \"right\" }}\r\n        open={open}\r\n        onClose={handleClose}\r\n      >\r\n        {\" \"}\r\n        <MenuItem onClick={edit}>edit</MenuItem>{\" \"}\r\n        <MenuItem onClick={handleClose}>\r\n          <DeleteDialogue onTrashClick={onTrashClick} />\r\n        </MenuItem>{\" \"}\r\n      </MaterialMenu>{\" \"}\r\n    </>\r\n  );\r\n}\r\n\r\nMoreMenu.propTypes = {\r\n  edit: PropTypes.func.isRequired,\r\n  anchorEl: PropTypes.any,\r\n  handleMenu: PropTypes.func.isRequired,\r\n  handleClose: PropTypes.func.isRequired,\r\n  open: PropTypes.bool.isRequired,\r\n  entry: PropTypes.object.isRequired,\r\n  onTrashClick: PropTypes.func.isRequired,\r\n};\r\n","import React from \"react\";\r\nimport sanitizeHtml from \"sanitize-html\";\r\nimport * as moment from \"moment\";\r\nimport MoreMenu from \"./moreMenu\";\r\nimport { Paper, Box, Typography, Divider } from \"@material-ui/core\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nfunction ReadFinal(props) {\r\n  const { subject, entry, createdAt } = props.entry;\r\n\r\n  const createMarkup = () => ({ __html: sanitizeHtml(entry) });\r\n\r\n  const myComponent = () => {\r\n    return <div dangerouslySetInnerHTML={createMarkup()}></div>;\r\n  };\r\n  const date = moment(createdAt).format(\"LL\");\r\n  const time = moment(createdAt).format(\"LTS\");\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <Paper style={{ minHeight: \"80vh\" }}>\r\n        <Box display=\"flex\" flexDirection=\"column\" m={1}>\r\n          <Box display=\"flex\" padding={2} alignItems=\"center\">\r\n            <Box display=\"flex\" flexGrow={1} flexDirection=\"column\">\r\n              <Typography variant=\"h5\">{subject}</Typography>\r\n              <Typography variant=\"caption\">{`${date} ${time}`}</Typography>\r\n            </Box>\r\n            <MoreMenu {...props} />\r\n          </Box>\r\n          <Divider />\r\n          <Box padding={2}>{myComponent()}</Box>\r\n        </Box>\r\n      </Paper>\r\n    </div>\r\n  );\r\n}\r\n\r\nReadFinal.propTypes = {\r\n  entry: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default ReadFinal;\r\n","import React from \"react\";\r\nimport Backdrop from \"@material-ui/core/Backdrop\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nconst useStyles = makeStyles(theme => ({\r\n  backdrop: { zIndex: theme.zIndex.drawer + 1, color: \"#fff\" }\r\n}));\r\n\r\nfunction MainBackdrop(props) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div>\r\n      {\" \"}\r\n      <Backdrop className={classes.backdrop} open={props.status}>\r\n        {\" \"}\r\n        <CircularProgress color=\"inherit\" />{\" \"}\r\n      </Backdrop>{\" \"}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MainBackdrop;\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport ReadFinal from \"./readFinal\";\r\nimport { updateEntry, deleteEntry } from \"./firestoreRedux\";\r\nimport { setMsg } from \"../component/redux\";\r\nimport $ from \"jquery\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport Decrypter from \"./decrypter\";\r\nimport { compose } from \"recompose\";\r\nimport PropTypes from \"prop-types\";\r\nimport Writer from \"./writer\";\r\nimport ReadBtn from \"./readBtn\";\r\nimport { firestoreConnect } from \"react-redux-firebase\";\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n  //console.log({ state, ownProps });\r\n  const { auth } = state.firebase;\r\n  const path = ownProps.match.params.entryId;\r\n  const [journalId, entryId] = path.split(\":\");\r\n  const { email } = state.firebase.auth;\r\n  const { entries } = state.firestore.data;\r\n  const entry = entries ? entries[entryId] : {};\r\n  return { entry, email, entryId, journalId, auth, state };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  updateEntry: (data) => dispatch(updateEntry(data)),\r\n  deleteEntry: (data) => dispatch(deleteEntry(data)),\r\n  setMsg: (msg) => dispatch(setMsg(msg)),\r\n});\r\n\r\nclass ReadOnline extends Component {\r\n  state = {\r\n    anchorEl: null,\r\n    read: true,\r\n  };\r\n\r\n  //updater\r\n  onUpdate = (data) => {\r\n    const { entry, customEntry } = data.entry;\r\n\r\n    const appData = {\r\n      ...this.props.entry,\r\n      subject: data.subject,\r\n      entry,\r\n      customEntry,\r\n    };\r\n    this.props.updateEntry(appData);\r\n    this.props.setMsg({ msg: \"entry updated\" });\r\n    $(\"#snackBarTrigger\").trigger(\"click\");\r\n    //this.props.history.push(\"/onlineList/\" + appData.journalId);\r\n    this.props.history.goBack();\r\n    //this.read();\r\n  };\r\n\r\n  //reader\r\n  onDelete = () => {\r\n    this.handleClose();\r\n    this.props.deleteEntry(this.props.entry);\r\n    this.props.setMsg({ msg: \"Deleted!\" });\r\n    $(\"#snackBarTrigger\").trigger(\"click\");\r\n    this.props.history.goBack();\r\n  };\r\n\r\n  handleMenu = (event) => {\r\n    this.setState({ anchorEl: event.currentTarget });\r\n  };\r\n  handleClose = () => {\r\n    this.setState({ anchorEl: null });\r\n  };\r\n\r\n  read = () => {\r\n    this.handleClose();\r\n    this.setState((prevState) => {\r\n      return { read: !prevState.read };\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { subject, entry, journalId } = this.props.entry;\r\n    const journal = { journalId };\r\n    const { read } = this.state;\r\n    const open = Boolean(this.state.anchorEl);\r\n    return (\r\n      <div>\r\n        {read ? (\r\n          <ReadFinal\r\n            edit={this.read}\r\n            open={open}\r\n            anchorEl={this.state.anchorEl}\r\n            handleMenu={this.handleMenu}\r\n            handleClose={this.handleClose}\r\n            onTrashClick={this.onDelete}\r\n            entry={this.props.entry}\r\n          />\r\n        ) : (\r\n          <>\r\n            <Writer\r\n              subject={subject}\r\n              journal={journal}\r\n              entry={entry}\r\n              newEntry={this.onUpdate}\r\n              journalId={this.props.journalId}\r\n            />\r\n            <ReadBtn read={this.read} />\r\n          </>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nReadOnline.propTypes = {\r\n  entry: PropTypes.object.isRequired,\r\n  deleteEntry: PropTypes.func.isRequired,\r\n  setMsg: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default compose(\r\n  withRouter,\r\n  connect(mapStateToProps, mapDispatchToProps),\r\n  firestoreConnect((props) => {\r\n    //console.log(props);\r\n    const { journalId, auth, entryId } = props;\r\n    const entryListener = {\r\n      collection: \"users\",\r\n      doc: auth?.uid,\r\n      subcollections: [\r\n        {\r\n          collection: \"journals\",\r\n          doc: journalId,\r\n          subcollections: [\r\n            {\r\n              collection: \"entries\",\r\n              doc: entryId,\r\n              //orderBy: [\"createdAt\", \"desc\"],\r\n              //limit: 10,\r\n            },\r\n          ],\r\n          storeAs: \"entry\",\r\n        },\r\n      ],\r\n      storeAs: \"entry\",\r\n    };\r\n    return entryId ? [entryListener] : [];\r\n  }),\r\n  Decrypter\r\n)(ReadOnline);\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { decrypt } from \"../component/enctype\";\r\nimport MainBackdrop from \"../component/backdrop\";\r\n\r\nexport default function Decrypter(WrappedComponent) {\r\n  function HOC(props) {\r\n    const [state, setState] = useState({ entry: {} });\r\n    const { entry, history, email } = props;\r\n\r\n    useEffect(() => {\r\n      if (!entry.entryId) {\r\n        return history.goBack();\r\n      }\r\n      decryptEntry(entry);\r\n      //console.log(entry, \"entry changed\");\r\n      async function decryptEntry() {\r\n        const customEntry = entry?.customEntry;\r\n        if (!!customEntry) {\r\n          const decrypted = await decrypt(\r\n            entry.entry,\r\n            email,\r\n            entry.customEntry\r\n          );\r\n          setState({ entry: { ...entry, entry: decrypted } });\r\n          //return decrypted;\r\n        } else {\r\n          setState({ entry });\r\n        }\r\n      }\r\n    }, [entry, email, history]);\r\n\r\n    //console.log(state);\r\n    const entryId = state.entry.entryId;\r\n\r\n    return (\r\n      <>\r\n        {entryId ? (\r\n          <WrappedComponent {...props} entry={state.entry} />\r\n        ) : (\r\n          <MainBackdrop status={!!entryId} />\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n  return HOC;\r\n}\r\n","import React from \"react\";\r\nimport { Typography, Button, Box } from \"@material-ui/core\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport PasswordInput from \"../component/passwordInput\";\r\n\r\nconst KeyFormComponent = (props) => {\r\n  const { register, errors, watch } = props;\r\n\r\n  return (\r\n    <>\r\n      <Box p={1}>\r\n        <Typography variant=\"h6\">Set a pin!</Typography>\r\n      </Box>\r\n\r\n      <PasswordInput\r\n        name=\"pin\"\r\n        register={register}\r\n        registerObject={{\r\n          required: {\r\n            value: true,\r\n            message: \"please provide a pin\",\r\n          },\r\n          minLength: {\r\n            value: 4,\r\n            message: \"your pin must be atleast 4 characters long\",\r\n          },\r\n        }}\r\n        errors={errors}\r\n      />\r\n\r\n      <PasswordInput\r\n        name=\"confirmPin\"\r\n        register={register}\r\n        registerObject={{\r\n          validate: (value) => value === watch(\"pin\") || \"pins do not match\",\r\n          required: {\r\n            value: true,\r\n            message: \"please confirm your pin\",\r\n          },\r\n        }}\r\n        errors={errors}\r\n      />\r\n\r\n      <Box p={1}>\r\n        <Button\r\n          endIcon={<FontAwesomeIcon icon=\"save\" />}\r\n          component=\"button\"\r\n          type=\"submit\"\r\n        >\r\n          save\r\n        </Button>\r\n      </Box>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default KeyFormComponent;\r\n","import React from \"react\";\r\nimport KeyFormComponent from \"./keyFormComponent\";\r\nimport PropTypes from \"prop-types\";\r\nimport FormHOC from \"../component/formHOC\";\r\n\r\nfunction KeyForm(props) {\r\n  const { register, errors, watch } = props;\r\n  return (\r\n    <>\r\n      <KeyFormComponent register={register} errors={errors} watch={watch} />\r\n    </>\r\n  );\r\n}\r\n\r\nKeyForm.propTypes = {\r\n  onFormSubmit: PropTypes.func.isRequired,\r\n  register: PropTypes.func.isRequired,\r\n  errors: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default FormHOC(KeyForm);\r\n","import React from \"react\";\r\nimport db from \"../component/dbaccess\";\r\nimport KeyForm from \"./keyForm\";\r\nimport { connect } from \"react-redux\";\r\nimport { checkKey } from \"../component/redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { encryptPin } from \"../component/enctype\";\r\nimport { Card, CardContent, Grid } from \"@material-ui/core\";\r\nimport { useStyles } from \"../theme/theme\";\r\n\r\nconst mapStateToPinSignup = (state) => {\r\n  return state;\r\n};\r\n\r\nconst mapDispatchToPinSignup = (dispatch) => ({\r\n  checkKey: (data) => dispatch(checkKey(data)),\r\n});\r\n\r\nfunction PinSignupConstruct(props) {\r\n  const history = useHistory();\r\n  const classes = useStyles();\r\n  const pinSignup = async (data) => {\r\n    //console.log(data);\r\n    const hashedPin = await encryptPin(data.pin);\r\n    const keyData = {\r\n      pin: hashedPin,\r\n    };\r\n    db.pin\r\n      .clear()\r\n      .then(() => {\r\n        return db.pin.add(keyData);\r\n      })\r\n      .then((val) => {\r\n        //console.log({ val, done: \"done\" });\r\n        props.checkKey({ storageKey: true });\r\n        history.push(\"/security\");\r\n      })\r\n      .catch((e) => {\r\n        console.log(e);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Grid container>\r\n        <Grid item xs={12} justify=\"center\" alignContent=\"center\" container>\r\n          <Card className={`${classes.card} ${classes.cardAuth}`}>\r\n            <CardContent className=\" mx-auto\">\r\n              <KeyForm onFormSubmit={pinSignup} />\r\n            </CardContent>\r\n          </Card>\r\n        </Grid>\r\n      </Grid>\r\n    </>\r\n  );\r\n}\r\n\r\nconst PinSignup = connect(\r\n  mapStateToPinSignup,\r\n  mapDispatchToPinSignup\r\n)(PinSignupConstruct);\r\n\r\nexport default PinSignup;\r\n","import React, { Component } from \"react\";\r\nimport PinForm from \"./pinForm\";\r\nimport PinSignup from \"./pinSignup\";\r\nimport $ from \"jquery\";\r\nimport LoginHOC from \"./loginHOC\";\r\n\r\nclass PinChange extends Component {\r\n  state = {\r\n    current: 0,\r\n  };\r\n\r\n  next = async (data) => {\r\n    const { access } = this.props;\r\n    const current = this.state.current + 1;\r\n    access(data)\r\n      .then((val) => {\r\n        if (val === 0) throw new Error(\"Invalid Pin!\");\r\n        return val;\r\n      })\r\n      .then(() => {\r\n        this.setState({ current });\r\n      })\r\n      .catch((err) => {\r\n        this.props.setMsg({ msg: err.message });\r\n        $(\"#snackBarTrigger\").trigger(\"click\");\r\n        console.log(err.message);\r\n      });\r\n  };\r\n\r\n  render() {\r\n    const { current } = this.state;\r\n\r\n    return (\r\n      <>\r\n        {current === 0 && (\r\n          <>\r\n            <PinForm onFormSubmit={this.next} />\r\n          </>\r\n        )}\r\n        {current === 1 && (\r\n          <>\r\n            <PinSignup />\r\n          </>\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LoginHOC(PinChange);\r\n","import React from \"react\";\r\nimport db from \"../component/dbaccess\";\r\nimport { connect } from \"react-redux\";\r\nimport { checkKey, setMsg } from \"../component/redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport PinForm from \"./pinForm\";\r\nimport $ from \"jquery\";\r\nimport { encryptPin } from \"../component/enctype\";\r\n\r\nconst mapStateToProps = (state) => {\r\n  return state;\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  checkKey: (data) => dispatch(checkKey(data)),\r\n  setMsg: (msg) => dispatch(setMsg(msg)),\r\n});\r\n\r\nfunction PinDiscard(props) {\r\n  const history = useHistory();\r\n  const discard = async (data) => {\r\n    const hashedPin = await encryptPin(data.pin);\r\n    db.pin\r\n      .where(\"pin\")\r\n      .equals(hashedPin)\r\n      .count()\r\n      .then((val) => {\r\n        if (val === 0) throw new Error(\"invalid pin\");\r\n        return db.pin.clear();\r\n      })\r\n      .then(() => {\r\n        props.checkKey({ storageKey: false });\r\n        history.push(\"/security\");\r\n      })\r\n      .catch((err) => {\r\n        props.setMsg({ msg: \"Invalid pin!\" });\r\n        $(\"#snackBarTrigger\").trigger(\"click\");\r\n        console.log(err.message);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <PinForm onFormSubmit={discard} />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(PinDiscard);\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nexport default function FormInput(props) {\r\n  const { register, errors, name, type, registerObject, defaultValue } = props;\r\n  return (\r\n    <div className=\"form-group\">\r\n      <label htmlFor={name}>\r\n        <p className=\" my-0 py-0 d-inline text-left\">\r\n          {name} :{\" \"}\r\n          <small className=\"text-danger \">*{errors[name]?.message}</small>\r\n        </p>\r\n      </label>\r\n      <input\r\n        ref={register({\r\n          ...registerObject,\r\n        })}\r\n        type={type}\r\n        name={name}\r\n        className=\"form-control\"\r\n        placeholder={name}\r\n        defaultValue={defaultValue || \"\"}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nFormInput.propTypes = {\r\n  register: PropTypes.func.isRequired,\r\n  errors: PropTypes.object,\r\n  name: PropTypes.string.isRequired,\r\n  type: PropTypes.string.isRequired,\r\n  registerObject: PropTypes.object.isRequired,\r\n};\r\n","import React from \"react\";\r\nimport Spinner from \"../component/spinner\";\r\nimport FormInput from \"../component/formInput\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nfunction LoginFormComponent(props) {\r\n  const { register, errors, status } = props;\r\n\r\n  return (\r\n    <>\r\n      <h4 className=\"card-title\">Please login to continue...</h4>\r\n      <FormInput\r\n        name=\"email\"\r\n        type=\"email\"\r\n        register={register}\r\n        errors={errors}\r\n        registerObject={{\r\n          required: {\r\n            value: true,\r\n            message: \"Please provide an Email!\",\r\n          },\r\n          pattern: {\r\n            value: /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i,\r\n            message: \"Invalid Email Address\",\r\n          },\r\n        }}\r\n      />\r\n      <FormInput\r\n        name=\"password\"\r\n        type=\"password\"\r\n        register={register}\r\n        errors={errors}\r\n        registerObject={{\r\n          required: {\r\n            value: true,\r\n            message: \"Please provide a password!\",\r\n          },\r\n          minLength: {\r\n            value: 8,\r\n            message: \"Password must be atleast 8 characters long!\",\r\n          },\r\n        }}\r\n      />\r\n\r\n      <span className=\"d-inline\">\r\n        <button className=\"btn btn-outline-info my-2\">\r\n          LOGIN {\"  \"}\r\n          <Spinner status={status} />\r\n        </button>\r\n        {\"  \"}\r\n      </span>\r\n    </>\r\n  );\r\n}\r\n\r\nLoginFormComponent.propTypes = {\r\n  register: PropTypes.func.isRequired,\r\n  errors: PropTypes.object.isRequired,\r\n  status: PropTypes.bool,\r\n  msg: PropTypes.string,\r\n};\r\n\r\nexport default LoginFormComponent;\r\n","import React from \"react\";\r\nimport FormHOC from \"../component/formHOC\";\r\nimport LoginFormComponent from \"./loginFormComponent\";\r\n\r\nfunction LoginForm(props) {\r\n  const { register, errors } = props;\r\n  return (\r\n    <>\r\n      <LoginFormComponent register={register} errors={errors} />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default FormHOC(LoginForm);\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport LoginForm from \"./loginForm\";\r\nimport logo from \"../diary144.png\";\r\n\r\nfunction LoginComponent(props) {\r\n  const { status, handleFormSubmit } = props;\r\n\r\n  return (\r\n    <>\r\n      <div className=\"card col-sm-6 col-md-4 mx-auto bg-light \">\r\n        <div className=\"card-body\">\r\n          <h3 className=\"card-title\">Login</h3>\r\n          <img\r\n            src={logo}\r\n            className=\" img-fluid mx-auto d-block card-img-top text-center\"\r\n            style={{ width: \"20%\", height: \"auto\" }}\r\n            alt=\"ComfyPen logo\"\r\n          />\r\n\r\n          <LoginForm status={status} onFormSubmit={handleFormSubmit} />\r\n\r\n          <div className=\"text-center my-2 mx-auto\">\r\n            {/*<Link to=\"/resetPassword\">Forgot password?</Link>{\" \"}*/}\r\n            <p className=\"my-3\">\r\n              Don't have an account? {\"  \"}\r\n              <Link to=\"/signup\">signup...</Link>\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default LoginComponent;\r\n","import React, { useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport { loginAsync } from \"./authRedux\";\r\nimport LoginComponent from \"./loginComponent\";\r\n\r\nconst mapStateToProps = (state) => state;\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  loginAsync: (data) => dispatch(loginAsync(data)),\r\n});\r\n\r\nfunction Login(props) {\r\n  const history = useHistory();\r\n  const handleFormSubmit = (formData) => {\r\n    props.loginAsync(formData);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const { uid } = props.firebase.auth;\r\n    if (uid) history.push(\"/account\");\r\n  }, [props.firebase.auth, history]);\r\n\r\n  const status = props.custom.loading;\r\n  return (\r\n    <>\r\n      <LoginComponent status={status} handleFormSubmit={handleFormSubmit} />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nexport default function FormCheck(props) {\r\n  // console.log(props);\r\n  const { register, name, label, registerObject } = props;\r\n  return (\r\n    <div className=\"form-check\">\r\n      <input\r\n        ref={register({\r\n          ...registerObject,\r\n        })}\r\n        className=\"form-check-input\"\r\n        type=\"checkbox\"\r\n        name={name}\r\n      />\r\n      <label className=\"form-check-label\">{label}</label>\r\n    </div>\r\n  );\r\n}\r\n\r\nFormCheck.propTypes = {\r\n  register: PropTypes.func.isRequired,\r\n  name: PropTypes.string.isRequired,\r\n  label: PropTypes.object,\r\n  registerObject: PropTypes.object.isRequired,\r\n};\r\n","import React from \"react\";\r\nimport Spinner from \"../component/spinner\";\r\nimport { Link } from \"react-router-dom\";\r\nimport FormInput from \"../component/formInput\";\r\nimport FormCheck from \"../component/formCheck\";\r\n\r\nfunction EmailFormComponent(props) {\r\n  const { register, errors, watch, status } = props;\r\n\r\n  return (\r\n    <>\r\n      <FormInput\r\n        name=\"email\"\r\n        type=\"email\"\r\n        register={register}\r\n        errors={errors}\r\n        registerObject={{\r\n          required: { value: true, message: \"please provide an email\" },\r\n          pattern: {\r\n            value: /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i,\r\n            message: \"invalid email address\",\r\n          },\r\n        }}\r\n      />\r\n      <FormCheck\r\n        name=\"read\"\r\n        register={register}\r\n        registerObject={{ required: { value: true } }}\r\n        label={\r\n          <p>\r\n            I have read and agree to the <Link to=\"/terms\"> terms of use</Link>{\" \"}\r\n            and the <Link to=\"/privacy\"> privacy policy</Link>\r\n          </p>\r\n        }\r\n      />\r\n\r\n      <button\r\n        type=\"submit\"\r\n        disabled={!watch(\"read\")}\r\n        className=\"btn btn-outline-info my-3\"\r\n      >\r\n        Check {\"  \"} <Spinner status={status} />\r\n      </button>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default EmailFormComponent;\r\n","import React from \"react\";\r\nimport FormHOC from \"../component/formHOC\";\r\nimport EmailFormComponent from \"./emailFormComponent\";\r\n\r\nfunction EmailForm(props) {\r\n  const { register, errors } = props;\r\n  return (\r\n    <>\r\n      <EmailFormComponent register={register} errors={errors} />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default FormHOC(EmailForm);\r\n","import React from \"react\";\r\nimport Spinner from \"../component/spinner\";\r\nimport FormInput from \"../component/formInput\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nfunction PasswordFormComponent(props) {\r\n  const { register, errors, watch, status, prev } = props;\r\n\r\n  return (\r\n    <>\r\n      <FormInput\r\n        name=\"firstName\"\r\n        type=\"text\"\r\n        register={register}\r\n        errors={errors}\r\n        registerObject={{\r\n          required: { value: true, message: \"please provide a first name\" },\r\n          pattern: {\r\n            value: /^[a-z0-9_., ]+$/i,\r\n            message: \"only numbers and characters allowed\",\r\n          },\r\n        }}\r\n      />\r\n      <FormInput\r\n        name=\"lastName\"\r\n        type=\"text\"\r\n        register={register}\r\n        errors={errors}\r\n        registerObject={{\r\n          required: { value: true, message: \"please provide a first name\" },\r\n          pattern: {\r\n            value: /^[a-z0-9_., ]+$/i,\r\n            message: \"only numbers and characters allowed\",\r\n          },\r\n        }}\r\n      />\r\n      <FormInput\r\n        name=\"password\"\r\n        type=\"password\"\r\n        register={register}\r\n        errors={errors}\r\n        registerObject={{\r\n          required: { value: true, message: \"please provide a password\" },\r\n          minLength: {\r\n            value: 8,\r\n            message: \"the password must be atleast 8 characters long\",\r\n          },\r\n          pattern: {\r\n            value: /^(?:[a-z]+[0-9]|[0-9]+[a-z])[a-z0-9]*$/i,\r\n            message: \"please include at least one character and number\",\r\n          },\r\n        }}\r\n      />\r\n      <FormInput\r\n        name=\"confirmPassword\"\r\n        type=\"password\"\r\n        register={register}\r\n        errors={errors}\r\n        registerObject={{\r\n          validate: (value) =>\r\n            value === watch(\"password\") || \"passwords do not match\",\r\n          required: { value: true, message: \"please confirm your password\" },\r\n        }}\r\n      />\r\n\r\n      <div className=\"btn-group\">\r\n        <button\r\n          type=\"button\"\r\n          className=\"btn btn-outline-info my-3\"\r\n          onClick={prev}\r\n        >\r\n          Back\r\n        </button>\r\n        <button type=\"submit\" className=\"btn btn-outline-info my-3\">\r\n          Signup\r\n          <Spinner status={status} />\r\n        </button>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nPasswordFormComponent.propTypes = {\r\n  register: PropTypes.func.isRequired,\r\n  errors: PropTypes.object.isRequired,\r\n  watch: PropTypes.func.isRequired,\r\n  status: PropTypes.bool,\r\n  msg: PropTypes.string,\r\n  prev: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default PasswordFormComponent;\r\n","import React from \"react\";\r\nimport FormHOC from \"../component/formHOC\";\r\nimport PasswordFormComponent from \"./passwordFormComponent\";\r\n\r\nfunction PasswordForm(props) {\r\n  const { register, errors, watch, prev } = props;\r\n  return (\r\n    <>\r\n      <PasswordFormComponent\r\n        register={register}\r\n        errors={errors}\r\n        watch={watch}\r\n        prev={prev}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default FormHOC(PasswordForm);\r\n","import React from \"react\";\r\nimport Snackbar from \"@material-ui/core/Snackbar\";\r\nimport { connect } from \"react-redux\";\r\n\r\nconst mapStateToSnackBar = (state) => {\r\n  const msg = state.custom.msg;\r\n  return { msg };\r\n};\r\n\r\nfunction SnackBarConstruct(props) {\r\n  const [open, setOpen] = React.useState(false);\r\n  const handleClick = () => {\r\n    setOpen(true);\r\n  };\r\n  const handleClose = (event, reason) => {\r\n    if (reason === \"clickaway\") {\r\n      return;\r\n    }\r\n    setOpen(false);\r\n  };\r\n  return (\r\n    <div>\r\n      {\" \"}\r\n      <button\r\n        style={{ display: \"none\" }}\r\n        id=\"snackBarTrigger\"\r\n        onClick={handleClick}\r\n      >\r\n        Open simple snackbar\r\n      </button>{\" \"}\r\n      <Snackbar\r\n        anchorOrigin={{ vertical: \"bottom\", horizontal: \"left\" }}\r\n        open={open}\r\n        autoHideDuration={6000}\r\n        onClose={handleClose}\r\n        message={props.msg}\r\n      />{\" \"}\r\n    </div>\r\n  );\r\n}\r\n\r\nconst SnackBar = connect(mapStateToSnackBar)(SnackBarConstruct);\r\n\r\nexport default SnackBar;\r\n","import React from \"react\";\r\nimport logo from \"../diary144.png\";\r\nimport EmailForm from \"./emailForm\";\r\nimport PasswordForm from \"./passwordForm\";\r\nimport SnackBar from \"../component/snackBar\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nfunction SignupComponent(props) {\r\n  console.log(props);\r\n  const {\r\n    current,\r\n    validated,\r\n    email,\r\n    next,\r\n    prev,\r\n    validateMail,\r\n    onFormSubmit,\r\n  } = props;\r\n\r\n  return (\r\n    <>\r\n      <div className=\"card col-sm-9 col-md-7 col-lg-6 bg-light my-3 mx-auto \">\r\n        <div className=\"card-body\">\r\n          <img\r\n            src={logo}\r\n            className=\" img-fluid mx-auto d-block card-img-top text-center\"\r\n            style={{ width: \"20%\", height: \"auto\" }}\r\n            alt=\"ComfyPen logo\"\r\n          />\r\n          <div>\r\n            {current === 0 && (\r\n              <EmailForm\r\n                next={next}\r\n                prev={prev}\r\n                validated={validated}\r\n                onFormSubmit={validateMail}\r\n              />\r\n            )}\r\n          </div>\r\n          <div>\r\n            {current === 1 && (\r\n              <>\r\n                <h6>{email}</h6>\r\n                <PasswordForm prev={prev} onFormSubmit={onFormSubmit} />\r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <SnackBar />\r\n    </>\r\n  );\r\n}\r\n\r\nSignupComponent.propTypes = {\r\n  current: PropTypes.number.isRequired,\r\n  validated: PropTypes.bool,\r\n  email: PropTypes.string,\r\n  next: PropTypes.func.isRequired,\r\n  prev: PropTypes.func.isRequired,\r\n  validateMail: PropTypes.func.isRequired,\r\n  onFormSubmit: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default SignupComponent;\r\n","import React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { compose } from \"recompose\";\r\nimport { signupAsync, checkEmailAsync, next, prev } from \"./authRedux\";\r\nimport { setMsg } from \"../component/redux\";\r\nimport SignupComponent from \"./signupComponent\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst mapStateToProps = (state) => {\r\n  const { current, validated, email } = state.custom;\r\n  const auth = state.firebase.auth;\r\n  return { email, auth, current, validated };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  signupAsync: (data) => dispatch(signupAsync(data)),\r\n  checkEmailAsync: (email) => dispatch(checkEmailAsync(email)),\r\n  setMsg: (msg) => dispatch(setMsg(msg)),\r\n  next: () => dispatch(next()),\r\n  prev: () => dispatch(prev()),\r\n});\r\n\r\nfunction Signup(props) {\r\n  const {\r\n    email,\r\n    current,\r\n    validated,\r\n    auth,\r\n    history,\r\n    next,\r\n    prev,\r\n    setMsg,\r\n    signupAsync,\r\n    checkEmailAsync,\r\n  } = props;\r\n\r\n  useEffect(() => {\r\n    if (auth.uid) {\r\n      history.push(\"/\");\r\n    }\r\n  }, [auth, history]);\r\n\r\n  const validateMail = (data) => {\r\n    checkEmailAsync({ email: data.email });\r\n  };\r\n\r\n  const onFormSubmit = (formData) => {\r\n    setMsg({ msg: \"\" });\r\n    const signupData = {\r\n      ...formData,\r\n      email,\r\n    };\r\n    signupAsync(signupData);\r\n    //console.log(signupData);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <SignupComponent\r\n        email={email}\r\n        current={current}\r\n        validated={validated}\r\n        next={next}\r\n        prev={prev}\r\n        validateMail={validateMail}\r\n        onFormSubmit={onFormSubmit}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nSignup.propTypes = {\r\n  email: PropTypes.string,\r\n  current: PropTypes.number.isRequired,\r\n  validated: PropTypes.bool.isRequired,\r\n  auth: PropTypes.object.isRequired,\r\n  history: PropTypes.object.isRequired,\r\n  next: PropTypes.func.isRequired,\r\n  prev: PropTypes.func.isRequired,\r\n  setMsg: PropTypes.func.isRequired,\r\n  signupAsync: PropTypes.func.isRequired,\r\n  checkEmailAsync: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default compose(\r\n  withRouter,\r\n  connect(mapStateToProps, mapDispatchToProps)\r\n)(Signup);\r\n","import React from \"react\";\r\nimport clsx from \"clsx\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\n\r\nimport {\r\n  List,\r\n  Divider,\r\n  ListItemIcon,\r\n  ListItem,\r\n  ListItemText,\r\n  ListItemAvatar,\r\n  Avatar,\r\n} from \"@material-ui/core\";\r\n\r\nexport default function MyDrawer(props) {\r\n  const { anchor, classes, toggleDrawer, name } = props;\r\n\r\n  return (\r\n    <div\r\n      className={clsx(classes.list, {\r\n        [classes.fullList]: anchor === \"top\" || anchor === \"bottom\",\r\n      })}\r\n      role=\"presentation\"\r\n      onClick={toggleDrawer(anchor, false)}\r\n      onKeyDown={toggleDrawer(anchor, false)}\r\n    >\r\n      <List>\r\n        <ListItem button>\r\n          <ListItemAvatar>\r\n            <Avatar>{name.initials}</Avatar>\r\n          </ListItemAvatar>\r\n\r\n          <ListItemText primary={name.firstName + \" \" + name.lastName} />\r\n        </ListItem>\r\n        <Divider />\r\n        <Link to=\"/\" style={{ color: \"#000\" }}>\r\n          <ListItem button>\r\n            <ListItemIcon>\r\n              <FontAwesomeIcon icon=\"home\" />\r\n            </ListItemIcon>\r\n            <ListItemText primary=\"home\" />\r\n          </ListItem>\r\n        </Link>\r\n\r\n        <Link to=\"/account\" style={{ color: \"#000\" }}>\r\n          <ListItem button>\r\n            <ListItemIcon>\r\n              <FontAwesomeIcon icon=\"user\" />\r\n            </ListItemIcon>\r\n            <ListItemText primary=\"account\" />\r\n          </ListItem>\r\n        </Link>\r\n\r\n        <Link to=\"/security\" style={{ color: \"#000\" }}>\r\n          <ListItem button>\r\n            <ListItemIcon>\r\n              <FontAwesomeIcon icon=\"user-shield\" />\r\n            </ListItemIcon>\r\n            <ListItemText primary=\"privacy\" />\r\n          </ListItem>\r\n        </Link>\r\n\r\n        <Link to=\"/theme\" style={{ color: \"#000\" }}>\r\n          <ListItem button>\r\n            <ListItemIcon>\r\n              <FontAwesomeIcon icon=\"paint-brush\" />\r\n            </ListItemIcon>\r\n            <ListItemText primary=\"theme\" />\r\n          </ListItem>\r\n        </Link>\r\n      </List>\r\n    </div>\r\n  );\r\n}\r\n","function applyTheme(theme) {\r\n  return (dispatch, getState, { getFirestore }) => {\r\n    // dispatch(loading());\r\n    const userId = getState().firebase.auth.uid;\r\n    //console.log({ theme, userId });\r\n    //console.log({ userId, entryId, journalId, entryData });\r\n    const firestore = getFirestore();\r\n    firestore\r\n      .collection(\"users\")\r\n      .doc(userId)\r\n      .set(theme, { merge: true })\r\n      .then((val) => {\r\n        //console.log(\"theme applied\");\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n}\r\n\r\nexport { applyTheme };\r\n","import React from \"react\";\r\nimport { IconButton } from \"@material-ui/core\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nexport default function ThemeTypeComponent(props) {\r\n  const { toggleTheme, darkMode } = props;\r\n  return (\r\n    <IconButton\r\n      onClick={toggleTheme}\r\n      color=\"inherit\"\r\n      aria-label=\"theme type toggler\"\r\n    >\r\n      <FontAwesomeIcon icon={darkMode ? \"sun\" : \"moon\"} />\r\n    </IconButton>\r\n  );\r\n}\r\n\r\nThemeTypeComponent.propTypes = {\r\n  toggleTheme: PropTypes.func.isRequired,\r\n  darkMode: PropTypes.bool,\r\n};\r\n","import React from \"react\";\r\nimport { applyTheme } from \"./themeRedux\";\r\nimport { connect } from \"react-redux\";\r\nimport ThemeTypeComponent from \"./themeTypeComponent\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst mapStateToProps = (state) => {\r\n  const { profile } = state.firebase;\r\n  return { profile };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  applyTheme: (theme) => dispatch(applyTheme(theme)),\r\n});\r\n\r\nfunction ThemeType(props) {\r\n  //console.log(props);\r\n  const { profile, applyTheme } = props;\r\n  const darkMode = profile.theme?.darkMode;\r\n  const toggleTheme = () => {\r\n    const theme = profile.theme;\r\n    const newTheme = {\r\n      ...theme,\r\n      darkMode: !theme?.darkMode,\r\n    };\r\n    //console.log(profile);\r\n    applyTheme({ theme: newTheme });\r\n  };\r\n\r\n  return <ThemeTypeComponent toggleTheme={toggleTheme} darkMode={darkMode} />;\r\n}\r\n\r\nThemeType.propTypes = {\r\n  applyTheme: PropTypes.func.isRequired,\r\n  profile: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ThemeType);\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Spinner from \"../component/spinner\";\r\nimport ThemeType from \"../theme/themeType\";\r\n\r\nimport {\r\n  Menu as MaterialMenu,\r\n  AppBar,\r\n  Toolbar,\r\n  Typography,\r\n  IconButton,\r\n  MenuItem,\r\n} from \"@material-ui/core\";\r\nimport { MenuOutlined, MoreOutlined } from \"@ant-design/icons\";\r\n\r\nexport default function NavBody(props) {\r\n  const history = useHistory();\r\n  const {\r\n    classes,\r\n    handleClose,\r\n    handleMenu,\r\n    anchorEl,\r\n    open,\r\n    toggleDrawer,\r\n    loading,\r\n    name,\r\n  } = props;\r\n\r\n  return (\r\n    <>\r\n      <div className={classes.root}>\r\n        {\" \"}\r\n        <AppBar position=\"fixed\">\r\n          {\" \"}\r\n          <Toolbar className={classes.toolBar}>\r\n            {\" \"}\r\n            <IconButton\r\n              edge=\"start\"\r\n              onClick={toggleDrawer(\"left\", true)}\r\n              className={classes.menuButton}\r\n              color=\"inherit\"\r\n              aria-label=\"menu\"\r\n            >\r\n              {\" \"}\r\n              <MenuOutlined />\r\n              {\"  \"}\r\n            </IconButton>{\" \"}\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              {\" \"}\r\n              ComfyPen-\r\n              <span style={{ textTransform: \"uppercase\" }}>\r\n                {name.initials}\r\n              </span>\r\n            </Typography>{\" \"}\r\n            <Spinner status={loading} />\r\n            <ThemeType />\r\n            <div>\r\n              {\" \"}\r\n              <IconButton\r\n                aria-label=\"account of current user\"\r\n                aria-controls=\"menu-appbar\"\r\n                aria-haspopup=\"true\"\r\n                onClick={handleMenu}\r\n                color=\"inherit\"\r\n              >\r\n                {\" \"}\r\n                <MoreOutlined />{\" \"}\r\n              </IconButton>{\" \"}\r\n              <MaterialMenu\r\n                id=\"menu-appbar\"\r\n                anchorEl={anchorEl}\r\n                anchorOrigin={{ vertical: \"top\", horizontal: \"right\" }}\r\n                keepMounted\r\n                transformOrigin={{ vertical: \"top\", horizontal: \"right\" }}\r\n                open={open}\r\n                onClose={handleClose}\r\n              >\r\n                {\" \"}\r\n                <span onClick={() => history.goBack()}>\r\n                  <MenuItem onClick={handleClose}>\r\n                    {\"  \"}Back{\"   \"}\r\n                  </MenuItem>\r\n                </span>\r\n              </MaterialMenu>{\" \"}\r\n            </div>{\" \"}\r\n          </Toolbar>{\" \"}\r\n        </AppBar>{\" \"}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { firestoreConnect } from \"react-redux-firebase\";\r\nimport { compose } from \"redux\";\r\nimport { connect } from \"react-redux\";\r\nimport MyDrawer from \"./drawer\";\r\nimport NavBody from \"./navBody\";\r\nimport { SwipeableDrawer } from \"@material-ui/core\";\r\nimport { useStyles } from \"../theme/theme\";\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n  const path = ownProps.location.pathname\r\n    .split(\"/\")\r\n    .filter((val) => val !== \"\");\r\n  const loading = state.custom.loading;\r\n  const journalId = path[0] === \"onlineList\" ? path[1] : \"\";\r\n  const journals = state.firestore.data.journals;\r\n  const journal = journals ? journals[journalId] : {};\r\n  const { auth, profile } = state.firebase;\r\n  const nameArray = auth.displayName ? auth.displayName.split(\" \") : [];\r\n  const { firstName, lastName } = profile;\r\n  const letter1 = auth.uid\r\n    ? nameArray[0]\r\n      ? nameArray[0].charAt(0)\r\n      : firstName.charAt(0)\r\n    : \"\";\r\n  const letter2 = auth.uid\r\n    ? nameArray[1]\r\n      ? nameArray[1].charAt(0)\r\n      : lastName.charAt(0)\r\n    : \"\";\r\n  const name = {\r\n    firstName: nameArray[0] || firstName || \"\",\r\n    lastName: nameArray[1] || lastName || \"\",\r\n    initials: letter1 + letter2,\r\n  };\r\n  //console.log({ nameArray, name });\r\n\r\n  return { auth, profile, journalId, journal, loading, name };\r\n};\r\n\r\nfunction MainNav(props) {\r\n  const classes = useStyles();\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  const open = Boolean(anchorEl);\r\n  const [state, setState] = React.useState(false);\r\n  let popMenu;\r\n\r\n  const toggleDrawer = (anchor, open) => (event) => {\r\n    if (\r\n      event &&\r\n      event.type === \"keydown\" &&\r\n      (event.key === \"Tab\" || event.key === \"Shift\")\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    setState(open);\r\n  };\r\n\r\n  const handleMenu = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const { journal, loading, name } = props;\r\n\r\n  return (\r\n    <>\r\n      <NavBody\r\n        journal={journal}\r\n        open={open}\r\n        anchorEl={anchorEl}\r\n        handleClose={handleClose}\r\n        handleMenu={handleMenu}\r\n        classes={classes}\r\n        toggleDrawer={toggleDrawer}\r\n        popMenu={popMenu}\r\n        loading={loading}\r\n        name={name}\r\n      ></NavBody>\r\n      <SwipeableDrawer\r\n        anchor=\"left\"\r\n        open={state}\r\n        onClose={toggleDrawer(\"left\", false)}\r\n        onOpen={toggleDrawer(\"left\", true)}\r\n      >\r\n        <MyDrawer\r\n          classes={classes}\r\n          toggleDrawer={toggleDrawer}\r\n          anchor=\"left\"\r\n          name={name}\r\n        />\r\n      </SwipeableDrawer>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default compose(\r\n  withRouter,\r\n  connect(mapStateToProps),\r\n  firestoreConnect((props) => {\r\n    const { auth } = props;\r\n    const journalListener = {\r\n      collection: \"users\",\r\n      doc: auth?.uid,\r\n      subcollections: [\r\n        { collection: \"journals\", orderBy: [\"journalName\", \"desc\"] },\r\n      ],\r\n      storeAs: \"journals\",\r\n    };\r\n\r\n    return auth?.uid ? [journalListener] : [];\r\n  })\r\n)(MainNav);\r\n","import React from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { isLoaded, isEmpty } from \"react-redux-firebase\";\r\n\r\n// A wrapper for <Route> that redirects to the login\r\n// screen if you're not yet authenticated or if auth is not\r\n// yet loaded\r\nfunction Protected({ children, ...rest }) {\r\n  const auth = useSelector((state) => state.firebase.auth);\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={({ location }) =>\r\n        isLoaded(auth) && !isEmpty(auth) ? (\r\n          children\r\n        ) : (\r\n          <Redirect\r\n            to={{\r\n              pathname: \"/account\",\r\n              state: { from: location },\r\n            }}\r\n          />\r\n        )\r\n      }\r\n    />\r\n  );\r\n}\r\n\r\nexport default Protected;\r\n","import React from \"react\";\r\nimport { SketchPicker } from \"react-color\";\r\nimport {\r\n  Button,\r\n  ButtonGroup,\r\n  Grid,\r\n  Paper,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\n\r\nexport default function ColorSelectorComponent(props) {\r\n  const {\r\n    title,\r\n    body,\r\n    toggler,\r\n    color,\r\n    toggleState,\r\n    classes,\r\n    saveColor,\r\n    onChangeComplete,\r\n    reset,\r\n  } = props;\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Grid container justify=\"center\" alignItems=\"center\" direction=\"column\">\r\n        <Grid item xs={12} md={10} lg={8} container>\r\n          <Paper style={{ width: \"100%\" }} className={classes.paper}>\r\n            <Typography variant=\"h5\">{title}</Typography>\r\n            <Typography variant=\"body1\">{body}</Typography>\r\n            <Button\r\n              onClick={toggler}\r\n              variant=\"contained\"\r\n              endIcon={\r\n                <FontAwesomeIcon\r\n                  icon={toggleState ? \"angle-up\" : \"angle-down\"}\r\n                />\r\n              }\r\n              className={`${classes.button} ${classes.margin}`}\r\n            >\r\n              {toggleState ? (\r\n                <Typography variant=\"body1\">close</Typography>\r\n              ) : (\r\n                <Typography variant=\"body1\">open color selector</Typography>\r\n              )}\r\n            </Button>\r\n          </Paper>\r\n        </Grid>\r\n      </Grid>\r\n      {toggleState && (\r\n        <Grid\r\n          container\r\n          justify=\"center\"\r\n          alignItems=\"center\"\r\n          className={classes.root}\r\n        >\r\n          <Grid\r\n            item\r\n            xs={12}\r\n            alignItems=\"center\"\r\n            className={classes.root}\r\n            container\r\n          >\r\n            <SketchPicker color={color} onChangeComplete={onChangeComplete} />\r\n          </Grid>\r\n          <Grid\r\n            item\r\n            xs={12}\r\n            alignItems=\"center\"\r\n            className={classes.root}\r\n            container\r\n          >\r\n            <ButtonGroup className={classes.margin}>\r\n              <Button\r\n                onClick={saveColor}\r\n                variant=\"contained\"\r\n                endIcon={<FontAwesomeIcon icon=\"save\" />}\r\n              >\r\n                Save changes\r\n              </Button>\r\n\r\n              <Button\r\n                onClick={reset}\r\n                variant=\"contained\"\r\n                endIcon={<FontAwesomeIcon icon=\"undo\" />}\r\n              >\r\n                Reset\r\n              </Button>\r\n            </ButtonGroup>\r\n          </Grid>\r\n        </Grid>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { useStyles } from \"./theme\";\r\nimport ColorSelectorComponent from \"./colorSelectorComponent\";\r\n\r\nexport default function ColorSelector(props) {\r\n  const { title, body, toggler, save, toggleState, initialColor } = props;\r\n\r\n  const [color, setColor] = useState(initialColor);\r\n\r\n  const onChangeComplete = (color) => {\r\n    //console.log(color);\r\n    setColor(color.hex);\r\n  };\r\n\r\n  const saveColor = () => {\r\n    //console.log(color);\r\n    save(color);\r\n  };\r\n\r\n  const reset = () => {\r\n    save(\"\");\r\n  };\r\n\r\n  useEffect(() => {\r\n    setColor(initialColor);\r\n  }, [initialColor]);\r\n\r\n  const classes = useStyles({ color });\r\n  return (\r\n    <>\r\n      <ColorSelectorComponent\r\n        title={title}\r\n        body={body}\r\n        toggler={toggler}\r\n        toggleState={toggleState}\r\n        classes={classes}\r\n        saveColor={saveColor}\r\n        onChangeComplete={onChangeComplete}\r\n        reset={reset}\r\n        color={color}\r\n      />\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport ColorSelector from \"./colorSelector\";\r\nimport { Button, Grid } from \"@material-ui/core\";\r\nimport { useStyles } from \"./theme\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\n\r\nexport default function ThemeColor(props) {\r\n  const {\r\n    savePrimaryColor,\r\n    saveSecondaryColor,\r\n    togglePrimarySelector,\r\n    toggleSecondarySelector,\r\n    applyChanges,\r\n    primaryToggleState,\r\n    secondaryToggleState,\r\n    primary,\r\n    secondary,\r\n  } = props;\r\n  const classes = useStyles();\r\n  return (\r\n    <>\r\n      <ColorSelector\r\n        initialColor={primary}\r\n        save={savePrimaryColor}\r\n        toggler={togglePrimarySelector}\r\n        toggleState={primaryToggleState}\r\n        title=\"Primary color\"\r\n        body=\"This is the main color of the application and it is used in all the main areas like the navigation bar.\"\r\n      />\r\n      <ColorSelector\r\n        initialColor={secondary}\r\n        save={saveSecondaryColor}\r\n        toggler={toggleSecondarySelector}\r\n        toggleState={secondaryToggleState}\r\n        title=\"Secondary color\"\r\n        body=\"This is the secondary color of the application and it is used for the minor parts like buttons\"\r\n      />\r\n      <Grid container className={classes.root}>\r\n        <Button\r\n          className={classes.margin}\r\n          endIcon={<FontAwesomeIcon icon=\"paint-brush\" />}\r\n          onClick={applyChanges}\r\n        >\r\n          apply\r\n        </Button>\r\n      </Grid>\r\n    </>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { withTheme } from \"@material-ui/core/styles\";\r\nimport { compose } from \"recompose\";\r\nimport ThemeColorComponent from \"./themeColorComponent\";\r\nimport { applyTheme } from \"./themeRedux\";\r\nimport { connect } from \"react-redux\";\r\n\r\nconst mapStateToProps = (state) => {\r\n  const { profile } = state.firebase;\r\n  return { profile };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  applyTheme: (theme) => dispatch(applyTheme(theme)),\r\n});\r\n\r\nfunction ThemeColor(props) {\r\n  const { primary, secondary } = props.theme.palette;\r\n  const profile = props.profile;\r\n\r\n  const [state, setState] = useState({\r\n    primaryColor: \"\",\r\n    secondaryColor: \"\",\r\n    primaryToggleState: false,\r\n    secondaryToggleState: false,\r\n  });\r\n\r\n  useEffect(() => {\r\n    setState((state) => {\r\n      //console.log(state);\r\n      return {\r\n        ...state,\r\n        primaryColor: primary.main,\r\n        secondaryColor: secondary.main,\r\n      };\r\n    });\r\n  }, [primary.main, secondary.main]);\r\n\r\n  const savePrimaryColor = (color) => {\r\n    //console.log(color);\r\n    setState({\r\n      ...state,\r\n      primaryColor: color,\r\n      primaryToggleState: !state.primaryToggleState,\r\n    });\r\n  };\r\n\r\n  const saveSecondaryColor = (color) => {\r\n    setState({\r\n      ...state,\r\n      secondaryColor: color,\r\n      secondaryToggleState: !state.secondaryToggleState,\r\n    });\r\n  };\r\n\r\n  const togglePrimarySelector = () => {\r\n    const { primaryToggleState, secondaryToggleState } = state;\r\n    setState({\r\n      ...state,\r\n      primaryToggleState: !primaryToggleState,\r\n      secondaryToggleState: !primaryToggleState\r\n        ? secondaryToggleState\r\n          ? !secondaryToggleState\r\n          : secondaryToggleState\r\n        : secondaryToggleState,\r\n    });\r\n  };\r\n\r\n  const toggleSecondarySelector = () => {\r\n    const { primaryToggleState, secondaryToggleState } = state;\r\n\r\n    setState({\r\n      ...state,\r\n      secondaryToggleState: !secondaryToggleState,\r\n      primaryToggleState: !secondaryToggleState\r\n        ? primaryToggleState\r\n          ? !primaryToggleState\r\n          : primaryToggleState\r\n        : primaryToggleState,\r\n    });\r\n  };\r\n\r\n  const applyChanges = () => {\r\n    //console.log(state);\r\n    const theme = profile.theme;\r\n    const { primaryColor, secondaryColor } = state;\r\n    props.applyTheme({\r\n      theme: { ...theme, primary: primaryColor, secondary: secondaryColor },\r\n    });\r\n  };\r\n\r\n  const { primaryColor, secondaryColor } = state;\r\n  return (\r\n    <>\r\n      <ThemeColorComponent\r\n        savePrimaryColor={savePrimaryColor}\r\n        saveSecondaryColor={saveSecondaryColor}\r\n        togglePrimarySelector={togglePrimarySelector}\r\n        toggleSecondarySelector={toggleSecondarySelector}\r\n        applyChanges={applyChanges}\r\n        primaryToggleState={state.primaryToggleState}\r\n        secondaryToggleState={state.secondaryToggleState}\r\n        primary={primaryColor}\r\n        secondary={secondaryColor}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default compose(\r\n  withTheme,\r\n  connect(mapStateToProps, mapDispatchToProps)\r\n)(ThemeColor);\r\n","import React from \"react\";\r\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\r\nimport Account from \"./account/account\";\r\nimport { ThemeProvider, createMuiTheme, CssBaseline } from \"@material-ui/core\";\r\nimport Security from \"./security/security\";\r\nimport JournalContainer from \"./journalComponent/journalContainer\";\r\nimport Terms from \"./component/terms\";\r\nimport Privacy from \"./component/privacy\";\r\nimport NewEntry from \"./journalStrings/newEntry\";\r\nimport OnlineReader from \"./journalStrings/onlineReader\";\r\nimport Read from \"./journalStrings/read\";\r\nimport PinSignup from \"./security/pinSignup\";\r\nimport PinChange from \"./security/pinChange\";\r\nimport PinDiscard from \"./security/pinDiscard\";\r\nimport Login from \"./account/login\";\r\nimport Signup from \"./account/signup\";\r\nimport MainNav from \"./navs/mainNav\";\r\nimport Protected from \"./component/protected\";\r\nimport SnackBar from \"./component/snackBar\";\r\nimport ThemeColor from \"./theme/themeColor\";\r\n//import { theme } from \"./theme/theme\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { library } from \"@fortawesome/fontawesome-svg-core\";\r\nimport {\r\n  faFolderOpen,\r\n  faEdit,\r\n  faTrashAlt,\r\n  faLockOpen,\r\n  faBookOpen,\r\n  faUserEdit,\r\n  faPenAlt,\r\n  faSave,\r\n  faPlus,\r\n  faTimes,\r\n  faStickyNote,\r\n  faArrowLeft,\r\n  faEllipsisV,\r\n  faCog,\r\n  faHome,\r\n  faKey,\r\n  faUserCog,\r\n  faUserLock,\r\n  faUserShield,\r\n  faUser,\r\n  faBars,\r\n  faUserCircle,\r\n  faBook,\r\n  faCheck,\r\n  faPaintBrush,\r\n  faAngleUp,\r\n  faAngleDown,\r\n  faUndo,\r\n  faSun,\r\n  faMoon,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nimport \"./App.css\";\r\n\r\nlibrary.add(\r\n  faFolderOpen,\r\n  faEdit,\r\n  faTrashAlt,\r\n  faLockOpen,\r\n  faBookOpen,\r\n  faUserEdit,\r\n  faPenAlt,\r\n  faSave,\r\n  faPlus,\r\n  faTimes,\r\n  faStickyNote,\r\n  faArrowLeft,\r\n  faEllipsisV,\r\n  faCog,\r\n  faHome,\r\n  faKey,\r\n  faUserCog,\r\n  faUserLock,\r\n  faUserShield,\r\n  faUser,\r\n  faBars,\r\n  faUserCircle,\r\n  faBook,\r\n  faCheck,\r\n  faPaintBrush,\r\n  faAngleUp,\r\n  faAngleDown,\r\n  faUndo,\r\n  faSun,\r\n  faMoon\r\n);\r\n\r\nconst mapStateToProps = (state) => {\r\n  const { profile } = state.firebase;\r\n  return { profile };\r\n};\r\n\r\nfunction App(props) {\r\n  const primary = props.profile.theme?.primary;\r\n  const secondary = props.profile.theme?.secondary;\r\n  const darkMode = props.profile.theme?.darkMode;\r\n  //console.log(props);\r\n  const theme = createMuiTheme({\r\n    palette: {\r\n      type: darkMode ? \"dark\" : \"light\",\r\n      primary: {\r\n        main: primary || \"#17a2b8\",\r\n      },\r\n      secondary: {\r\n        main: secondary || \"#ffc107\",\r\n      },\r\n    },\r\n\r\n    props: {\r\n      MuiFab: {\r\n        color: \"primary\",\r\n      },\r\n      MuiButton: {\r\n        variant: \"contained\",\r\n        color: \"secondary\",\r\n      },\r\n      MuiButtonGroup: {\r\n        variant: \"contained\",\r\n        color: \"secondary\",\r\n      },\r\n      MuiTextField: {\r\n        size: \"small\",\r\n      },\r\n    },\r\n  });\r\n  return (\r\n    <>\r\n      {\" \"}\r\n      <ThemeProvider theme={theme}>\r\n        <CssBaseline />\r\n        <Router>\r\n          <nav>\r\n            <MainNav />\r\n          </nav>\r\n\r\n          <main style={{ marginBottom: 100 }} className=\" unfixed\">\r\n            <Switch>\r\n              <Protected path=\"/onlineList/:journalId\">\r\n                <OnlineReader />\r\n              </Protected>\r\n\r\n              <Route path=\"/account\" component={Account} />\r\n              <Route path=\"/terms\" component={Terms} />\r\n              <Route path=\"/privacy\" component={Privacy} />\r\n              <Route path=\"/login\" component={Login} />\r\n              <Route path=\"/signup\" component={Signup} />\r\n              <Route path=\"/theme\" component={ThemeColor} />\r\n              <Protected exact path=\"/\">\r\n                <JournalContainer />\r\n              </Protected>\r\n              <Protected path=\"/setPin\">\r\n                <PinSignup />\r\n              </Protected>\r\n              <Protected path=\"/changePin\">\r\n                <PinChange />\r\n              </Protected>\r\n              <Protected path=\"/discardPin\">\r\n                <PinDiscard />\r\n              </Protected>\r\n              <Protected path=\"/security\">\r\n                <Security />\r\n              </Protected>\r\n\r\n              <Protected path=\"/read/:entryId\">\r\n                <Read />\r\n              </Protected>\r\n\r\n              <Protected path=\"/write/:journalId\">\r\n                <NewEntry />\r\n              </Protected>\r\n            </Switch>\r\n          </main>\r\n          <SnackBar />\r\n        </Router>\r\n      </ThemeProvider>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default connect(mapStateToProps)(App);\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { Provider, useSelector } from \"react-redux\";\r\nimport { ReactReduxFirebaseProvider, isLoaded } from \"react-redux-firebase\";\r\nimport { createFirestoreInstance } from \"redux-firestore\";\r\nimport store from \"./component/reduxstore\";\r\nimport firebase from \"./component/fire\";\r\nimport App from \"./App\";\r\nimport MainBackdrop from \"./component/backdrop\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\nimport \"./index.css\";\r\n\r\nconst rrfConfig = {\r\n  userProfile: \"users\",\r\n  useFirestoreForProfile: true, // Firestore for Profile instead of Realtime DB\r\n  // enableClaims: true // Get custom claims along with the profile\r\n};\r\n\r\nconst rrfProps = {\r\n  firebase,\r\n  config: rrfConfig,\r\n  dispatch: store.dispatch,\r\n  createFirestoreInstance, // <- needed if using firestore\r\n};\r\n\r\nfunction AuthIsLoaded({ children }) {\r\n  const auth = useSelector((state) => state.firebase.auth);\r\n  if (!isLoaded(auth)) return <MainBackdrop status={!!auth} />;\r\n  return children;\r\n}\r\n\r\nReactDOM.render(\r\n  //<React.StrictMode>\r\n  <Provider store={store}>\r\n    <ReactReduxFirebaseProvider {...rrfProps}>\r\n      <AuthIsLoaded>\r\n        <App />\r\n      </AuthIsLoaded>\r\n    </ReactReduxFirebaseProvider>\r\n  </Provider>,\r\n  //</React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.register();\r\n"],"sourceRoot":""}
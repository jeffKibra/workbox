(this.webpackJsonpcomfyPen=this.webpackJsonpcomfyPen||[]).push([[0],{193:function(e,t,a){e.exports=a.p+"static/media/diary144.b9be3d1a.png"},439:function(e,t,a){e.exports=a(821)},643:function(e,t){},645:function(e,t){},656:function(e,t){},658:function(e,t){},683:function(e,t){},685:function(e,t){},686:function(e,t){},692:function(e,t){},694:function(e,t){},712:function(e,t){},715:function(e,t){},731:function(e,t){},734:function(e,t){},819:function(e,t,a){},820:function(e,t,a){},821:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(22),c=a.n(o),i=a(8),l=a(46),s=a(120),u=a(80),m=a(406),d=a(13),p={msg:"",securityKey:!1,storageKey:!1,loading:!1,current:0,validated:!1,status:!1,finish:!1,email:"",steps:[{title:"Email",content:"Confirm Email"},{title:"Password",content:"Type in your Password"}]},g=function(){var e,t,a,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,o=arguments.length>1?arguments[1]:void 0;switch(o.type){case"CHECK_EMAIL":return console.log(o),n=o.email,t=!1,e=o.msg,Object(d.a)({},r,{email:n,loading:t,msg:e});case"LOADING":return t=o.loading,Object(d.a)({},r,{loading:t});case"FINISH_LOADING":return e=o.msg,t=o.loading,Object(d.a)({},r,{msg:e,loading:t});case"SET_KEY":var c;return c=!!o.data.pin,Object(d.a)({},r,{securityKey:c});case"NEXT":return a=r.current+1,Object(d.a)({},r,{current:a});case"PREV":return a=r.current-1,Object(d.a)({},r,{current:a});case"CHECK_KEY":var i=o.data.storageKey;return Object(d.a)({},r,{storageKey:i});case"SET_MSG":return e=o.data.msg,Object(d.a)({},r,{msg:e});default:return r}},f=a(10);a(823),a(350),a(622),a(625);f.initializeApp({apiKey:"AIzaSyAHg0P5UCPJQRD4ScEoB1Yw1gS_f4T4xgw",authDomain:"comfy-pen.firebaseapp.com",databaseURL:"https://comfy-pen.firebaseio.com",projectId:"comfy-pen",storageBucket:"comfy-pen.appspot.com",messagingSenderId:"679837636378",appId:"1:679837636378:web:57ced048a1a0a3c508bea3",measurementId:"G-RF7QTHTDX1"}),f.analytics(),f.firestore().enablePersistence().then((function(){console.log("offline data enabled")})).catch((function(e){console.log({errorCode:e.code,errorMessage:e.message}),"failed-precondition"===e.code?alert("To store data for offline availability... please open one tab at a time"):"unimplemented"===e.code&&console.log("your browser does not support offline data caching")}));f.firestore();var h=f.functions(),b=f,E=window&&window.__INITIAL_STATE__,v=Object(u.c)({firebase:l.firebaseReducer,firestore:s.firestoreReducer,custom:g}),y=Object(u.e)(v,E,Object(u.d)(Object(u.a)(m.a.withExtraArgument({getFirebase:l.getFirebase,getFirestore:s.getFirestore})),Object(s.reduxFirestore)(b))),j=a(19),O=a(89);function k(e){return{type:"LOGGED_IN",data:e}}function w(e){return{type:"CHECK_KEY",data:e}}function C(e){return{type:"SET_MSG",data:e}}var x=a(15),N=a(23),S=a(856),F=a(859),I=a(860),T=a(65),A=new(a(408).a)("comfypen");A.version(1).stores({pin:"pin"});var P=A;var D=Object(i.b)((function(e){return{journals:e.firestore.ordered.journals}}))((function(e){var t=Object(n.useState)(!1),a=Object(N.a)(t,2),o=a[0],c=a[1];Object(n.useEffect)((function(){P.pin.count().then((function(e){c(0!==e)}))}),[c]);var i=o?"green":"red",l=o?"check":"times",s=e.journals;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container"},r.a.createElement(S.a,{container:!0,justify:"center",alignContent:"center"},r.a.createElement(S.a,{direction:"column",item:!0,xs:12,sm:10,md:8,justify:"center",alignContent:"center",container:!0},r.a.createElement(F.a,{id:"journals"},r.a.createElement("span",{style:{fontSize:"2rem"}},r.a.createElement(x.a,{icon:"book"}))),r.a.createElement(I.a,null),r.a.createElement(T.a,null,"Account Type: ",r.a.createElement("span",null,"regular")),r.a.createElement(T.a,null,"secured with pin:"," ",r.a.createElement("span",{style:{color:i}},r.a.createElement(x.a,{icon:l}))),r.a.createElement(T.a,null,"Total Journals: ",r.a.createElement("span",null,null===s||void 0===s?void 0:s.length))))))})),B=a(412),M={callbacks:{signInSuccess:function(){return!1}},signInOptions:[b.auth.GoogleAuthProvider.PROVIDER_ID,b.auth.FacebookAuthProvider.PROVIDER_ID,b.auth.EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD]};function L(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(B.StyledFirebaseAuth,{uiConfig:M,firebaseAuth:b.auth()}))}var K=a(9),_=a.n(K),U=a(24),R=a(20),J=a.n(R);function z(e){return{type:"FINISH_LOADING",loading:!1,msg:e}}function V(e){return{type:"LOADING",loading:e}}function q(e,t){return{type:"CHECK_EMAIL",msg:e,email:t}}var W=a(861),G=a(862),H=a(863),Y=a(864),$=a(865),Z=a(827);var X=function(e){var t=e.description,a=e.open,n=e.handleClose,o=e.confirm;return r.a.createElement("div",null,e.children,r.a.createElement(W.a,{open:a,onClose:n,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(G.a,{id:"alert-dialog-title"},"Comfirm action!"),r.a.createElement(H.a,null,r.a.createElement(Y.a,{id:"alert-dialog-description"},t)),r.a.createElement($.a,null,r.a.createElement(Z.a,{onClick:n,color:"primary",autoFocus:!0},"cancel ","    ",r.a.createElement(x.a,{icon:"times"})),r.a.createElement(Z.a,{onClick:o,color:"secondary"},"confirm ","    ",r.a.createElement(x.a,{icon:"check"})))))};function Q(e){var t=r.a.useState(!1),a=Object(N.a)(t,2),n=a[0],o=a[1],c=e.description,i=function(){o(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(X,{open:n,confirm:function(){i(),e.confirm()},handleClose:i,description:c},e.render((function(){o(!0)}))))}var ee=a(866),te=Object(ee.a)((function(e){return{flex:{display:"flex",flexWrap:"wrap",flexGrow:1},vertCenter:{alignContent:"center"},horCenter:{justifyContent:"center"},root:{justifyContent:"center",alignContent:"center",alignItems:"center"},paper:function(t){return{flexDirection:"column",padding:e.spacing(2),margin:e.spacing(2),textAlign:"center",backgroundColor:t.color}},card:{padding:e.spacing(1),margin:e.spacing(2),backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText},cardAuth:{maxWidth:500},fab:{position:"fixed",right:" 5%",bottom:"8%"},readFab:{fontSize:"1.5rem"},cardWidth:{maxWidth:250,height:300},cardActions:{alignSelf:"flex-end"},margin:{margin:e.spacing(1)},error:{backgroundColor:e.palette.error.main},success:{backgroundColor:e.palette.success.main},mainIcon:{fontSize:"10rem",color:e.palette.primary.main},button:function(t){return{background:"linear-gradient(45deg, ".concat(t.color," 30%, ").concat(e.palette.secondary.main," 90% )")}},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},list:{width:250},fullList:{width:"auto"},listRoot:{width:"100%",maxWidth:"100vw",backgroundColor:e.palette.background.paper,position:"relative",overflow:"auto"},listSection:{backgroundColor:"inherit"},listUl:{backgroundColor:"inherit",padding:0},listInline:{display:"inline"},listItem:{cursor:"pointer"}}}));var ae=Object(i.b)((function(e){return e}),(function(e){return{logoutAsync:function(){return e((function(e,t,a){var n=(0,a.getFirebase)();P.pin.clear(),n.auth().signOut()}))}}}))((function(e){var t=Object(O.g)(),a=te();return Object(n.useEffect)((function(){e.firebase.auth.uid||t.push("/account")}),[e.firebase.auth,t]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Q,{title:"Sign-out",description:" Are you sure you want to logout? Please note that this action\r cannot be undone. Your secret pin will also be deleted! Continue!\r ",confirm:function(){e.logoutAsync()},render:function(e){return r.a.createElement(Z.a,{className:a.margin,onClick:e},"sign out")}}))}));function ne(e){var t=e.classes,a=e.firebase,n=a.auth,o=a.profile,c=n.uid,i=n.email,l=n.displayName,s=o.firstName,u=o.lastName;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container-fluid "},r.a.createElement("div",{className:"row mx-auto  text-center"},r.a.createElement("div",{className:"".concat(t.mainIcon,"  col-12 mx-auto my-0  text-center")},r.a.createElement(x.a,{icon:"user-circle"})),r.a.createElement("div",{className:"col-12 mx-auto my-1 text-center"},r.a.createElement("span",null,c?r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,{variant:"h3"},l||s+"  "+u),r.a.createElement(T.a,{variant:"h5"},i),r.a.createElement(D,null),r.a.createElement(ae,null)):r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,{variant:"body1",component:"p"},"Please Sign in below to continue"),r.a.createElement(L,null)))))))}var re=Object(i.b)((function(e){return{firebase:e.firebase}}),(function(e){return{isLogged:function(t){return e(k(t))}}}))((function(e){var t=te(),a=e.firebase;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ne,{classes:t,firebase:a,cards:[{name:"logout",description:"Do a clean up",path:"/logout"}]}))})),oe=a(421),ce=a(890),ie=a(891),le=a(271);var se=function(e){var t=e.storageKey,a=e.isSetCards,n=e.notSetCards,o=e.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,{container:!0,justify:"center",alignContent:"center"},r.a.createElement(S.a,{item:!0,xs:12,className:"".concat(o.mainIcon," ").concat(o.margin," "),justify:"center",alignContent:"center",container:!0},r.a.createElement(x.a,{icon:"user-shield"})),r.a.createElement(S.a,{item:!0,xs:12,sm:10},r.a.createElement(le.a,{className:"".concat(o.card," ")},t?r.a.createElement("div",{className:"text-center mx-auto"},r.a.createElement(T.a,{variant:"h6",component:"h6"},"Your journals are safeguarded with a pin!"),a):r.a.createElement("div",{className:"text-center mx-auto"},r.a.createElement(T.a,{variant:"h6",component:"h6"},"Set a pin to safeguard your journals!"),n)))))};function ue(e){var t=te(),a=e.card,n=a.name,o=a.description,c=a.path;return r.a.createElement(S.a,{container:!0,justify:"center",alignContent:"center"},r.a.createElement(S.a,{item:!0,xs:12,sm:10,md:8,className:t.margin}," ",r.a.createElement(T.a,{variant:"h4"},n),r.a.createElement(T.a,{variant:"body1"},o),r.a.createElement(Z.a,{component:j.b,to:c,className:t.margin},n),r.a.createElement(I.a,null)))}var me=[{name:"set pin",description:"Create a pin to safeguard your entries",path:"/setPin"},{name:"change pin",description:"change your pin",path:"/changePin"},{name:"discard pin",description:"Discard your pin! Please note that your journals will be viewed by anybody",path:"/discardPin"},{name:"Forgot pin",description:"Forgot your pin! Please note that you will have to login again!",path:"/account"}];var de=Object(i.b)((function(e){return e}),(function(e){return{checkKey:function(t){return e(w(t))}}}))((function(e){var t=te(),a=e.checkKey,o=e.custom;Object(n.useEffect)((function(){P.pin.count().then((function(e){a(0===e?{storageKey:!1}:{storageKey:!0})}))}),[a]);var c=o.storageKey,i=me.filter((function(e){return"set pin"!==e.name})),l=me.filter((function(e){return"set pin"===e.name})),s=i.map((function(e,t){return r.a.createElement(ue,{key:t,card:e})})),u=l.map((function(e,t){return r.a.createElement(ue,{key:t,card:e})}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(se,{storageKey:c,isSetCards:s,notSetCards:u,classes:t}))})),pe=a(49),ge=a(50),fe=a(51),he=a(52);function be(e,t){return Ee.apply(this,arguments)}function Ee(){return(Ee=Object(U.a)(_.a.mark((function e(t,a){var n,r,o;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,ye(t,a);case 3:if(n=e.sent,console.log(n),"expired"!==n.value){e.next=17;break}return e.next=8,ve();case 8:return r=e.sent,console.log(r),e.next=12,P.token.clear().then((function(){return P.token.add(r).then((function(){return""!==r.comfy?ye(t,a):{value:!1}}))}));case 12:return o=e.sent,console.log(o),e.abrupt("return",o);case 17:return console.log(n),e.abrupt("return",n);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ve(){return fetch("http://localhost:5000/api/stylus",{method:"POST",headers:new Headers({"content-type":"application/json"}),credentials:"include"}).then((function(e){return e.json()}))}function ye(e,t){return P.token.toArray().then((function(a){console.log(a);var n={};return n="login"===e.submit||"signup"===e.submit||"checkEmail"===e.submit?{headers:new Headers({"content-type":"application/json"}),credentials:"include"}:{headers:new Headers({"content-type":"application/json",Authorization:"Bearer "+a[0].comfy})},fetch("http://localhost:5000/api/".concat(e.submit),Object(d.a)({method:t},n,{body:JSON.stringify(e)})).then((function(e){var t=e.clone();return e.text().then((function(e){console.log(e)})),t.json()}))}))}var je=a(81),Oe=a(867),ke=a(868),we=a(869),Ce=a(870),xe=a(871);var Ne=Object(i.b)(null,(function(e){return{setActiveJournal:function(t){return e({type:"ACTIVE_JOURNAL",data:t})},isLogged:function(t){return e(k(t))}}}))((function(e){var t=te(),a=e.journal,n=a.journalName,o=a.journalDescription,c=a.createdAt,i=a.journalId,l=je(c).format("LL"),s=je(c).format("LTS");return r.a.createElement(r.a.Fragment,null,r.a.createElement(Oe.a,{className:"".concat(t.card," ").concat(t.cardWidth," ").concat(t.flex," mx-auto")},r.a.createElement(ke.a,{title:n,subheader:o}),r.a.createElement(we.a,{className:t.flex},r.a.createElement(T.a,{variant:"body2"},l||"",", ","  "," ",s||""),r.a.createElement(Ce.a,{className:t.cardActions},r.a.createElement(xe.a,{"aria-label":"card action buttons"},r.a.createElement(Z.a,{endIcon:r.a.createElement(x.a,{icon:"folder-open"}),component:j.b,to:"/onlineList/"+i}," ","Open ","  "),r.a.createElement(Z.a,{onClick:e.onEditClick,className:"btn btn-outline-warning"},r.a.createElement(x.a,{icon:"edit"})))))))})),Se=function(e){return e.status?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{role:"status",className:"spinner-border spinner-border-sm"})):""},Fe=a(893),Ie=a(892);var Te=function(e){var t,a,n,o,c=te(),i=e.register,l=e.errors,s=e.status,u=e.btnText,m=e.journalName,d=e.journalDescription,p=e.onFormClose;return r.a.createElement(Oe.a,{className:"".concat(c.card," mx-auto")},r.a.createElement(ke.a,{title:u}),r.a.createElement(we.a,{className:""},r.a.createElement(r.a.Fragment,null,r.a.createElement(Fe.a,{display:"flex",flexDirection:"column",justifyContent:"center",marginBottom:2,p:1},r.a.createElement(Ie.a,{label:"journalName",placeholder:"journalName",name:"journalName",type:"text",inputRef:i({required:{value:!0,message:"please provide a journal name"},pattern:{value:/^[a-z0-9_., ]+$/i,message:"only numbers and characters allowed"},maxLength:{value:20,message:"limited to 20 characters"}}),error:!!(null===(t=l.journalName)||void 0===t?void 0:t.message),helperText:null===(a=l.journalName)||void 0===a?void 0:a.message,defaultValue:m,variant:"outlined"})),r.a.createElement(Fe.a,{display:"flex",flexDirection:"column",justifyContent:"center",p:1,marginBottom:2},r.a.createElement(Ie.a,{label:"journalDescription",placeholder:"journalDescription",name:"journalDescription",type:"text",inputRef:i({required:{value:!0,message:"please provide a journal description"},pattern:{value:/^[a-z0-9_., ]+$/i,message:"only numbers and characters allowed"},maxLength:{value:50,message:"limited to 50 characters"}}),error:!!(null===(n=l.journalDescription)||void 0===n?void 0:n.message),defaultValue:d,helperText:null===(o=l.journalDescription)||void 0===o?void 0:o.message,variant:"outlined"}))),r.a.createElement(Ce.a,null,r.a.createElement(xe.a,{"aria-label":"journalform action buttons"},r.a.createElement(Z.a,{component:"button",type:"submit",startIcon:r.a.createElement(Se,{status:s}),endIcon:r.a.createElement(x.a,{icon:"save"})},u),r.a.createElement(Z.a,{endIcon:r.a.createElement(x.a,{icon:"times"}),onClick:p},"cancel")))))},Ae=a(422);var Pe=function(e){return function(t){var a=Object(Ae.a)({mode:"onChange"}),n=a.register,o=a.errors,c=a.handleSubmit,i=a.watch,l=a.setValue,s=a.getValues;return r.a.createElement("form",{onSubmit:c((function(e,a){a.target.reset(),t.onFormSubmit(e)}))},r.a.createElement(e,Object.assign({},t,{register:n,setValue:l,watch:i,errors:o,getValues:s})))}};var De=Pe((function(e){var t=e.register,a=e.errors,n=e.onFormClose,o=e.btnText,c=e.journalName,i=e.journalDescription;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Te,{register:t,errors:a,onFormClose:n,btnText:o,journalName:c,journalDescription:i}))}));function Be(e){return{type:"FINISH_LOADING",loading:!1,msg:e}}var Me=function(e){Object(he.a)(a,e);var t=Object(fe.a)(a);function a(){var e;Object(pe.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onJournalUpdate=function(t){var a=Object(d.a)({},e.props.journal,{journalName:t.journalName,journalDescription:t.journalDescription});e.props.updateJournal(a),e.props.onFormClose()},e}return Object(ge.a)(a,[{key:"render",value:function(){var e=this.props.journal,t=e.journalName,a=e.journalDescription;return r.a.createElement(De,{journalName:t,journalDescription:a,onFormSubmit:this.onJournalUpdate,onFormClose:this.props.onFormClose,btnText:"Update"})}}]),a}(n.Component),Le=Object(i.b)((function(e){return e}),(function(e){return{setMsg:function(t){return e(C(t))},updateJournal:function(t){return e((a=t,function(e,t,n){var r=n.getFirestore,o=a.journalId,c=t().firebase.auth.uid;r().collection("users").doc(c).collection("journals").doc(o).update(a).then((function(t){e(Be("updated!")),J()("#snackBarTrigger").trigger("click")})).catch((function(t){console.log(t),e(Be("update failed! Please try again later")),J()("#snackBarTrigger").trigger("click")}))}));var a}}}))(Me);var Ke=function(e){var t=e.journal;return e.editFormOpen?r.a.createElement("div",{className:"mx-auto"},r.a.createElement(Le,{journal:t,onFormClose:function(){e.closeForm()}})):r.a.createElement(Ne,{journal:t,onEditClick:function(){e.openForm()},onTrashClick:function(){e.onJournalDelete(t.journalid)}})},_e=function(e){Object(he.a)(a,e);var t=Object(fe.a)(a);function a(){var e;Object(pe.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={editFormOpen:!1,status:!1},e.onJournalDelete=function(t){e.setState({status:!0}),be({journalid:t,submit:"DELETEJOURNAL"},"DELETE").then((function(t){if(!t.value)throw new Error("false value");e.setState({status:!1}),e.props.setMsg({msg:"deleted"}),J()("#snackBarTrigger").trigger("click"),e.props.refreshJournal()})).catch((function(t){e.setState({status:!1}),e.props.setMsg({msg:"deletion failed"}),J()("#snackBarTrigger").trigger("click"),e.props.refreshJournal()}))},e.closeForm=function(){e.setState({editFormOpen:!1})},e.openForm=function(){e.setState({editFormOpen:!0})},e}return Object(ge.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ke,{refreshJournal:this.props.refreshJournal,onJournalDelete:this.onJournalDelete,closeForm:this.closeForm,openForm:this.openForm,editFormOpen:this.state.editFormOpen,journal:this.props.journal}))}}]),a}(n.Component),Ue=Object(i.b)(null,(function(e){return{setMsg:function(t){return e(C(t))}}}))(_e),Re=a(118);var Je=function(e){var t=e.isOpen,a=e.onFormOpen,n=e.onFormClose,o=e.onFormSubmit,c=e.status;return r.a.createElement("div",{className:"mx-auto"},!0===t?r.a.createElement(r.a.Fragment,null,r.a.createElement(De,{journalName:"",journalDescription:"",onFormSubmit:o,onFormClose:n,btnText:"Create"})):r.a.createElement(r.a.Fragment,null,r.a.createElement(Z.a,{onClick:a,endIcon:!0===c?r.a.createElement(Se,{status:c}):r.a.createElement(x.a,{icon:"plus"})},"new Journal"," ")))},ze=function(e){Object(he.a)(a,e);var t=Object(fe.a)(a);function a(){var e;Object(pe.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isOpen:!1},e.onFormOpen=function(){e.setState({isOpen:!0})},e.onFormClose=function(){e.setState({isOpen:!1})},e.onFormSubmit=function(t){var a={journalName:t.journalName,journalDescription:t.journalDescription,journalId:Object(Re.uuid)(),createdAt:(new Date).toISOString(),entries:0};e.props.newJournal(a),e.onFormClose()},e}return Object(ge.a)(a,[{key:"render",value:function(){var e=this.state.isOpen,t=this.props.status;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Je,{isOpen:e,onFormOpen:this.onFormOpen,onFormClose:this.onFormClose,onFormSubmit:this.onFormSubmit,status:t}))}}]),a}(n.Component),Ve=Object(i.b)((function(e){var t=e.firestore;return{status:e.custom.loading,journals:t.ordered.journals}}),(function(e){return{setMsg:function(t){return e(C(t))},newJournal:function(t){return e((a=t,function(e,t,n){var r=n.getFirestore,o=a.journalId,c=t().firebase.auth.uid;r().collection("users").doc(c).collection("journals").doc(o).set(a).then((function(t){e(Be("updated!")),J()("#snackBarTrigger").trigger("click")})).catch((function(t){console.log(t),e(Be("update failed! Please try again later")),J()("#snackBarTrigger").trigger("click")}))}));var a}}}))(ze),qe=a(874),We=a(875),Ge=a(876);function He(e){var t,a,o=e.name,c=e.register,i=e.errors,l=e.registerObject,s=Object(n.useState)(!1),u=Object(N.a)(s,2),m=u[0],p=u[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Fe.a,{display:"flex",flexDirection:"column",justifyContent:"center",p:1,marginBottom:2},r.a.createElement(Ie.a,{label:o,name:o,type:m?"text":"password",variant:"outlined",size:"small",inputRef:c(Object(d.a)({},l)),error:!!(null===(t=i[o])||void 0===t?void 0:t.message),helperText:null===(a=i[o])||void 0===a?void 0:a.message,InputProps:{endAdornment:r.a.createElement(qe.a,{position:"end"},r.a.createElement(F.a,{"aria-label":"toggle password visibility",onClick:function(){p(!m)},onMouseDown:function(e){e.preventDefault()}},m?r.a.createElement(We.a,null):r.a.createElement(Ge.a,null)))}})))}var Ye=function(e){var t=e.register,a=e.errors,n=te();return r.a.createElement(S.a,{container:!0,justify:"center",alignContent:"center"},r.a.createElement(S.a,{item:!0,xs:12,justify:"center",alignContent:"center",container:!0},r.a.createElement(Oe.a,{className:"".concat(n.card," ").concat(n.cardAuth," ").concat(n.margin)},r.a.createElement(we.a,null,r.a.createElement(Fe.a,{display:"flex",p:1}," ",r.a.createElement(T.a,{variant:"h6"}," Enter your pin to continue!")),r.a.createElement(He,{name:"pin",register:t,registerObject:{required:{value:!0,message:"please provide a pin"},minLength:{value:4,message:"your pin must be atleast 4 characters long"}},errors:a}),r.a.createElement(Ce.a,null,r.a.createElement(Z.a,{component:"button",type:"submit"},"continue"))))))};var $e=Pe((function(e){var t=e.register,a=e.errors;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ye,{register:t,errors:a}))})),Ze=a(124),Xe=a.n(Ze),Qe=a(266),et=a.n(Qe),tt=a(88),at=a.n(tt);function nt(e,t,a){return rt.apply(this,arguments)}function rt(){return(rt=Object(U.a)(_.a.mark((function e(t,a,n){var r,o,c,i;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,it(n,a);case 2:return r=e.sent,o=a+n,c=at()(o).toString(),e.next=7,Xe.a.encrypt(t,c).toString();case 7:return i=e.sent,e.next=10,i;case 10:return e.t0=e.sent,e.next=13,r;case 13:return e.t1=e.sent,e.abrupt("return",{entry:e.t0,customEntry:e.t1});case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ot(e,t,a){return ct.apply(this,arguments)}function ct(){return(ct=Object(U.a)(_.a.mark((function e(t,a,n){var r,o,c,i;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,st(n,a);case 2:return n=e.sent,r=a+n,o=at()(r).toString(),c=Xe.a.decrypt(t,o),e.next=8,c.toString(et.a.enc.Utf8);case 8:return i=e.sent,e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function it(e,t){return lt.apply(this,arguments)}function lt(){return(lt=Object(U.a)(_.a.mark((function e(t,a){var n,r,o;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a+a,r=at()(n).toString(),e.next=4,Xe.a.encrypt(t,r).toString();case 4:return o=e.sent,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function st(e,t){return ut.apply(this,arguments)}function ut(){return(ut=Object(U.a)(_.a.mark((function e(t,a){var n,r,o,c;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a+a,r=at()(n).toString(),o=Xe.a.decrypt(t,r),e.next=5,o.toString(et.a.enc.Utf8);case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mt(e){return dt.apply(this,arguments)}function dt(){return(dt=Object(U.a)(_.a.mark((function e(t){var a,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t+".",e.next=3,at()(a).toString();case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var pt=function(e){return{securityKey:e.custom.securityKey,storageKey:e.custom.storageKey}},gt=function(e){return{setKey:function(t){return e(function(e){return{type:"SET_KEY",data:e}}(t))},setMsg:function(t){return e(C(t))}}};function ft(e){var t=function(t){Object(he.a)(n,t);var a=Object(fe.a)(n);function n(){var e;Object(pe.a)(this,n);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(e=a.call.apply(a,[this].concat(r))).access=function(){var t=Object(U.a)(_.a.mark((function t(a){var n;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,mt(a.pin);case 2:return n=t.sent,t.abrupt("return",P.pin.where("pin").equals(n).count().then((function(e){return e})).catch((function(t){e.props.setMsg({msg:t.message}),J()("#snackBarTrigger").trigger("click"),console.log(t.message)})));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(ge.a)(n,[{key:"render",value:function(){return r.a.createElement(e,{access:this.access,setKey:this.props.setKey,setMsg:this.props.setMsg})}}]),n}(n.Component);return Object(i.b)(pt,gt)(t)}var ht=ft((function(e){var t=e.access,a=e.setKey,n=e.setMsg;return r.a.createElement($e,{onFormSubmit:function(e){t(e).then((function(t){if(0===t)throw new Error("Invalin pin");return a(e)})).catch((function(e){n({msg:e.message}),J()("#snackBarTrigger").trigger("click"),console.log(e.message)}))}})}));function bt(e){var t=e.myJournals;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},t),r.a.createElement("div",{className:"row"}," ",r.a.createElement(Ve,null)))}var Et=Object(i.b)((function(e){var t=e.firebase.auth;return{ordered:e.firestore.ordered,auth:t}}))((function(e){var t=e.status,a=e.ordered.journals?e.ordered.journals.map((function(e,t){return r.a.createElement(Ue,{key:t,journal:e})})):[];return e.storageKey?e.securityKey?r.a.createElement(bt,{myJournals:a,status:t}):r.a.createElement(ht,null):r.a.createElement(bt,{myJournals:a,status:t})})),vt=function(e){Object(he.a)(a,e);var t=Object(fe.a)(a);function a(){return Object(pe.a)(this,a),t.apply(this,arguments)}return Object(ge.a)(a,[{key:"componentDidMount",value:function(){var e=this;P.pin.count().then((function(t){0===t?e.props.checkKey({storageKey:!1}):e.props.checkKey({storageKey:!0})}))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.props.custom.storageKey?this.props.custom.securityKey?r.a.createElement(Et,null):r.a.createElement(ht,null):r.a.createElement(Et,null))}}]),a}(n.Component),yt=Object(i.b)((function(e){return e}),(function(e){return{checkKey:function(t){return e(w(t))},journalList:function(t){return e({type:"JOURNAL_LIST",data:t})},isLogged:function(t){return e(k(t))}}}))(vt);var jt=function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"card col-sm-10"},r.a.createElement("div",{className:"card-header"},r.a.createElement(j.b,{className:"btn btn-outline-warning",to:"/signup"},"back")),r.a.createElement("div",{className:"card-body"},r.a.createElement("h3",null,"Terms of Use"),r.a.createElement("p",null,"By using this app,\xa0Comfy Pen, you are agreeing entirely to the terms of use stated herein concerning the use and limitations of the app.\xa0"),r.a.createElement("h3",null,"Usage"),r.a.createElement("p",null,"This app is free to use to an extent upon which future updates and upgrades might see an introduction of premium options that may require the user to pay to use those services/features.\xa0",r.a.createElement("br",null),"For access to the free features, the user must have an account with the app to gain access."),r.a.createElement("h3",null,"Prohibited Uses"),r.a.createElement("p",null,"This app is the property of Finite Creations and as such any leasing, copying, sublicensing, transferring or assigning the app or any information in the app. prohibited. Use for any illegal purposes. ",r.a.createElement("br",null),"Altering, modifying, adapting, reverse engineering, decompiling, disassembling or any attempt to hack this app. ",r.a.createElement("br",null),"Any website is prohibited to imply that it has an association with this app. ",r.a.createElement("br",null),"Violating a other users legal and privacy rights. ",r.a.createElement("br",null),"Using the app to save or transmit any content that could be deemed unlawful, threatening, harrassing, racist, abusive, libelous, pornographic, vulgar, defarmatory, obscene, indecent, or otherwise inappropriate. ",r.a.createElement("br",null),"Breaching or attempting to breach, the app's security systems."," ",r.a.createElement("br",null),"Enabling third parties to violate the terms of use. ",r.a.createElement("br",null),"All users of this web application must be at least 18 years of age or older. ",r.a.createElement("br",null)),r.a.createElement("h3",null,"Service Interruptions and Updates"),r.a.createElement("p",null,"Any service interuptions will be communicated to the users via their email addresses. In case of any service issues, please contact the service provider at comfypen@gmail.com."),r.a.createElement("h3",null,"Term, Termination and Survival"),r.a.createElement("p",null,"This Agreement shall be effective as of the date the User accepts the terms herein or first accesses the Services on this app and shall remain in effect for as long as the User uses any of the services in the application.\xa0"),r.a.createElement("h3",null,"User Data"),r.a.createElement("p",null,"The User should use the app for purposes of which comply to the law and failure to which the company will not be liable to the User's missuse of their data. The app has the right to revoke or restrict the users access to the services offered in the event the User the Terms of Use or any applicable law."),r.a.createElement("h3",null,"Confidentials Information"),r.a.createElement("p",null,"All the information provided by the application including the users data is private and confidentials and should be treated as such. Indemnification and Limitation of Liability In the event that the user violates oany of the Terms of Use or applicable laws, the app will not be responsible whatsoever for any loss or damage on the side of the user."),r.a.createElement("h3",null,"Amendments"),r.a.createElement("p",null,"Any amendments to the Terms of Use will be communicated via email to the User."))))};var Ot=function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"card col-sm-10"},r.a.createElement("div",{className:"card-header"},r.a.createElement(j.b,{className:"btn btn-outline-warning",to:"/signup"},"back")),r.a.createElement("div",{className:"card-body"},r.a.createElement("h3",null," Privacy Statement"),r.a.createElement("p",null,"This app, Comfy Pen is committed to the privacy and safeguarding of private and confidential information to the extent possible, subject to the provisions of the law."),r.a.createElement("h3",null,"Data Collected "),r.a.createElement("p",null,"This app, Comfy Pen, operates on the basis of signing in a user using their email. The email is required for identifying the different users who make use of the app and as such one email can be used by only one user. The email provided by the user is strictly private and will only be used for communicating to the user concerning relevant details of their account. The email will not be shared to any other party. The user is required to fill a web form for registering to the app. Currently, the email received will be stored with the application until such a time that their account is rendered inactive or the user is in violation of terms of use and hence their account gets cancelled. During the use of the app, please not that all data from a user is encrypted before storing to ensure utmost privacy. The app also collects analytics data through google analytics for the purpose tracking the usage of the app. The data is collected mainly by third party cookies from google and as such can be disabled by disabling third party cookies in your browser."),r.a.createElement("h3",null," Change in Privacy Statement."),r.a.createElement("p",null,"This Privacy Statement is the first and was created on 05/29/2020. The statement might change in the future for any reason. Please ensure your review the Privacy Statement each time you use the app. Any significant changes to the privacy policy will be communicated to the users using their email."),r.a.createElement("h3",null,"Other Sites "),r.a.createElement("p",null,"This app may contain links to other external websites operated by third parties and hence are not subject to this privacy statement. We provide the links for your convenience, but we do not review, control or monitor the privacy practices operated by other websites. Please ensure you review the privacy policies of third party websites as we are not liable to your any business dealings with them."),r.a.createElement("h3",null," Queries"),r.a.createElement("p",null,"For any questions or comments about this Privacy Policy, please contact us using our official email: comfypen@gmail.com"))))},kt=a(100),wt=a.n(kt),Ct=a(269),xt=a(878),Nt=a(897),St=a(877);function Ft(e){var t=Object(n.useState)(null),a=Object(N.a)(t,2),o=a[0],c=a[1],i=e.render,l=e.children,s=Boolean(o),u=s?"simple-popper":void 0;return r.a.createElement("div",null,i((function(e){c(o?null:e.currentTarget)})),r.a.createElement(St.a,{style:{width:500,maxWidth:"80%",zIndex:10},id:u,open:s,anchorEl:o},r.a.createElement(Oe.a,null,r.a.createElement(we.a,null,l))))}var It=a(879);var Tt=function(e){var t,a,n,o=te(),c=e.status,i=e.subject,l=e.entry,s=e.register,u=e.errors,m=e.journalId,p=e.getValues,g=e.checked,f=e.changeView,h=e.onEntryChange,b=e.init,E=e.mobileInit;return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,{container:!0,justify:"center",alignContent:"center"},r.a.createElement(S.a,{item:!0,xs:10,sm:9,md:7,justify:"center",alignContent:"center",container:!0},r.a.createElement(Ie.a,{className:o.margin,label:"subject",inputRef:s({required:{value:!0,message:"please provide a subject"}}),type:"text",name:"subject",placeholder:"subject",helperText:null===(t=u.subject)||void 0===t?void 0:t.message,error:!!(null===(a=u.subject)||void 0===a?void 0:a.message),defaultValue:i,fullWidth:!0})),r.a.createElement(S.a,{item:!0,xs:10,sm:9,md:7,justify:"center",alignContent:"center",container:!0},r.a.createElement(xt.a,{control:r.a.createElement(Nt.a,{inputProps:{"aria-label":"mobile mode toggle"},name:"mobile",onChange:f,checked:g}),label:"desktop-mode"}),r.a.createElement(Ft,{render:function(e){return r.a.createElement(It.a,{color:"primary",onClick:e,cursor:"pointer"})}},r.a.createElement(T.a,null,"This setting only works for mobile devices. If you want more power in editing, select the desktop mode. It however comes at the cost of not being able to paste into the editor. If you want to be able to paste, please use the mobile version by disabling the desktop mode.")))),r.a.createElement(S.a,{container:!0,justify:"center",alignContent:"center"},r.a.createElement(S.a,{item:!0,xs:12,sm:10,md:8},r.a.createElement("div",{className:o.margin},g&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ct.a,{id:m,init:Object(d.a)({},b),initialValue:l,value:p("entry"),onEditorChange:h})),!g&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ct.a,{id:m,init:Object(d.a)({},E),initialValue:l,value:p("entry"),onEditorChange:h})),r.a.createElement(T.a,{variant:"body2",color:"error"},null===(n=u.entry)||void 0===n?void 0:n.message)),r.a.createElement(Z.a,{component:"button",type:"submit",className:o.margin,"aria-controls":"save-Button",endIcon:r.a.createElement(x.a,{icon:"save"})},"Save ","  ",r.a.createElement(Se,{status:c})))))};var At=Pe((function(e){var t=te(),a=e.status,o=e.subject,c=e.entry,i=e.register,l=e.errors,s=e.setValue,u=e.journalId,m=e.getValues,p=Object(n.useState)(!1),g=Object(N.a)(p,2),f=g[0],h=g[1];Object(n.useEffect)((function(){i("entry",{required:{value:!0,message:"entry field cannot be empty"}})}),[i]),Object(n.useEffect)((function(){s("entry",c)}),[c,s]);var b={menubar:!0},E={height:"500",placeholder:"type here...",plugins:["advlist autolink lists link image charmap print preview hr","pagebreak spellchecker nonbreaking anchor","table emoticons template wordcount","searchreplace visualblocks visualchars fullscreen","insertdatetime media paste code help autosave"],menu:{favs:{title:"myFavorite",items:"emoticons spellchecker"}},toolbar:"undo redo | restoredraft insertdatetime | formatselect | bold italic forecolor backcolor | hr pagebreak nonbreaking table | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | emoticons charmap removeformat | searchreplace fullscreen preview print | help",menubar:"fav file edit view insert format",mobile:b,autosave_restore_when_empty:!0},v=Object(d.a)(Object(d.a)({},E),{},{mobile:Object(d.a)(Object(d.a)({},b),{},{theme:"mobile"})}),y=!!u;return r.a.createElement(r.a.Fragment,null,y&&r.a.createElement(Tt,{register:i,entry:c,journalId:u,getValues:m,status:a,subject:o,classes:t,errors:l,checked:f,changeView:function(e){h(e.target.checked)},onEntryChange:function(e){s("entry",e)},mobileInit:v,init:E}),r.a.createElement(Se,{status:!y}))})),Pt=a(53);var Dt=Object(Pt.a)(O.h,Object(i.b)((function(e,t){return{auth:e.firebase.auth}})))((function(e){var t=e.entry,a=e.subject,n=e.auth,o=e.newEntry,c=e.status,i=e.journalId,l=function(){var e=Object(U.a)(_.a.mark((function e(t){var a,r,c,i,l;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(Re.uuid)(),r=n.email,c=t.entry,i=t.subject,c=wt()(c),e.next=6,nt(c,r,a);case 6:c=e.sent,l={subject:wt()(i),entry:c},o(l);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(At,{journalId:i,status:c,entry:t,subject:a,onFormSubmit:l}))})),Bt=a(880),Mt=function(e){var t=te();return r.a.createElement(Bt.a,{onClick:e.read,className:"".concat(t.fab," ").concat(t.readFab),"aria-controls":"write-button"},r.a.createElement(x.a,{icon:"book-open"}))};var Lt=Object(Pt.a)(O.h,Object(i.b)((function(e,t){var a=e.firebase.auth.uid,n=t.match.params.journalId,r=e.firestore.data.journals;return{journal:r?r[n]:{},userId:a,journalId:n}}),(function(e){return{addEntry:function(t){return e((a=t,function(e,t,n){var r=(0,n.getFirestore)(),o=t().firebase.auth.uid,c=a.journalId,i=a.entryId;r.collection("users").doc(o).collection("journals").doc(c).collection("entries").doc(i).set(a,{merge:!0}).then((function(){e(Be("data saved")),J()("#snackBarTrigger").trigger("click")})).catch((function(t){e(Be("error saving")),J()("#snackBarTrigger").trigger("click"),console.log(t)}))}));var a},setMsg:function(t){return e(C(t))}}})))((function(e){var t=e.journal,a=e.journalId,n=e.setMsg,o=e.userId,c=Object(O.g)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Dt,{journalId:a,journal:t,subject:"",entry:"",newEntry:function(a){var r=a.entry,c=r.entry,i=r.customEntry,l=Object(Re.uuid)(),s={userId:o,customEntry:i,subject:wt()(a.subject),entry:c,journalId:t.journalId,entryId:l,createdAt:(new Date).toISOString()};e.addEntry(s),n({msg:"Saved!"}),J()("#snackBarTrigger").trigger("click")}}),r.a.createElement(Mt,{read:function(){return c.goBack()}}))})),Kt=a(828),_t=a(881),Ut=a(898),Rt=a(882),Jt=a(873),zt=a(883),Vt=a(884);var qt=Object(Pt.a)(O.h,Object(i.b)((function(e){return e})))((function(e){var t=te(),a=e.entries,n=e.journal,o=e.match.params.journalId,c=a.map((function(a,n){var c=a.subject,i=a.createdAt,l=a.entryId,s=je(i).format("LL"),u=je(i).format("LTS");return r.a.createElement(j.b,{to:{pathname:"/read/"+o+":"+l,state:{from:e.location}},key:n,style:{color:"#000",textDecoration:"none"}},r.a.createElement(Kt.a,{className:t.listItem,alignItems:"flex-start"},r.a.createElement(_t.a,null,r.a.createElement(Ut.a,null,c.charAt(0))),r.a.createElement(Rt.a,{primary:c,secondary:r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,{component:"span",variant:"caption",className:t.listInline},"".concat(s," - ").concat(u)))})),r.a.createElement(I.a,{variant:"inset",component:"li"}))}));return r.a.createElement("div",{className:"container"},r.a.createElement(Jt.a,{className:t.listRoot},r.a.createElement(zt.a,null,r.a.createElement(Vt.a,{badgeContent:a.length||0,color:"primary"},r.a.createElement(T.a,{variant:"subtitle1"},n.journalName?n.journalName:"My Notes"))),r.a.createElement(I.a,{component:"li"}),c))}));var Wt=Object(Pt.a)(O.h,Object(i.b)((function(e,t){var a=t.match.params.journalId,n=e.firebase.auth,r=e.firestore.data.journals,o=r?r[a]:{},c=e.firestore.ordered.entries;return{journal:o,entries:c||[],auth:n,journalId:a}})),Object(l.firestoreConnect)((function(e){var t=e.journalId,a=e.auth,n={collection:"users",doc:null===a||void 0===a?void 0:a.uid,subcollections:[{collection:"journals",doc:t,subcollections:[{collection:"entries",orderBy:["createdAt","desc"]}],storeAs:"entries"}],storeAs:"entries"};return t?[n]:[]})))((function(e){var t=e.match.params.journalId,a=e.history,n=e.entries,o=e.journal,c=te();return r.a.createElement(r.a.Fragment,null,r.a.createElement(qt,{journal:o,entries:n}),r.a.createElement(Bt.a,{onClick:function(){a.push("/write/"+t)},className:c.fab,"aria-controls":"write-Link"},r.a.createElement(x.a,{icon:"pen-alt"})))})),Gt=a(423),Ht=a(885),Yt=a(900);var $t=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Q,{confirm:function(){e.onTrashClick()},title:"delete",description:"Are you sure you want to delete this entry? Please note that this\r action cannot be undone!",render:function(e){return r.a.createElement("span",{onClick:e},"delete")}}))};function Zt(e){var t=e.anchorEl,a=e.handleMenu,n=e.handleClose,o=e.open,c=e.onTrashClick,i=e.edit;return r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:a,color:"inherit"}," ",r.a.createElement(Yt.a,null)," ")," ",r.a.createElement(Gt.a,{id:"menu-appbar",anchorEl:t,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:o,onClose:n}," ",r.a.createElement(Ht.a,{onClick:i},"edit")," ",r.a.createElement(Ht.a,{onClick:n},r.a.createElement($t,{onTrashClick:c}))," ")," ")}var Xt=function(e){var t=e.entry,a=t.subject,n=t.entry,o=t.createdAt,c=je(o).format("LL"),i=je(o).format("LTS");return r.a.createElement("div",{className:"container"},r.a.createElement(le.a,{style:{minHeight:"80vh"}},r.a.createElement(Fe.a,{display:"flex",flexDirection:"column",m:1},r.a.createElement(Fe.a,{display:"flex",padding:2,alignItems:"center"},r.a.createElement(Fe.a,{display:"flex",flexGrow:1,flexDirection:"column"},r.a.createElement(T.a,{variant:"h5"},a),r.a.createElement(T.a,{variant:"caption"},"".concat(c," ").concat(i))),r.a.createElement(Zt,e)),r.a.createElement(I.a,null),r.a.createElement(Fe.a,{padding:2},r.a.createElement("div",{dangerouslySetInnerHTML:{__html:wt()(n)}})))))},Qt=a(826),ea=a(886),ta=Object(ee.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));var aa=function(e){var t=ta();return r.a.createElement("div",null," ",r.a.createElement(Qt.a,{className:t.backdrop,open:e.status}," ",r.a.createElement(ea.a,{color:"inherit"})," ")," ")};var na=function(e){Object(he.a)(a,e);var t=Object(fe.a)(a);function a(){var e;Object(pe.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={anchorEl:null,read:!0},e.onUpdate=function(t){var a=t.entry,n=a.entry,r=a.customEntry,o=Object(d.a)(Object(d.a)({},e.props.entry),{},{subject:t.subject,entry:n,customEntry:r});e.props.updateEntry(o),e.props.setMsg({msg:"entry updated"}),J()("#snackBarTrigger").trigger("click"),e.props.history.goBack()},e.onDelete=function(){e.handleClose(),e.props.deleteEntry(e.props.entry),e.props.setMsg({msg:"Deleted!"}),J()("#snackBarTrigger").trigger("click"),e.props.history.goBack()},e.handleMenu=function(t){e.setState({anchorEl:t.currentTarget})},e.handleClose=function(){e.setState({anchorEl:null})},e.read=function(){e.handleClose(),e.setState((function(e){return{read:!e.read}}))},e}return Object(ge.a)(a,[{key:"render",value:function(){var e=this.props.entry,t=e.subject,a=e.entry,n={journalId:e.journalId},o=this.state.read,c=Boolean(this.state.anchorEl);return r.a.createElement("div",null,o?r.a.createElement(Xt,{edit:this.read,open:c,anchorEl:this.state.anchorEl,handleMenu:this.handleMenu,handleClose:this.handleClose,onTrashClick:this.onDelete,entry:this.props.entry}):r.a.createElement(r.a.Fragment,null,r.a.createElement(Dt,{subject:t,journal:n,entry:a,newEntry:this.onUpdate,journalId:this.props.journalId}),r.a.createElement(Mt,{read:this.read})))}}]),a}(n.Component),ra=Object(Pt.a)(O.h,Object(i.b)((function(e,t){var a=e.firebase.auth,n=t.match.params.entryId.split(":"),r=Object(N.a)(n,2),o=r[0],c=r[1],i=e.firebase.auth.email,l=e.firestore.data.entries;return{entry:l?l[c]:{},email:i,entryId:c,journalId:o,auth:a,state:e}}),(function(e){return{updateEntry:function(t){return e((a=t,function(e,t,n){var r=n.getFirestore,o=a.entryId,c=a.journalId,i=t().firebase.auth.uid;r().collection("users").doc(i).collection("journals").doc(c).collection("entries").doc(o).update(a).then((function(t){e(Be("updated!")),J()("#snackBarTrigger").trigger("click")})).catch((function(t){console.log(t),e(Be("update failed! Please try again later")),J()("#snackBarTrigger").trigger("click")}))}));var a},deleteEntry:function(t){return e((a=t,function(e,t,n){var r=n.getFirestore,o=a.entryId,c=a.journalId,i=t().firebase.auth.uid;r().collection("users").doc(i).collection("journals").doc(c).collection("entries").doc(o).delete().then((function(t){e(Be("deleted!")),J()("#snackBarTrigger").trigger("click")})).catch((function(t){console.log(t),e(Be("deletion failed! Please try again later")),J()("#snackBarTrigger").trigger("click")}))}));var a},setMsg:function(t){return e(C(t))}}})),Object(l.firestoreConnect)((function(e){var t=e.journalId,a=e.auth,n=e.entryId,r={collection:"users",doc:null===a||void 0===a?void 0:a.uid,subcollections:[{collection:"journals",doc:t,subcollections:[{collection:"entries",doc:n}],storeAs:"entry"}],storeAs:"entry"};return n?[r]:[]})),(function(e){return function(t){var a=Object(n.useState)({entry:{}}),o=Object(N.a)(a,2),c=o[0],i=o[1],l=t.entry,s=t.history,u=t.email;Object(n.useEffect)((function(){if(!l.entryId)return s.goBack();function e(){return(e=Object(U.a)(_.a.mark((function e(){var t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===l||void 0===l?void 0:l.customEntry)){e.next=8;break}return e.next=4,ot(l.entry,u,l.customEntry);case 4:t=e.sent,i({entry:Object(d.a)({},l,{entry:t})}),e.next=9;break;case 8:i({entry:l});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(l)}),[l,u,s]);var m=c.entry.entryId;return r.a.createElement(r.a.Fragment,null,m?r.a.createElement(e,Object.assign({},t,{entry:c.entry})):r.a.createElement(aa,{status:!!m}))}}))(na),oa=function(e){var t=e.register,a=e.errors,n=e.watch;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Fe.a,{p:1},r.a.createElement(T.a,{variant:"h6"},"Set a pin!")),r.a.createElement(He,{name:"pin",register:t,registerObject:{required:{value:!0,message:"please provide a pin"},minLength:{value:4,message:"your pin must be atleast 4 characters long"}},errors:a}),r.a.createElement(He,{name:"confirmPin",register:t,registerObject:{validate:function(e){return e===n("pin")||"pins do not match"},required:{value:!0,message:"please confirm your pin"}},errors:a}),r.a.createElement(Fe.a,{p:1},r.a.createElement(Z.a,{endIcon:r.a.createElement(x.a,{icon:"save"}),component:"button",type:"submit"},"save")))};var ca=Pe((function(e){var t=e.register,a=e.errors,n=e.watch;return r.a.createElement(r.a.Fragment,null,r.a.createElement(oa,{register:t,errors:a,watch:n}))}));var ia=Object(i.b)((function(e){return e}),(function(e){return{checkKey:function(t){return e(w(t))}}}))((function(e){var t=Object(O.g)(),a=te(),n=function(){var a=Object(U.a)(_.a.mark((function a(n){var r,o;return _.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,mt(n.pin);case 2:r=a.sent,o={pin:r},P.pin.clear().then((function(){return P.pin.add(o)})).then((function(a){e.checkKey({storageKey:!0}),t.push("/security")})).catch((function(e){console.log(e)}));case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,{container:!0},r.a.createElement(S.a,{item:!0,xs:12,justify:"center",alignContent:"center",container:!0},r.a.createElement(Oe.a,{className:"".concat(a.card," ").concat(a.cardAuth)},r.a.createElement(we.a,{className:" mx-auto"},r.a.createElement(ca,{onFormSubmit:n}))))))})),la=ft(function(e){Object(he.a)(a,e);var t=Object(fe.a)(a);function a(){var e;Object(pe.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={current:0},e.next=function(){var t=Object(U.a)(_.a.mark((function t(a){var n,r;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.props.access,r=e.state.current+1,n(a).then((function(e){if(0===e)throw new Error("Invalid Pin!");return e})).then((function(){e.setState({current:r})})).catch((function(t){e.props.setMsg({msg:t.message}),J()("#snackBarTrigger").trigger("click"),console.log(t.message)}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(ge.a)(a,[{key:"render",value:function(){var e=this.state.current;return r.a.createElement(r.a.Fragment,null,0===e&&r.a.createElement(r.a.Fragment,null,r.a.createElement($e,{onFormSubmit:this.next})),1===e&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ia,null)))}}]),a}(n.Component));var sa=Object(i.b)((function(e){return e}),(function(e){return{checkKey:function(t){return e(w(t))},setMsg:function(t){return e(C(t))}}}))((function(e){var t=Object(O.g)(),a=function(){var a=Object(U.a)(_.a.mark((function a(n){var r;return _.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,mt(n.pin);case 2:r=a.sent,P.pin.where("pin").equals(r).count().then((function(e){if(0===e)throw new Error("invalid pin");return P.pin.clear()})).then((function(){e.checkKey({storageKey:!1}),t.push("/security")})).catch((function(t){e.setMsg({msg:"Invalid pin!"}),J()("#snackBarTrigger").trigger("click"),console.log(t.message)}));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement($e,{onFormSubmit:a}))}));function ua(e){var t,a=e.register,n=e.errors,o=e.name,c=e.type,i=e.registerObject,l=e.defaultValue;return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:o},r.a.createElement("p",{className:" my-0 py-0 d-inline text-left"},o," :"," ",r.a.createElement("small",{className:"text-danger "},"*",null===(t=n[o])||void 0===t?void 0:t.message))),r.a.createElement("input",{ref:a(Object(d.a)({},i)),type:c,name:o,className:"form-control",placeholder:o,defaultValue:l||""}))}var ma=function(e){var t=e.register,a=e.errors,n=e.status;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",{className:"card-title"},"Please login to continue..."),r.a.createElement(ua,{name:"email",type:"email",register:t,errors:a,registerObject:{required:{value:!0,message:"Please provide an Email!"},pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i,message:"Invalid Email Address"}}}),r.a.createElement(ua,{name:"password",type:"password",register:t,errors:a,registerObject:{required:{value:!0,message:"Please provide a password!"},minLength:{value:8,message:"Password must be atleast 8 characters long!"}}}),r.a.createElement("span",{className:"d-inline"},r.a.createElement("button",{className:"btn btn-outline-info my-2"},"LOGIN ","  ",r.a.createElement(Se,{status:n})),"  "))};var da=Pe((function(e){var t=e.register,a=e.errors;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ma,{register:t,errors:a}))})),pa=a(193),ga=a.n(pa);var fa=function(e){var t=e.status,a=e.handleFormSubmit;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card col-sm-6 col-md-4 mx-auto bg-light "},r.a.createElement("div",{className:"card-body"},r.a.createElement("h3",{className:"card-title"},"Login"),r.a.createElement("img",{src:ga.a,className:" img-fluid mx-auto d-block card-img-top text-center",style:{width:"20%",height:"auto"},alt:"ComfyPen logo"}),r.a.createElement(da,{status:t,onFormSubmit:a}),r.a.createElement("div",{className:"text-center my-2 mx-auto"},r.a.createElement("p",{className:"my-3"},"Don't have an account? ","  ",r.a.createElement(j.b,{to:"/signup"},"signup..."))))))};var ha=Object(i.b)((function(e){return e}),(function(e){return{loginAsync:function(t){return e((a=t,function(e,t,n){var r=n.getFirebase;e(V(!0)),e(C({msg:""}));var o=r(),c=a.email,i=a.password;o.auth().signInWithEmailAndPassword(c,i).then((function(t){t.user,e(z("login successful!")),J()("#snackBarTrigger").trigger("click")})).catch((function(t){var a,n=t.code,r=t.message;console.log({errorCode:n,errorMessage:r}),a="auth/user-not-found"===t.code||"auth/wrong-password"===t.code?"Invalid username or password!":"Network error!",e(z(a)),J()("#snackBarTrigger").trigger("click")}))}));var a}}}))((function(e){var t=Object(O.g)();Object(n.useEffect)((function(){e.firebase.auth.uid&&t.push("/account")}),[e.firebase.auth,t]);var a=e.custom.loading;return r.a.createElement(r.a.Fragment,null,r.a.createElement(fa,{status:a,handleFormSubmit:function(t){e.loginAsync(t)}}))}));function ba(e){var t=e.register,a=e.name,n=e.label,o=e.registerObject;return r.a.createElement("div",{className:"form-check"},r.a.createElement("input",{ref:t(Object(d.a)({},o)),className:"form-check-input",type:"checkbox",name:a}),r.a.createElement("label",{className:"form-check-label"},n))}var Ea=function(e){var t=e.register,a=e.errors,n=e.watch,o=e.status;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ua,{name:"email",type:"email",register:t,errors:a,registerObject:{required:{value:!0,message:"please provide an email"},pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i,message:"invalid email address"}}}),r.a.createElement(ba,{name:"read",register:t,registerObject:{required:{value:!0}},label:r.a.createElement("p",null,"I have read and agree to the ",r.a.createElement(j.b,{to:"/terms"}," terms of use")," ","and the ",r.a.createElement(j.b,{to:"/privacy"}," privacy policy"))}),r.a.createElement("button",{type:"submit",disabled:!n("read"),className:"btn btn-outline-info my-3"},"Check ","  "," ",r.a.createElement(Se,{status:o})))};var va=Pe((function(e){var t=e.register,a=e.errors;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ea,{register:t,errors:a}))}));var ya=function(e){var t=e.register,a=e.errors,n=e.watch,o=e.status,c=e.prev;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ua,{name:"firstName",type:"text",register:t,errors:a,registerObject:{required:{value:!0,message:"please provide a first name"},pattern:{value:/^[a-z0-9_., ]+$/i,message:"only numbers and characters allowed"}}}),r.a.createElement(ua,{name:"lastName",type:"text",register:t,errors:a,registerObject:{required:{value:!0,message:"please provide a first name"},pattern:{value:/^[a-z0-9_., ]+$/i,message:"only numbers and characters allowed"}}}),r.a.createElement(ua,{name:"password",type:"password",register:t,errors:a,registerObject:{required:{value:!0,message:"please provide a password"},minLength:{value:8,message:"the password must be atleast 8 characters long"},pattern:{value:/^(?:[a-z]+[0-9]|[0-9]+[a-z])[a-z0-9]*$/i,message:"please include at least one character and number"}}}),r.a.createElement(ua,{name:"confirmPassword",type:"password",register:t,errors:a,registerObject:{validate:function(e){return e===n("password")||"passwords do not match"},required:{value:!0,message:"please confirm your password"}}}),r.a.createElement("div",{className:"btn-group"},r.a.createElement("button",{type:"button",className:"btn btn-outline-info my-3",onClick:c},"Back"),r.a.createElement("button",{type:"submit",className:"btn btn-outline-info my-3"},"Signup",r.a.createElement(Se,{status:o}))))};var ja=Pe((function(e){var t=e.register,a=e.errors,n=e.watch,o=e.prev;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ya,{register:t,errors:a,watch:n,prev:o}))})),Oa=a(895);var ka=Object(i.b)((function(e){return{msg:e.custom.msg}}))((function(e){var t=r.a.useState(!1),a=Object(N.a)(t,2),n=a[0],o=a[1];return r.a.createElement("div",null," ",r.a.createElement("button",{style:{display:"none"},id:"snackBarTrigger",onClick:function(){o(!0)}},"Open simple snackbar")," ",r.a.createElement(Oa.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:n,autoHideDuration:6e3,onClose:function(e,t){"clickaway"!==t&&o(!1)},message:e.msg})," ")}));var wa=function(e){console.log(e);var t=e.current,a=e.validated,n=e.email,o=e.next,c=e.prev,i=e.validateMail,l=e.onFormSubmit;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card col-sm-9 col-md-7 col-lg-6 bg-light my-3 mx-auto "},r.a.createElement("div",{className:"card-body"},r.a.createElement("img",{src:ga.a,className:" img-fluid mx-auto d-block card-img-top text-center",style:{width:"20%",height:"auto"},alt:"ComfyPen logo"}),r.a.createElement("div",null,0===t&&r.a.createElement(va,{next:o,prev:c,validated:a,onFormSubmit:i})),r.a.createElement("div",null,1===t&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h6",null,n),r.a.createElement(ja,{prev:c,onFormSubmit:l}))))),r.a.createElement(ka,null))};var Ca=Object(Pt.a)(O.h,Object(i.b)((function(e){var t=e.custom,a=t.current,n=t.validated;return{email:t.email,auth:e.firebase.auth,current:a,validated:n}}),(function(e){return{signupAsync:function(t){return e((a=t,function(){var e=Object(U.a)(_.a.mark((function e(t,n,r){var o,c,i,l,s,u,m,d;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.getFirebase,c=r.getFirestore,t(V(!0)),t(C({msg:""})),i=o(),l=c(),e.prev=5,e.next=8,i.auth().createUserWithEmailAndPassword(a.email,a.password).then((function(e){var a=e.user;return t(C({msg:"Account successfully created. Proceed...!"})),J()("#snackBarTrigger").trigger("click"),a}));case 8:return s=e.sent,e.next=11,l.collection("users").doc(s.uid).set({id:s.uid,firstName:a.firstName,lastName:a.lastName},{merge:!0});case 11:return u=l.collection("users").doc(s.uid).collection("journals"),e.next=14,u.doc("Notes").set({journalId:"Notes",journalName:"Notes...",journalDescription:"Say goodbye to lost notes!"});case 14:return e.next=16,u.doc("Diary").set({journalId:"Diary",journalName:"Diary...",journalDescription:"Your companion everywhere with utmost convenience!"});case 16:console.log("journals created!"),t(z("account created!")),e.next=29;break;case 21:e.prev=21,e.t0=e.catch(5),m=e.t0.code,d=e.t0.message,console.log({errorCode:m,errorMessage:d}),t(z("Network error! Please try again!")),J()("#snackBarTrigger").trigger("click");case 29:case"end":return e.stop()}}),e,null,[[5,21]])})));return function(t,a,n){return e.apply(this,arguments)}}()));var a},checkEmailAsync:function(t){return e((a=t,function(e,t){e(V(!0)),e(C({msg:""}));var n=a.email;h.httpsCallable("checkEmail")(a).then((function(t){var a;!0===t.data.value&&(a="This email is already registered"),e(q(a,n)),J()("#snackBarTrigger").trigger("click")})).catch((function(t){var a;"not-found"===t.code?(a=t.message?t.message:"Email available",e({type:"NEXT"})):a="Please ensure you have an internet connection!",e(q(a,n)),J()("#snackBarTrigger").trigger("click"),console.log({err:t})}))}));var a},setMsg:function(t){return e(C(t))},next:function(){return e({type:"NEXT"})},prev:function(){return e({type:"PREV"})}}})))((function(e){var t=e.email,a=e.current,o=e.validated,c=e.auth,i=e.history,l=e.next,s=e.prev,u=e.setMsg,m=e.signupAsync,p=e.checkEmailAsync;return Object(n.useEffect)((function(){c.uid&&i.push("/")}),[c,i]),r.a.createElement(r.a.Fragment,null,r.a.createElement(wa,{email:t,current:a,validated:o,next:l,prev:s,validateMail:function(e){p({email:e.email})},onFormSubmit:function(e){u({msg:""});var a=Object(d.a)({},e,{email:t});m(a)}}))})),xa=a(36),Na=a(4),Sa=a(887);function Fa(e){var t=e.anchor,a=e.classes,n=e.toggleDrawer,o=e.name;return r.a.createElement("div",{className:Object(Na.a)(a.list,Object(xa.a)({},a.fullList,"top"===t||"bottom"===t)),role:"presentation",onClick:n(t,!1),onKeyDown:n(t,!1)},r.a.createElement(Jt.a,null,r.a.createElement(Kt.a,{button:!0},r.a.createElement(_t.a,null,r.a.createElement(Ut.a,null,o.initials)),r.a.createElement(Rt.a,{primary:o.firstName+" "+o.lastName})),r.a.createElement(I.a,null),r.a.createElement(j.b,{to:"/",style:{color:"#000"}},r.a.createElement(Kt.a,{button:!0},r.a.createElement(Sa.a,null,r.a.createElement(x.a,{icon:"home"})),r.a.createElement(Rt.a,{primary:"home"}))),r.a.createElement(j.b,{to:"/account",style:{color:"#000"}},r.a.createElement(Kt.a,{button:!0},r.a.createElement(Sa.a,null,r.a.createElement(x.a,{icon:"user"})),r.a.createElement(Rt.a,{primary:"account"}))),r.a.createElement(j.b,{to:"/security",style:{color:"#000"}},r.a.createElement(Kt.a,{button:!0},r.a.createElement(Sa.a,null,r.a.createElement(x.a,{icon:"user-shield"})),r.a.createElement(Rt.a,{primary:"privacy"}))),r.a.createElement(j.b,{to:"/theme",style:{color:"#000"}},r.a.createElement(Kt.a,{button:!0},r.a.createElement(Sa.a,null,r.a.createElement(x.a,{icon:"paint-brush"})),r.a.createElement(Rt.a,{primary:"theme"})))))}function Ia(e){return function(t,a,n){var r=n.getFirestore,o=a().firebase.auth.uid;r().collection("users").doc(o).set(e,{merge:!0}).then((function(e){})).catch((function(e){console.log(e)}))}}function Ta(e){var t=e.toggleTheme,a=e.darkMode;return r.a.createElement(F.a,{onClick:t,color:"inherit","aria-label":"theme type toggler"},r.a.createElement(x.a,{icon:a?"sun":"moon"}))}var Aa=Object(i.b)((function(e){return{profile:e.firebase.profile}}),(function(e){return{applyTheme:function(t){return e(Ia(t))}}}))((function(e){var t,a=e.profile,n=e.applyTheme,o=null===(t=a.theme)||void 0===t?void 0:t.darkMode;return r.a.createElement(Ta,{toggleTheme:function(){var e=a.theme,t=Object(d.a)({},e,{darkMode:!(null===e||void 0===e?void 0:e.darkMode)});n({theme:t})},darkMode:o})})),Pa=a(888),Da=a(889),Ba=a(901);function Ma(e){var t=Object(O.g)(),a=e.classes,n=e.handleClose,o=e.handleMenu,c=e.anchorEl,i=e.open,l=e.toggleDrawer,s=e.loading,u=e.name;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:a.root}," ",r.a.createElement(Pa.a,{position:"fixed"}," ",r.a.createElement(Da.a,{className:a.toolBar}," ",r.a.createElement(F.a,{edge:"start",onClick:l("left",!0),className:a.menuButton,color:"inherit","aria-label":"menu"}," ",r.a.createElement(Ba.a,null),"  ")," ",r.a.createElement(T.a,{variant:"h6",className:a.title}," ","ComfyPen-",r.a.createElement("span",{style:{textTransform:"uppercase"}},u.initials))," ",r.a.createElement(Se,{status:s}),r.a.createElement(Aa,null),r.a.createElement("div",null," ",r.a.createElement(F.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:o,color:"inherit"}," ",r.a.createElement(Yt.a,null)," ")," ",r.a.createElement(Gt.a,{id:"menu-appbar",anchorEl:c,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:i,onClose:n}," ",r.a.createElement("span",{onClick:function(){return t.goBack()}},r.a.createElement(Ht.a,{onClick:n},"  ","Back","   ")))," ")," ")," ")," "))}var La=a(894);var Ka=Object(u.d)(O.h,Object(i.b)((function(e,t){var a=t.location.pathname.split("/").filter((function(e){return""!==e})),n=e.custom.loading,r="onlineList"===a[0]?a[1]:"",o=e.firestore.data.journals,c=o?o[r]:{},i=e.firebase,l=i.auth,s=i.profile,u=l.displayName?l.displayName.split(" "):[],m=s.firstName,d=s.lastName,p=l.uid?u[0]?u[0].charAt(0):m.charAt(0):"",g=l.uid?u[1]?u[1].charAt(0):d.charAt(0):"";return{auth:l,profile:s,journalId:r,journal:c,loading:n,name:{firstName:u[0]||m||"",lastName:u[1]||d||"",initials:p+g}}})),Object(l.firestoreConnect)((function(e){var t=e.auth,a={collection:"users",doc:null===t||void 0===t?void 0:t.uid,subcollections:[{collection:"journals",orderBy:["journalName","desc"]}],storeAs:"journals"};return(null===t||void 0===t?void 0:t.uid)?[a]:[]})))((function(e){var t=te(),a=Object(n.useState)(null),o=Object(N.a)(a,2),c=o[0],i=o[1],l=Boolean(c),s=r.a.useState(!1),u=Object(N.a)(s,2),m=u[0],d=u[1],p=function(e,t){return function(e){(!e||"keydown"!==e.type||"Tab"!==e.key&&"Shift"!==e.key)&&d(t)}},g=e.journal,f=e.loading,h=e.name;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ma,{journal:g,open:l,anchorEl:c,handleClose:function(){i(null)},handleMenu:function(e){i(e.currentTarget)},classes:t,toggleDrawer:p,popMenu:void 0,loading:f,name:h}),r.a.createElement(La.a,{anchor:"left",open:m,onClose:p(0,!1),onOpen:p(0,!0)},r.a.createElement(Fa,{classes:t,toggleDrawer:p,anchor:"left",name:h})))})),_a=a(424);var Ua=function(e){var t=e.children,a=Object(_a.a)(e,["children"]),n=Object(i.c)((function(e){return e.firebase.auth}));return r.a.createElement(O.b,Object.assign({},a,{render:function(e){var a=e.location;return Object(l.isLoaded)(n)&&!Object(l.isEmpty)(n)?t:r.a.createElement(O.a,{to:{pathname:"/account",state:{from:a}}})}}))},Ra=a(896),Ja=a(420);function za(e){var t=e.title,a=e.body,n=e.toggler,o=e.color,c=e.toggleState,i=e.classes,l=e.saveColor,s=e.onChangeComplete,u=e.reset;return r.a.createElement("div",{className:i.root},r.a.createElement(S.a,{container:!0,justify:"center",alignItems:"center",direction:"column"},r.a.createElement(S.a,{item:!0,xs:12,md:10,lg:8,container:!0},r.a.createElement(le.a,{style:{width:"100%"},className:i.paper},r.a.createElement(T.a,{variant:"h5"},t),r.a.createElement(T.a,{variant:"body1"},a),r.a.createElement(Z.a,{onClick:n,variant:"contained",endIcon:r.a.createElement(x.a,{icon:c?"angle-up":"angle-down"}),className:"".concat(i.button," ").concat(i.margin)},c?r.a.createElement(T.a,{variant:"body1"},"close"):r.a.createElement(T.a,{variant:"body1"},"open color selector"))))),c&&r.a.createElement(S.a,{container:!0,justify:"center",alignItems:"center",className:i.root},r.a.createElement(S.a,{item:!0,xs:12,alignItems:"center",className:i.root,container:!0},r.a.createElement(Ja.SketchPicker,{color:o,onChangeComplete:s})),r.a.createElement(S.a,{item:!0,xs:12,alignItems:"center",className:i.root,container:!0},r.a.createElement(xe.a,{className:i.margin},r.a.createElement(Z.a,{onClick:l,variant:"contained",endIcon:r.a.createElement(x.a,{icon:"save"})},"Save changes"),r.a.createElement(Z.a,{onClick:u,variant:"contained",endIcon:r.a.createElement(x.a,{icon:"undo"})},"Reset")))))}function Va(e){var t=e.title,a=e.body,o=e.toggler,c=e.save,i=e.toggleState,l=e.initialColor,s=Object(n.useState)(l),u=Object(N.a)(s,2),m=u[0],d=u[1];Object(n.useEffect)((function(){d(l)}),[l]);var p=te({color:m});return r.a.createElement(r.a.Fragment,null,r.a.createElement(za,{title:t,body:a,toggler:o,toggleState:i,classes:p,saveColor:function(){c(m)},onChangeComplete:function(e){d(e.hex)},reset:function(){c("")},color:m}))}function qa(e){var t=e.savePrimaryColor,a=e.saveSecondaryColor,n=e.togglePrimarySelector,o=e.toggleSecondarySelector,c=e.applyChanges,i=e.primaryToggleState,l=e.secondaryToggleState,s=e.primary,u=e.secondary,m=te();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Va,{initialColor:s,save:t,toggler:n,toggleState:i,title:"Primary color",body:"This is the main color of the application and it is used in all the main areas like the navigation bar."}),r.a.createElement(Va,{initialColor:u,save:a,toggler:o,toggleState:l,title:"Secondary color",body:"This is the secondary color of the application and it is used for the minor parts like buttons"}),r.a.createElement(S.a,{container:!0,className:m.root},r.a.createElement(Z.a,{className:m.margin,endIcon:r.a.createElement(x.a,{icon:"paint-brush"}),onClick:c},"apply")))}var Wa=Object(Pt.a)(Ra.a,Object(i.b)((function(e){return{profile:e.firebase.profile}}),(function(e){return{applyTheme:function(t){return e(Ia(t))}}})))((function(e){var t=e.theme.palette,a=t.primary,o=t.secondary,c=e.profile,i=Object(n.useState)({primaryColor:"",secondaryColor:"",primaryToggleState:!1,secondaryToggleState:!1}),l=Object(N.a)(i,2),s=l[0],u=l[1];Object(n.useEffect)((function(){u((function(e){return Object(d.a)({},e,{primaryColor:a.main,secondaryColor:o.main})}))}),[a.main,o.main]);var m=s.primaryColor,p=s.secondaryColor;return r.a.createElement(r.a.Fragment,null,r.a.createElement(qa,{savePrimaryColor:function(e){u(Object(d.a)({},s,{primaryColor:e,primaryToggleState:!s.primaryToggleState}))},saveSecondaryColor:function(e){u(Object(d.a)({},s,{secondaryColor:e,secondaryToggleState:!s.secondaryToggleState}))},togglePrimarySelector:function(){var e=s.primaryToggleState,t=s.secondaryToggleState;u(Object(d.a)({},s,{primaryToggleState:!e,secondaryToggleState:e?t:t?!t:t}))},toggleSecondarySelector:function(){var e=s.primaryToggleState,t=s.secondaryToggleState;u(Object(d.a)({},s,{secondaryToggleState:!t,primaryToggleState:t?e:e?!e:e}))},applyChanges:function(){var t=c.theme,a=s.primaryColor,n=s.secondaryColor;e.applyTheme({theme:Object(d.a)({},t,{primary:a,secondary:n})})},primaryToggleState:s.primaryToggleState,secondaryToggleState:s.secondaryToggleState,primary:m,secondary:p}))})),Ga=a(147),Ha=a(25);a(819);Ga.b.add(Ha.k,Ha.i,Ha.w,Ha.n,Ha.f,Ha.B,Ha.q,Ha.s,Ha.r,Ha.v,Ha.t,Ha.c,Ha.j,Ha.h,Ha.l,Ha.m,Ha.A,Ha.C,Ha.D,Ha.y,Ha.d,Ha.z,Ha.e,Ha.g,Ha.p,Ha.b,Ha.a,Ha.x,Ha.u,Ha.o);var Ya=Object(i.b)((function(e){return{profile:e.firebase.profile}}))((function(e){var t,a,n,o=null===(t=e.profile.theme)||void 0===t?void 0:t.primary,c=null===(a=e.profile.theme)||void 0===a?void 0:a.secondary,i=null===(n=e.profile.theme)||void 0===n?void 0:n.darkMode,l=Object(oe.a)({palette:{type:i?"dark":"light",primary:{main:o||"#17a2b8"},secondary:{main:c||"#ffc107"}},props:{MuiFab:{color:"primary"},MuiButton:{variant:"contained",color:"secondary"},MuiButtonGroup:{variant:"contained",color:"secondary"},MuiTextField:{size:"small"}}});return r.a.createElement(r.a.Fragment,null," ",r.a.createElement(ce.a,{theme:l},r.a.createElement(ie.a,null),r.a.createElement(j.a,null,r.a.createElement("nav",null,r.a.createElement(Ka,null)),r.a.createElement("main",{style:{marginBottom:100},className:" unfixed"},r.a.createElement(O.d,null,r.a.createElement(Ua,{path:"/onlineList/:journalId"},r.a.createElement(Wt,null)),r.a.createElement(O.b,{path:"/account",component:re}),r.a.createElement(O.b,{path:"/terms",component:jt}),r.a.createElement(O.b,{path:"/privacy",component:Ot}),r.a.createElement(O.b,{path:"/login",component:ha}),r.a.createElement(O.b,{path:"/signup",component:Ca}),r.a.createElement(O.b,{path:"/theme",component:Wa}),r.a.createElement(Ua,{exact:!0,path:"/"},r.a.createElement(yt,null)),r.a.createElement(Ua,{path:"/setPin"},r.a.createElement(ia,null)),r.a.createElement(Ua,{path:"/changePin"},r.a.createElement(la,null)),r.a.createElement(Ua,{path:"/discardPin"},r.a.createElement(sa,null)),r.a.createElement(Ua,{path:"/security"},r.a.createElement(de,null)),r.a.createElement(Ua,{path:"/read/:entryId"},r.a.createElement(ra,null)),r.a.createElement(Ua,{path:"/write/:journalId"},r.a.createElement(Lt,null)))),r.a.createElement(ka,null))))})),$a=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Za(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a(820);var Xa={firebase:b,config:{userProfile:"users",useFirestoreForProfile:!0},dispatch:y.dispatch,createFirestoreInstance:s.createFirestoreInstance};function Qa(e){var t=e.children,a=Object(i.c)((function(e){return e.firebase.auth}));return Object(l.isLoaded)(a)?t:r.a.createElement(aa,{status:!!a})}c.a.render(r.a.createElement(i.a,{store:y},r.a.createElement(l.ReactReduxFirebaseProvider,Xa,r.a.createElement(Qa,null,r.a.createElement(Ya,null)))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");$a?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Za(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Za(t,e)}))}}()}},[[439,1,2]]]);
//# sourceMappingURL=main.373dc3c6.chunk.js.map